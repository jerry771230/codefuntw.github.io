<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Codefun</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://codefun.tw/"/>
  <updated>2017-10-23T06:34:16.000Z</updated>
  <id>http://codefun.tw/</id>
  
  <author>
    <name>Jerry Huang</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>在 vs code 使用 php cs fixer 進行 coding style formating</title>
    <link href="http://codefun.tw/2017/10/23/2017102302-vscode-extension-php-cs-fixer/"/>
    <id>http://codefun.tw/2017/10/23/2017102302-vscode-extension-php-cs-fixer/</id>
    <published>2017-10-23T12:17:00.000Z</published>
    <updated>2017-10-23T06:34:16.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="安裝"><a href="#安裝" class="headerlink" title="安裝"></a>安裝</h2><ol><li><p>在 command line 使用 homebrew 安裝 php cs fixer</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ brew install php-cs-fixer</div></pre></td></tr></table></figure><a id="more"></a></li><li><p>在 vs code 安裝 extension - 由 junstyle 開發的 php cs fixer<br><a href="https://github.com/FriendsOfPHP/PHP-CS-Fixer#installation" target="_blank" rel="external">Install guide</a></p></li></ol><h2 id="設定"><a href="#設定" class="headerlink" title="設定"></a>設定</h2><ol><li><p>快速鍵 <code>cmd + shift + p</code> 後輸入 <code>workspace settings</code> 貼上</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    &quot;php.executablePath&quot;: &quot;/usr/local/bin/php&quot;,</div><div class="line">    &quot;php-cs-fixer.executablePath&quot;: &quot;php-cs-fixer&quot;,</div><div class="line">    &quot;php-cs-fixer.executablePathWindows&quot;: &quot;&quot;,   //eg: php-cs-fixer.bat</div><div class="line">    &quot;php-cs-fixer.onsave&quot;: true,</div><div class="line">    &quot;php-cs-fixer.rules&quot;: &quot;&quot;,</div><div class="line">    &quot;php-cs-fixer.config&quot;: &quot;.php_cs&quot;,</div><div class="line">    &quot;php-cs-fixer.autoFixByBracket&quot;: true,</div><div class="line">    &quot;php-cs-fixer.autoFixBySemicolon&quot;: false,</div><div class="line">    &quot;php-cs-fixer.formatHtml&quot;: false,</div><div class="line">    &quot;php-cs-fixer.documentFormattingProvider&quot;: true,</div><div class="line">    &quot;php-cs-fixer.allowRisky&quot;: false</div><div class="line">&#125;</div></pre></td></tr></table></figure><p> 說明：</p><ul><li><code>&quot;php-cs-fixer.onsave&quot;: true,</code>: 存檔時即執行</li><li><code>&quot;php-cs-fixer.rules&quot;: &quot;&quot;,</code>: 留空字串</li><li><code>&quot;php-cs-fixer.config&quot;: &quot;.php_cs&quot;,</code>: 使用 project root path 下的 config file 最為 formating 基準</li></ul></li><li><p>在 project root 新增檔案 <code>.php_cs</code>，內容如下</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line"></div><div class="line">return PhpCsFixer\Config::create()</div><div class="line">-&gt;setRules(array(</div><div class="line">        &apos;@PSR1&apos; =&gt; true,</div><div class="line">        &apos;@PSR2&apos; =&gt; true,</div><div class="line">        &apos;@Symfony&apos; =&gt; true,</div><div class="line">        &apos;array_syntax&apos; =&gt; array(&apos;syntax&apos; =&gt; &apos;short&apos;),</div><div class="line">        &apos;combine_consecutive_unsets&apos; =&gt; true,</div><div class="line">        &apos;method_separation&apos; =&gt; true,</div><div class="line">        &apos;no_multiline_whitespace_before_semicolons&apos; =&gt; true,</div><div class="line">        &apos;single_quote&apos; =&gt; true,</div><div class="line"></div><div class="line">        &apos;binary_operator_spaces&apos; =&gt; array(</div><div class="line">            &apos;align_double_arrow&apos; =&gt; false,</div><div class="line">            &apos;align_equals&apos; =&gt; false,</div><div class="line">        ),</div><div class="line">        // &apos;blank_line_after_opening_tag&apos; =&gt; true,</div><div class="line">        // &apos;blank_line_before_return&apos; =&gt; true,</div><div class="line">        &apos;braces&apos; =&gt; array(</div><div class="line">            &apos;allow_single_line_closure&apos; =&gt; true,</div><div class="line">        ),</div><div class="line">        // &apos;cast_spaces&apos; =&gt; true,</div><div class="line">        // &apos;class_definition&apos; =&gt; array(&apos;singleLine&apos; =&gt; true),</div><div class="line">        &apos;concat_space&apos; =&gt; array(&apos;spacing&apos; =&gt; &apos;one&apos;),</div><div class="line">        &apos;declare_equal_normalize&apos; =&gt; true,</div><div class="line">        &apos;function_typehint_space&apos; =&gt; true,</div><div class="line">        &apos;hash_to_slash_comment&apos; =&gt; true,</div><div class="line">        &apos;include&apos; =&gt; true,</div><div class="line">        &apos;lowercase_cast&apos; =&gt; true,</div><div class="line">        // &apos;native_function_casing&apos; =&gt; true,</div><div class="line">        // &apos;new_with_braces&apos; =&gt; true,</div><div class="line">        // &apos;no_blank_lines_after_class_opening&apos; =&gt; true,</div><div class="line">        // &apos;no_blank_lines_after_phpdoc&apos; =&gt; true,</div><div class="line">        // &apos;no_empty_comment&apos; =&gt; true,</div><div class="line">        // &apos;no_empty_phpdoc&apos; =&gt; true,</div><div class="line">        // &apos;no_empty_statement&apos; =&gt; true,</div><div class="line">        &apos;no_extra_consecutive_blank_lines&apos; =&gt; array(</div><div class="line">            &apos;curly_brace_block&apos;,</div><div class="line">            &apos;extra&apos;,</div><div class="line">            &apos;parenthesis_brace_block&apos;,</div><div class="line">            &apos;square_brace_block&apos;,</div><div class="line">            &apos;throw&apos;,</div><div class="line">            &apos;use&apos;,</div><div class="line">        ),</div><div class="line">        // &apos;no_leading_import_slash&apos; =&gt; true,</div><div class="line">        // &apos;no_leading_namespace_whitespace&apos; =&gt; true,</div><div class="line">        // &apos;no_mixed_echo_print&apos; =&gt; array(&apos;use&apos; =&gt; &apos;echo&apos;),</div><div class="line">        &apos;no_multiline_whitespace_around_double_arrow&apos; =&gt; true,</div><div class="line">        // &apos;no_short_bool_cast&apos; =&gt; true,</div><div class="line">        // &apos;no_singleline_whitespace_before_semicolons&apos; =&gt; true,</div><div class="line">        &apos;no_spaces_around_offset&apos; =&gt; true,</div><div class="line">        // &apos;no_trailing_comma_in_list_call&apos; =&gt; true,</div><div class="line">        // &apos;no_trailing_comma_in_singleline_array&apos; =&gt; true,</div><div class="line">        // &apos;no_unneeded_control_parentheses&apos; =&gt; true,</div><div class="line">        // &apos;no_unused_imports&apos; =&gt; true,</div><div class="line">        &apos;no_whitespace_before_comma_in_array&apos; =&gt; true,</div><div class="line">        &apos;no_whitespace_in_blank_line&apos; =&gt; true,</div><div class="line">        // &apos;normalize_index_brace&apos; =&gt; true,</div><div class="line">        &apos;object_operator_without_whitespace&apos; =&gt; true,</div><div class="line">        // &apos;php_unit_fqcn_annotation&apos; =&gt; true,</div><div class="line">        // &apos;phpdoc_align&apos; =&gt; true,</div><div class="line">        // &apos;phpdoc_annotation_without_dot&apos; =&gt; true,</div><div class="line">        // &apos;phpdoc_indent&apos; =&gt; true,</div><div class="line">        // &apos;phpdoc_inline_tag&apos; =&gt; true,</div><div class="line">        // &apos;phpdoc_no_access&apos; =&gt; true,</div><div class="line">        // &apos;phpdoc_no_alias_tag&apos; =&gt; true,</div><div class="line">        // &apos;phpdoc_no_empty_return&apos; =&gt; true,</div><div class="line">        // &apos;phpdoc_no_package&apos; =&gt; true,</div><div class="line">        // &apos;phpdoc_no_useless_inheritdoc&apos; =&gt; true,</div><div class="line">        // &apos;phpdoc_return_self_reference&apos; =&gt; true,</div><div class="line">        // &apos;phpdoc_scalar&apos; =&gt; true,</div><div class="line">        // &apos;phpdoc_separation&apos; =&gt; true,</div><div class="line">        // &apos;phpdoc_single_line_var_spacing&apos; =&gt; true,</div><div class="line">        // &apos;phpdoc_summary&apos; =&gt; true,</div><div class="line">        // &apos;phpdoc_to_comment&apos; =&gt; true,</div><div class="line">        // &apos;phpdoc_trim&apos; =&gt; true,</div><div class="line">        // &apos;phpdoc_types&apos; =&gt; true,</div><div class="line">        // &apos;phpdoc_var_without_name&apos; =&gt; true,</div><div class="line">        // &apos;pre_increment&apos; =&gt; true,</div><div class="line">        // &apos;return_type_declaration&apos; =&gt; true,</div><div class="line">        // &apos;self_accessor&apos; =&gt; true,</div><div class="line">        // &apos;short_scalar_cast&apos; =&gt; true,</div><div class="line">        &apos;single_blank_line_before_namespace&apos; =&gt; true,</div><div class="line">        // &apos;single_class_element_per_statement&apos; =&gt; true,</div><div class="line">        // &apos;space_after_semicolon&apos; =&gt; true,</div><div class="line">        // &apos;standardize_not_equals&apos; =&gt; true,</div><div class="line">        &apos;ternary_operator_spaces&apos; =&gt; true,</div><div class="line">        // &apos;trailing_comma_in_multiline_array&apos; =&gt; true,</div><div class="line">        &apos;trim_array_spaces&apos; =&gt; true,</div><div class="line">        &apos;unary_operator_spaces&apos; =&gt; true,</div><div class="line">        &apos;whitespace_after_comma_in_array&apos; =&gt; true,</div><div class="line">    ))</div><div class="line">    //-&gt;setIndent(&quot;\t&quot;)</div><div class="line">    -&gt;setLineEnding(&quot;\n&quot;)</div><div class="line">;</div></pre></td></tr></table></figure><p> 說明：</p><ul><li>加入 <code>&#39;@PSR1&#39; =&gt; true,</code> 及 <code>&#39;@Symfony&#39; =&gt; true,</code></li></ul></li><li><p>重新啟動 vs code（建議使用 <code>cmd + Q</code>，再重新啟動）</p></li><li>編輯檔案後存檔，即自動執行 php-cs-fixer 進行 coding style 修正</li></ol>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;安裝&quot;&gt;&lt;a href=&quot;#安裝&quot; class=&quot;headerlink&quot; title=&quot;安裝&quot;&gt;&lt;/a&gt;安裝&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;在 command line 使用 homebrew 安裝 php cs fixer&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;$ brew install php-cs-fixer&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="editor" scheme="http://codefun.tw/categories/editor/"/>
    
    
      <category term="coding style" scheme="http://codefun.tw/tags/coding-style/"/>
    
      <category term="vscode" scheme="http://codefun.tw/tags/vscode/"/>
    
      <category term="extensions" scheme="http://codefun.tw/tags/extensions/"/>
    
      <category term="php cs fixer" scheme="http://codefun.tw/tags/php-cs-fixer/"/>
    
  </entry>
  
  <entry>
    <title>管理或分享 vs code 的 workspace extensions</title>
    <link href="http://codefun.tw/2017/10/23/2017102301-vscode-workspace-recommended-extensions/"/>
    <id>http://codefun.tw/2017/10/23/2017102301-vscode-workspace-recommended-extensions/</id>
    <published>2017-10-23T10:24:24.000Z</published>
    <updated>2017-10-23T06:18:26.000Z</updated>
    
    <content type="html"><![CDATA[<p>多人開發使用 vs code 當成預設的 editor 時，透過分享 <code>Workspace Recommended Extensions</code> 的方式讓大家都使用同樣的 extension 達成開發或檢查的一致性。</p> <a id="more"></a><h2 id="列出已經安裝的-extensions"><a href="#列出已經安裝的-extensions" class="headerlink" title="列出已經安裝的 extensions"></a>列出已經安裝的 extensions</h2><p>Command line 執行<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ code --list-extensions</div></pre></td></tr></table></figure></p><p>結果</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line">DavidAnson.vscode-markdownlint</div><div class="line">EditorConfig.EditorConfig</div><div class="line">HookyQR.beautify</div><div class="line">HvyIndustries.crane</div><div class="line">JerryHong.autofilename</div><div class="line">PeterJausovec.vscode-docker</div><div class="line">Tyriar.sort-lines</div><div class="line">alefragnani.Bookmarks</div><div class="line">alefragnani.project-manager</div><div class="line">alexdima.copy-relative-path</div><div class="line">bmewburn.vscode-intelephense-client</div><div class="line">christian-kohler.npm-intellisense</div><div class="line">christian-kohler.path-intellisense</div><div class="line">cmstead.jsrefactor</div><div class="line">codezombiech.gitignore</div><div class="line">dbaeumer.vscode-eslint</div><div class="line">donjayamanne.githistory</div><div class="line">eamodio.gitlens</div><div class="line">eg2.vscode-npm-script</div><div class="line">esbenp.prettier-vscode</div><div class="line">felipecaputo.git-project-manager</div><div class="line">felixfbecker.php-debug</div><div class="line">formulahendry.auto-close-tag</div><div class="line">formulahendry.auto-rename-tag</div><div class="line">henriiik.docker-linter</div><div class="line">ikappas.phpcs</div><div class="line">jasonnutter.search-node-modules</div><div class="line">joelday.docthis</div><div class="line">junstyle.php-cs-fixer</div><div class="line">ms-vscode.azure-account</div><div class="line">msjsdiag.debugger-for-chrome</div><div class="line">neilbrayfield.php-docblocker</div><div class="line">octref.vetur</div><div class="line">odubuc.mysql-inline-decorator</div><div class="line">onecentlin.laravel-blade</div><div class="line">onecentlin.laravel5-snippets</div><div class="line">richie5um2.vscode-sort-json</div><div class="line">samverschueren.final-newline</div><div class="line">shardulm94.trailing-spaces</div><div class="line">sozercan.slack</div><div class="line">streetsidesoftware.code-spell-checker</div><div class="line">waderyan.gitblame</div><div class="line">waderyan.nodejs-extension-pack</div><div class="line">wmaurer.change-case</div><div class="line">wwm.better-align</div><div class="line">xabikos.JavaScriptSnippets</div></pre></td></tr></table></figure><p>將列出的 extensions 全部複製起來，後續會用到。</p><h2 id="在-workspace-匯入及安裝-extensions"><a href="#在-workspace-匯入及安裝-extensions" class="headerlink" title="在 workspace 匯入及安裝 extensions"></a>在 workspace 匯入及安裝 extensions</h2><ol><li>打開 vs code 按下快速鍵 <code>command + shift + p</code></li><li>在跳出的對話框命令列後輸入或找到 <code>&gt; Configure Recommended Extensions (Workspace)</code></li><li><p>接著修改開啟的 <code>.vscode/extensions.json</code> 檔案，以 JOSN 格式編輯貼上剛才複製的 extensions</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    // See http://go.microsoft.com/fwlink/?LinkId=827846</div><div class="line">    // for the documentation about the extensions.json format</div><div class="line">    &quot;recommendations&quot;: [</div><div class="line">    // Extension identifier format: $&#123;publisher&#125;.$&#123;name&#125;. Example: vscode.csharp</div><div class="line">        &quot;DavidAnson.vscode-markdownlint&quot;,</div><div class="line">        &quot;EditorConfig.EditorConfig&quot;,</div><div class="line">        &quot;HookyQR.beautify&quot;,</div><div class="line">        &quot;HvyIndustries.crane&quot;,</div><div class="line">        &quot;JerryHong.autofilename&quot;,</div><div class="line">        &quot;PeterJausovec.vscode-docker&quot;,</div><div class="line">        &quot;Tyriar.sort-lines&quot;,</div><div class="line">        &quot;alefragnani.Bookmarks&quot;,</div><div class="line">        &quot;alefragnani.project-manager&quot;,</div><div class="line">        &quot;alexdima.copy-relative-path&quot;,</div><div class="line">        &quot;bmewburn.vscode-intelephense-client&quot;,</div><div class="line">        &quot;christian-kohler.npm-intellisense&quot;,</div><div class="line">        &quot;christian-kohler.path-intellisense&quot;,</div><div class="line">        &quot;cmstead.jsrefactor&quot;,</div><div class="line">        &quot;codezombiech.gitignore&quot;,</div><div class="line">        &quot;dbaeumer.vscode-eslint&quot;,</div><div class="line">        &quot;donjayamanne.githistory&quot;,</div><div class="line">        &quot;eamodio.gitlens&quot;,</div><div class="line">        &quot;eg2.vscode-npm-script&quot;,</div><div class="line">        &quot;esbenp.prettier-vscode&quot;,</div><div class="line">        &quot;felipecaputo.git-project-manager&quot;,</div><div class="line">        &quot;felixfbecker.php-debug&quot;,</div><div class="line">        &quot;formulahendry.auto-close-tag&quot;,</div><div class="line">        &quot;formulahendry.auto-rename-tag&quot;,</div><div class="line">        &quot;henriiik.docker-linter&quot;,</div><div class="line">        &quot;ikappas.phpcs&quot;,</div><div class="line">        &quot;jasonnutter.search-node-modules&quot;,</div><div class="line">        &quot;joelday.docthis&quot;,</div><div class="line">        &quot;junstyle.php-cs-fixer&quot;,</div><div class="line">        &quot;ms-vscode.azure-account&quot;,</div><div class="line">        &quot;msjsdiag.debugger-for-chrome&quot;,</div><div class="line">        &quot;neilbrayfield.php-docblocker&quot;,</div><div class="line">        &quot;octref.vetur&quot;,</div><div class="line">        &quot;odubuc.mysql-inline-decorator&quot;,</div><div class="line">        &quot;onecentlin.laravel-blade&quot;,</div><div class="line">        &quot;onecentlin.laravel5-snippets&quot;,</div><div class="line">        &quot;richie5um2.vscode-sort-json&quot;,</div><div class="line">        &quot;samverschueren.final-newline&quot;,</div><div class="line">        &quot;shardulm94.trailing-spaces&quot;,</div><div class="line">        &quot;sozercan.slack&quot;,</div><div class="line">        &quot;streetsidesoftware.code-spell-checker&quot;,</div><div class="line">        &quot;waderyan.gitblame&quot;,</div><div class="line">        &quot;waderyan.nodejs-extension-pack&quot;,</div><div class="line">        &quot;wmaurer.change-case&quot;,</div><div class="line">        &quot;wwm.better-align&quot;,</div><div class="line">        &quot;xabikos.JavaScriptSnippets&quot;</div><div class="line">    ]</div><div class="line">&#125;</div></pre></td></tr></table></figure></li><li><p>點擊左側 <code>EXPLOER</code> 選單 ICON 的 <code>Extensions</code>（或快速鍵 <code>shift + command + x</code>），在展開的清單視窗右上角點擊 <code>...</code> 圖示，選取 <code>Show Workspace Recommended Extensions</code>，然後挑選想要的 extension 進行安裝。也可以全部安裝後，再把不想使用的 extension disable :)</p></li></ol><h2 id="Extensions-的安裝路徑"><a href="#Extensions-的安裝路徑" class="headerlink" title="Extensions 的安裝路徑"></a>Extensions 的安裝路徑</h2><ul><li><strong>Windows</strong> <code>%USERPROFILE%\.vscode\extensions</code></li><li><strong>Mac</strong> <code>~/.vscode/extensions</code></li><li><strong>Linux</strong> <code>~/.vscode/extensions</code></li></ul><h2 id="參考資料-References"><a href="#參考資料-References" class="headerlink" title="參考資料  References"></a>參考資料  References</h2><ul><li><a href="https://code.visualstudio.com/docs/editor/extension-gallery#_command-line-extension-management" target="_blank" rel="external">Command line extension management</a></li><li><a href="https://code.visualstudio.com/docs/editor/extension-gallery#_workspace-recommended-extensions" target="_blank" rel="external">Workspace Recommended Extensions</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;多人開發使用 vs code 當成預設的 editor 時，透過分享 &lt;code&gt;Workspace Recommended Extensions&lt;/code&gt; 的方式讓大家都使用同樣的 extension 達成開發或檢查的一致性。&lt;/p&gt;
    
    </summary>
    
      <category term="editor" scheme="http://codefun.tw/categories/editor/"/>
    
    
      <category term="vscode" scheme="http://codefun.tw/tags/vscode/"/>
    
      <category term="extensions" scheme="http://codefun.tw/tags/extensions/"/>
    
  </entry>
  
  <entry>
    <title>使用 EditorConfig 統一專案的 Coding Style</title>
    <link href="http://codefun.tw/2017/08/29/2017082901-editorconfig-settings/"/>
    <id>http://codefun.tw/2017/08/29/2017082901-editorconfig-settings/</id>
    <published>2017-08-29T01:29:00.000Z</published>
    <updated>2017-10-23T04:04:08.000Z</updated>
    
    <content type="html"><![CDATA[<p>使用 <a href="http://editorconfig.org/" target="_blank" rel="external">EditorConfig</a> 統一專案的 Coding Style。大部分的編輯器本身或外掛都有支援 EditorConfig。</p><a id="more"></a><p>在專案根目錄下建立 <code>.editorconfig</code> 內容如下</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">root = true</div><div class="line"></div><div class="line">[*]</div><div class="line">charset = utf-8</div><div class="line">end_of_line = lf</div><div class="line">insert_final_newline = true</div><div class="line">trim_trailing_whitespace = true</div><div class="line"></div><div class="line">[*.&#123;js,json,vue&#125;]</div><div class="line">indent_style = space</div><div class="line">indent_size = 2</div><div class="line"></div><div class="line">[*.php]</div><div class="line">indent_style = space</div><div class="line">indent_size = 4</div><div class="line"></div><div class="line">[*.md]</div><div class="line">trim_trailing_whitespace = false</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;使用 &lt;a href=&quot;http://editorconfig.org/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;EditorConfig&lt;/a&gt; 統一專案的 Coding Style。大部分的編輯器本身或外掛都有支援 EditorConfig。&lt;/p&gt;
    
    </summary>
    
      <category term="programing" scheme="http://codefun.tw/categories/programing/"/>
    
    
      <category term="coding style" scheme="http://codefun.tw/tags/coding-style/"/>
    
      <category term="editorconfig" scheme="http://codefun.tw/tags/editorconfig/"/>
    
  </entry>
  
  <entry>
    <title>Homebrew 安裝 Nginx、PHP71 筆記</title>
    <link href="http://codefun.tw/2017/08/27/2017082701-brew-install-nginx-php71-fpm/"/>
    <id>http://codefun.tw/2017/08/27/2017082701-brew-install-nginx-php71-fpm/</id>
    <published>2017-08-27T10:08:52.000Z</published>
    <updated>2017-10-23T04:04:10.000Z</updated>
    
    <content type="html"><![CDATA[<p>在 macOX Sierra 透過 <code>brew</code> 指令安裝 <code>php71</code>（帶有 <code>php-fpm</code>）及 <code>nginx</code>。<br>Install NGINX with PHP71 on Mac OS Sierra with Homebrew.</p><a id="more"></a><h2 id="前言-Prologue"><a href="#前言-Prologue" class="headerlink" title="前言  Prologue"></a>前言  Prologue</h2><p>臨時有需要讓 localhost 透過使用 <a href="https://ngrok.com/" target="_blank" rel="external">ngrok</a> 的對外服務，以測試 webhook 功能，BUT nginx 就在這個時候出問題了。<br>本來以為是用了 <a href="https://laravel.com/docs/master/valet" target="_blank" rel="external">Laravel Valet</a> 的關係，但即使是停用 Valet，修改 hosts 或重建 nginx.conf 都於事無補，只好從安裝 PHP 到 Nginx 重新做起。</p><h2 id="環境-Environment"><a href="#環境-Environment" class="headerlink" title="環境  Environment"></a>環境  Environment</h2><ul><li>macOS Sierra： 10.12.5</li><li>homebrew： 1.3.1</li></ul><h2 id="Install-Commandline-Tools"><a href="#Install-Commandline-Tools" class="headerlink" title="Install Commandline Tools"></a>Install Commandline Tools</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ xcode-select —install</div></pre></td></tr></table></figure><h2 id="Install-Homebrew"><a href="#Install-Homebrew" class="headerlink" title="Install Homebrew"></a>Install Homebrew</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;</div></pre></td></tr></table></figure><h3 id="Check-Installation"><a href="#Check-Installation" class="headerlink" title="Check Installation"></a>Check Installation</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ brew doctor</div></pre></td></tr></table></figure><h3 id="Update-Brew-and-Packages"><a href="#Update-Brew-and-Packages" class="headerlink" title="Update Brew and Packages"></a>Update Brew and Packages</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ brew update &amp;&amp; brew upgrade</div></pre></td></tr></table></figure><h3 id="Install-brew-services"><a href="#Install-brew-services" class="headerlink" title="Install brew services"></a>Install brew services</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ brew tap homebrew/services</div></pre></td></tr></table></figure><h2 id="安裝-DNSMasq"><a href="#安裝-DNSMasq" class="headerlink" title="安裝 DNSMasq"></a>安裝 DNSMasq</h2><p>DNSMasq is used to resolve all domains that end with .dev to 127.0.0.1.<br>DNSMasq 將 .env 結尾的網址對應到 127.0.0.1，就不需要再修改 <code>/etc/hosts</code> 檔案</p><h3 id="安裝-Install"><a href="#安裝-Install" class="headerlink" title="安裝  Install"></a>安裝  Install</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ brew install dnsmasq</div></pre></td></tr></table></figure><h3 id="配置-Configure"><a href="#配置-Configure" class="headerlink" title="配置  Configure"></a>配置  Configure</h3><p>檔案 <code>/usr/local/etc/dnsmasq.conf</code> 內容<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">address=/.dev/127.0.0.1</div><div class="line">listen-address=127.0.0.1</div></pre></td></tr></table></figure></p><p>檔案 <code>/etc/resolver/dev</code> 內容<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">nameserver 127.0.0.1</div></pre></td></tr></table></figure></p><h3 id="start、stop、restart-DNSMasq"><a href="#start、stop、restart-DNSMasq" class="headerlink" title="start、stop、restart DNSMasq"></a><code>start</code>、<code>stop</code>、<code>restart</code> DNSMasq</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ sudo brew services start dnsmasq</div><div class="line">$ sudo brew services stop dnsmasq</div><div class="line">$ sudo brew services restart dnsmasq</div></pre></td></tr></table></figure><h3 id="測試-Testing"><a href="#測試-Testing" class="headerlink" title="測試  Testing"></a>測試  Testing</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">$ dig testing.dev @127.0.0.1</div><div class="line">dig testing.dev @127.0.0.1</div><div class="line"></div><div class="line">; &lt;&lt;&gt;&gt; DiG 9.8.3-P1 &lt;&lt;&gt;&gt; testing.dev @127.0.0.1</div><div class="line">;; global options: +cmd</div><div class="line">;; Got answer:</div><div class="line">;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 21966</div><div class="line">;; flags: qr aa rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 0</div><div class="line"></div><div class="line">;; QUESTION SECTION:</div><div class="line">;testing.dev.           IN  A</div><div class="line"></div><div class="line">;; ANSWER SECTION:</div><div class="line">testing.dev.        0   IN  A   127.0.0.1</div><div class="line"></div><div class="line">;; Query time: 1 msec</div><div class="line">;; SERVER: 127.0.0.1#53(127.0.0.1)</div><div class="line">;; WHEN: Sun Aug 27 22:39:50 2017</div><div class="line">;; MSG SIZE  rcvd: 45</div></pre></td></tr></table></figure><h2 id="安裝-PHP-FPM"><a href="#安裝-PHP-FPM" class="headerlink" title="安裝 PHP-FPM"></a>安裝 PHP-FPM</h2><h3 id="Install-php71"><a href="#Install-php71" class="headerlink" title="Install php71"></a>Install php71</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div></pre></td><td class="code"><pre><div class="line">$ brew tap homebrew/dupes &amp;&amp; \</div><div class="line">$ brew tap homebrew/php</div><div class="line"></div><div class="line">$ brew install php71</div><div class="line">==&gt; Installing php71 from homebrew/php</div><div class="line">==&gt; Downloading https://homebrew.bintray.com/bottles-php/php71-7.1.1_12.sierra.bottle.tar.gz</div><div class="line">######################################################################## 100.0%</div><div class="line">==&gt; Pouring php71-7.1.1_12.sierra.bottle.tar.gz</div><div class="line">==&gt; Caveats</div><div class="line">The php.ini file can be found in:</div><div class="line">    /usr/local/etc/php/7.1/php.ini</div><div class="line"></div><div class="line">✩✩✩✩ Extensions ✩✩✩✩</div><div class="line"></div><div class="line">If you are having issues with custom extension compiling, ensure that</div><div class="line">you are using the brew version, by placing /usr/local/bin before /usr/sbin in your PATH:</div><div class="line"></div><div class="line">      PATH=&quot;/usr/local/bin:$PATH&quot;</div><div class="line"></div><div class="line">PHP71 Extensions will always be compiled against this PHP. Please install them</div><div class="line">using --without-homebrew-php to enable compiling against system PHP.</div><div class="line"></div><div class="line">✩✩✩✩ PHP CLI ✩✩✩✩</div><div class="line"></div><div class="line">If you wish to swap the PHP you use on the command line, you should add the following to ~/.bashrc,</div><div class="line">~/.zshrc, ~/.profile or your shell&apos;s equivalent configuration file:</div><div class="line"></div><div class="line">      export PATH=&quot;$(brew --prefix homebrew/php/php71)/bin:$PATH&quot;</div><div class="line"></div><div class="line">✩✩✩✩ FPM ✩✩✩✩</div><div class="line"></div><div class="line">To launch php-fpm on startup:</div><div class="line">    mkdir -p ~/Library/LaunchAgents</div><div class="line">    cp /usr/local/opt/php71/homebrew.mxcl.php71.plist ~/Library/LaunchAgents/</div><div class="line">    launchctl load -w ~/Library/LaunchAgents/homebrew.mxcl.php71.plist</div><div class="line"></div><div class="line">The control script is located at /usr/local/opt/php71/sbin/php71-fpm</div><div class="line"></div><div class="line">OS X 10.8 and newer come with php-fpm pre-installed, to ensure you are using the brew version you need to make sure /usr/local/sbin is before /usr/sbin in your PATH:</div><div class="line"></div><div class="line">  PATH=&quot;/usr/local/sbin:$PATH&quot;</div><div class="line"></div><div class="line">You may also need to edit the plist to use the correct &quot;UserName&quot;.</div><div class="line"></div><div class="line">Please note that the plist was called &apos;homebrew-php.josegonzalez.php71.plist&apos; in old versions</div><div class="line">of this formula.</div><div class="line"></div><div class="line">With the release of macOS Sierra the Apache module is now not built by default. If you want to build it on your system</div><div class="line">you have to install php with the --with-httpd24 option. See  brew options php71  for more details.</div><div class="line"></div><div class="line">To have launchd start homebrew/php/php71 now and restart at login:</div><div class="line">  brew services start homebrew/php/php71</div><div class="line">==&gt; Summary</div><div class="line">🍺  /usr/local/Cellar/php71/7.1.1_12: 344 files, 39.7M</div></pre></td></tr></table></figure><h3 id="配置-Configure-1"><a href="#配置-Configure-1" class="headerlink" title="配置  Configure"></a>配置  Configure</h3><p>編輯檔案 <code>/usr/local/etc/php/7.1/php-fpm.d/www.conf</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">user = YOUR_USERNAME</div><div class="line">group = staff</div></pre></td></tr></table></figure></p><h3 id="測試-Testing-1"><a href="#測試-Testing-1" class="headerlink" title="測試  Testing"></a>測試  Testing</h3><p>啟動 php-fpm<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo brew services start php71</div></pre></td></tr></table></figure></p><p>Show running processes<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">lsof -Pni4 | grep LISTEN | grep php</div></pre></td></tr></table></figure></p><h2 id="安裝-NGINX"><a href="#安裝-NGINX" class="headerlink" title="安裝 NGINX"></a>安裝 NGINX</h2><h3 id="Install-NGINX"><a href="#Install-NGINX" class="headerlink" title="Install NGINX"></a>Install NGINX</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">$ brew tap homebrew/nginx</div><div class="line"></div><div class="line">$ brew install nginx</div><div class="line">==&gt; Downloading https://homebrew.bintray.com/bottles/nginx-1.12.1.sierra.bottle.tar.gz</div><div class="line">######################################################################## 100.0%</div><div class="line">==&gt; Pouring nginx-1.12.1.sierra.bottle.tar.gz</div><div class="line">==&gt; Caveats</div><div class="line">Docroot is: /usr/local/var/www</div><div class="line"></div><div class="line">The default port has been set in /usr/local/etc/nginx/nginx.conf to 8080 so that</div><div class="line">nginx can run without sudo.</div><div class="line"></div><div class="line">nginx will load all files in /usr/local/etc/nginx/servers/.</div><div class="line"></div><div class="line">To have launchd start nginx now and restart at login:</div><div class="line">  brew services start nginx</div><div class="line">Or, if you don&apos;t want/need a background service you can just run:</div><div class="line">  nginx</div><div class="line">==&gt; Summary</div><div class="line">🍺  /usr/local/Cellar/nginx/1.12.1: 23 files, 1MB</div></pre></td></tr></table></figure><h3 id="安裝測試-Testing"><a href="#安裝測試-Testing" class="headerlink" title="安裝測試  Testing"></a>安裝測試  Testing</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">## Start Nginx</div><div class="line">$ sudo brew services start nginx</div><div class="line"></div><div class="line">## Check if Nginx is running on default port</div><div class="line">$ curl -IL http://127.0.0.1:8080</div><div class="line">curl -IL http://127.0.0.1:8080</div><div class="line">HTTP/1.1 200 OK</div><div class="line">Server: nginx/1.12.1</div><div class="line">Date: Sun, 27 Aug 2017 14:59:30 GMT</div><div class="line">Content-Type: text/html</div><div class="line">Content-Length: 274</div><div class="line">Last-Modified: Sat, 26 Aug 2017 14:05:36 GMT</div><div class="line">Connection: keep-alive</div><div class="line">ETag: &quot;59a18030-112&quot;</div><div class="line">Accept-Ranges: bytes</div></pre></td></tr></table></figure><h3 id="Stop-Nginx"><a href="#Stop-Nginx" class="headerlink" title="Stop Nginx"></a>Stop Nginx</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo brew services stop nginx</div></pre></td></tr></table></figure><h3 id="配置-Configure-2"><a href="#配置-Configure-2" class="headerlink" title="配置  Configure"></a>配置  Configure</h3><h4 id="建立目錄-Create-directories"><a href="#建立目錄-Create-directories" class="headerlink" title="建立目錄  Create directories"></a>建立目錄  Create directories</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ mkdir -p /usr/local/etc/nginx/sites-available &amp;&amp; \</div><div class="line">$ mkdir -p /usr/local/etc/nginx/sites-enabled &amp;&amp; \</div><div class="line">$ mkdir -p /usr/local/etc/nginx/conf.d &amp;&amp; \</div><div class="line">$ mkdir -p /usr/local/etc/nginx/ssl</div></pre></td></tr></table></figure><h4 id="配置檔案-nginx-conf"><a href="#配置檔案-nginx-conf" class="headerlink" title="配置檔案 nginx.conf"></a>配置檔案 nginx.conf</h4><p>刪除預設檔案<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ rm /usr/local/etc/nginx/nginx.conf</div></pre></td></tr></table></figure></p><p>建立新檔 <code>$ vim /usr/local/etc/nginx/nginx.conf</code> 內容<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">worker_processes  1;</div><div class="line"></div><div class="line">error_log  /var/log/nginx/error.log;</div><div class="line"></div><div class="line">events &#123;</div><div class="line">    worker_connections  1024;</div><div class="line">&#125;</div><div class="line"></div><div class="line">http &#123;</div><div class="line">    include             mime.types;</div><div class="line">    default_type        application/octet-stream;</div><div class="line"></div><div class="line">    log_format  main  &apos;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &apos;</div><div class="line">                      &apos;$status $body_bytes_sent &quot;$http_referer&quot; &apos;</div><div class="line">                      &apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&apos;;</div><div class="line"></div><div class="line">    access_log  /var/log/nginx/access.log  main;</div><div class="line"></div><div class="line">    #sendfile            on;</div><div class="line">    sendfile            off;</div><div class="line"></div><div class="line">    #keepalive_timeout   65;</div><div class="line">    keepalive_timeout   1;</div><div class="line"></div><div class="line">    index index.html index.php;</div><div class="line"></div><div class="line">    include /usr/local/etc/nginx/sites-enabled/*;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><h3 id="啟動並測試-Nginx-Start-and-Test-Nginx"><a href="#啟動並測試-Nginx-Start-and-Test-Nginx" class="headerlink" title="啟動並測試 Nginx  Start and Test Nginx"></a>啟動並測試 Nginx  Start and Test Nginx</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">## Start Nginx</div><div class="line">$ sudo brew services start nginx</div><div class="line"></div><div class="line">## Check if Nginx is running on default port</div><div class="line">$ curl -IL http://localhost</div><div class="line">curl -IL http://localhost</div><div class="line">HTTP/1.1 200 OK</div><div class="line">Server: nginx/1.12.1</div><div class="line">Date: Sun, 27 Aug 2017 15:12:35 GMT</div><div class="line">Content-Type: text/html</div><div class="line">Content-Length: 274</div><div class="line">Last-Modified: Sat, 26 Aug 2017 14:05:36 GMT</div><div class="line">Connection: keep-alive</div><div class="line">ETag: &quot;59a18030-112&quot;</div><div class="line">Accept-Ranges: bytes</div></pre></td></tr></table></figure><h2 id="設定-SSL-Setup-SSL"><a href="#設定-SSL-Setup-SSL" class="headerlink" title="設定 SSL  Setup SSL"></a>設定 SSL  Setup SSL</h2><p>Generate 4096 bit RSA keys and the self-sign the certificates<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ openssl req -new -newkey rsa:4096 -days 365 -nodes -x509 -subj &quot;/C=US/ST=State/L=Town/O=Office/CN=localhost&quot; -keyout /usr/local/etc/nginx/ssl/localhost.key -out /usr/local/etc/nginx/ssl/localhost.crt</div></pre></td></tr></table></figure></p><p>RSA keys 存放在資料夾 <code>/usr/local/etc/nginx/ssl</code></p><h2 id="建立-Virtual-Hosts-網站檔案"><a href="#建立-Virtual-Hosts-網站檔案" class="headerlink" title="建立 Virtual Hosts 網站檔案"></a>建立 Virtual Hosts 網站檔案</h2><p>檔案 <code>/usr/local/etc/nginx/sites-available/default</code> 內容<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">server &#123;</div><div class="line">    listen       80;</div><div class="line">    server_name  localhost;</div><div class="line">    root       /YOUR/DOCUMENT/ROOT;</div><div class="line"></div><div class="line">    access_log  /var/log/default.access.log  main;</div><div class="line">    error_log  /var/log/nginx/default.error.log  debug;</div><div class="line"></div><div class="line">    location / &#123;</div><div class="line">        include   /usr/local/etc/nginx/conf.d/php-fpm;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    location = /info &#123;</div><div class="line">        allow   127.0.0.1;</div><div class="line">        deny    all;</div><div class="line">        rewrite (.*) /.info.php;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    error_page  404     /404.html;</div><div class="line">    error_page  403     /403.html;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>檔案 <code>/usr/local/etc/nginx/sites-available/default-ssl</code> 內容<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">server &#123;</div><div class="line">    listen       443;</div><div class="line">    server_name  localhost;</div><div class="line">    root       /YOUR/DOCUMENT/ROOT;</div><div class="line"></div><div class="line">    access_log  /var/log/nginx/default-ssl.access.log  main;</div><div class="line">    error_log  /var/log/nginx/default-ssl.error.log  debug;</div><div class="line"></div><div class="line">    ssl                  on;</div><div class="line">    ssl_certificate      ssl/localhost.crt;</div><div class="line">    ssl_certificate_key  ssl/localhost.key;</div><div class="line"></div><div class="line">    ssl_session_timeout  5m;</div><div class="line"></div><div class="line">    ssl_protocols  SSLv2 SSLv3 TLSv1;</div><div class="line">    ssl_ciphers  HIGH:!aNULL:!MD5;</div><div class="line">    ssl_prefer_server_ciphers   on;</div><div class="line"></div><div class="line">    location / &#123;</div><div class="line">        include   /usr/local/etc/nginx/conf.d/php-fpm;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    location = /info &#123;</div><div class="line">        allow   127.0.0.1;</div><div class="line">        deny    all;</div><div class="line">        rewrite (.*) /.info.php;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    error_page  404     /404.html;</div><div class="line">    error_page  403     /403.html;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>檔案 <code>/usr/local/etc/nginx/conf.d/php-fpm</code> 內容<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">location ~ \.php$ &#123;</div><div class="line">    try_files      $uri = 404;</div><div class="line">    fastcgi_pass   127.0.0.1:9000;</div><div class="line">    fastcgi_index  index.php;</div><div class="line">    fastcgi_param  SCRIPT_FILENAME $document_root$fastcgi_script_name;</div><div class="line">    include        fastcgi_params;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><h3 id="Activate-Virtual-Hosts"><a href="#Activate-Virtual-Hosts" class="headerlink" title="Activate Virtual Hosts"></a>Activate Virtual Hosts</h3><p>在 <code>sites-enabled</code> 目錄下建立 Symbolic link。將要 enable 的 virtal host 指向 <code>sites-available</code> 目錄內的 virtal host config file。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ ln -sfv /usr/local/etc/nginx/sites-available/default /usr/local/etc/nginx/sites-enabled/default</div><div class="line">$ ln -sfv /usr/local/etc/nginx/sites-available/default-ssl /usr/local/etc/nginx/sites-enabled/default-ssl</div></pre></td></tr></table></figure></p><h3 id="測試-Testing-2"><a href="#測試-Testing-2" class="headerlink" title="測試 Testing"></a>測試 Testing</h3><p>建立 <code>/YOUR/DOCUMENT/ROOT/info.php</code> 內容<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;?php</div><div class="line">phpinfo();</div><div class="line">?&gt;</div></pre></td></tr></table></figure></p><p>重新啟動 Nginx 並測試<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">$ sudo brew services restart nginx</div><div class="line"></div><div class="line">$ curl -IL http://localhost/info.php</div><div class="line">curl -IL http://localhost/info.php</div><div class="line">HTTP/1.1 200 OK</div><div class="line">Server: nginx/1.12.1</div><div class="line">Date: Sun, 27 Aug 2017 15:24:46 GMT</div><div class="line">Content-Type: text/html; charset=UTF-8</div><div class="line">Connection: keep-alive</div><div class="line">X-Powered-By: PHP/7.1.8</div></pre></td></tr></table></figure></p><h2 id="安裝其他-Libraries"><a href="#安裝其他-Libraries" class="headerlink" title="安裝其他 Libraries"></a>安裝其他 Libraries</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ brew install php71-mcrypt php71-imagick</div></pre></td></tr></table></figure><p><code>brew info</code> 查看 PHP 及其相關 Libraries 的資訊<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div></pre></td><td class="code"><pre><div class="line">$ brew info php71</div><div class="line">homebrew/php/php71: stable 7.1.8 (bottled), HEAD</div><div class="line">PHP Version 7.1</div><div class="line">https://php.net</div><div class="line">Conflicts with:</div><div class="line">  php53 (because different php versions install the same binaries.)</div><div class="line">  php54 (because different php versions install the same binaries.)</div><div class="line">  php55 (because different php versions install the same binaries.)</div><div class="line">  php56 (because different php versions install the same binaries.)</div><div class="line">  php70 (because different php versions install the same binaries.)</div><div class="line">  php72 (because different php versions install the same binaries.)</div><div class="line">/usr/local/Cellar/php71/7.1.8_20 (349 files, 39.5MB) *</div><div class="line">  Poured from bottle on 2017-08-26 at 16:34:27</div><div class="line">From: https://github.com/Homebrew/homebrew-php/blob/master/Formula/php71.rb</div><div class="line">==&gt; Dependencies</div><div class="line">Required: freetype ✔, gettext ✔, icu4c ✔, jpeg ✔, libpng ✔, libxml2 ✔, unixodbc ✔, readline ✔, openssl ✔</div><div class="line">Optional: enchant ✘, gmp ✘, webp ✘, homebrew/apache/httpd24 ✔, homebrew/apache/httpd22 ✘</div><div class="line">==&gt; Requirements</div><div class="line">Optional: postgresql ✘</div><div class="line">==&gt; Options</div><div class="line">--with-cgi</div><div class="line">Enable building of the CGI executable (implies --without-fpm)</div><div class="line">--with-debug</div><div class="line">Compile with debugging symbols</div><div class="line">--with-enchant</div><div class="line">Build with enchant support</div><div class="line">--with-gmp</div><div class="line">Build with gmp support</div><div class="line">--with-homebrew-curl</div><div class="line">Include Curl support via Homebrew</div><div class="line">--with-homebrew-libressl</div><div class="line">Include LibreSSL instead of OpenSSL via Homebrew</div><div class="line">--with-homebrew-libxml2</div><div class="line">Include Libxml2 support via Homebrew</div><div class="line">--with-homebrew-libxslt</div><div class="line">Include LibXSLT support via Homebrew</div><div class="line">--with-httpd22</div><div class="line">Enable building of shared Apache 2.2 Handler module</div><div class="line">--with-httpd24</div><div class="line">Enable building of shared Apache 2.4 Handler module</div><div class="line">--with-imap</div><div class="line">Include IMAP extension</div><div class="line">--with-libmysql</div><div class="line">Include (old-style) libmysql support instead of mysqlnd</div><div class="line">--with-mssql</div><div class="line">Include MSSQL-DB support</div><div class="line">--with-pdo-oci</div><div class="line">Include Oracle databases (requries ORACLE_HOME be set)</div><div class="line">--with-pear</div><div class="line">Build with PEAR</div><div class="line">--with-phpdbg</div><div class="line">Enable building of the phpdbg SAPI executable</div><div class="line">--with-postgresql</div><div class="line">Build with postgresql support</div><div class="line">--with-thread-safety</div><div class="line">Build with thread safety</div><div class="line">--with-webp</div><div class="line">Build with webp support</div><div class="line">--without-bz2</div><div class="line">Build without bz2 support</div><div class="line">--without-fpm</div><div class="line">Disable building of the fpm SAPI executable</div><div class="line">--without-ldap</div><div class="line">Build without LDAP support</div><div class="line">--without-legacy-mysql</div><div class="line">Do not include the deprecated mysql_ functions</div><div class="line">--without-mysql</div><div class="line">Remove MySQL/MariaDB support</div><div class="line">--without-pcntl</div><div class="line">Build without Process Control support</div><div class="line">--without-unixodbc</div><div class="line">Build without unixODBC support</div><div class="line">--HEAD</div><div class="line">Install HEAD version</div><div class="line">==&gt; Caveats</div><div class="line">The php.ini file can be found in:</div><div class="line">    /usr/local/etc/php/7.1/php.ini</div><div class="line"></div><div class="line">✩✩✩✩ Extensions ✩✩✩✩</div><div class="line"></div><div class="line">If you are having issues with custom extension compiling, ensure that you are using the brew version, by placing /usr/local/bin before /usr/sbin in your PATH:</div><div class="line"></div><div class="line">      PATH=&quot;/usr/local/bin:$PATH&quot;</div><div class="line"></div><div class="line">PHP71 Extensions will always be compiled against this PHP. Please install them using --without-homebrew-php to enable compiling against system PHP.</div><div class="line"></div><div class="line">✩✩✩✩ PHP CLI ✩✩✩✩</div><div class="line"></div><div class="line">If you wish to swap the PHP you use on the command line, you should add the following to ~/.bashrc, ~/.zshrc, ~/.profile or your shell&apos;s equivalent configuration file:</div><div class="line">  export PATH=&quot;$(brew --prefix homebrew/php/php71)/bin:$PATH&quot;</div><div class="line"></div><div class="line">✩✩✩✩ FPM ✩✩✩✩</div><div class="line"></div><div class="line">To launch php-fpm on startup:</div><div class="line">    mkdir -p ~/Library/LaunchAgents</div><div class="line">    cp /usr/local/opt/php71/homebrew.mxcl.php71.plist ~/Library/LaunchAgents/</div><div class="line">    launchctl load -w ~/Library/LaunchAgents/homebrew.mxcl.php71.plist</div><div class="line"></div><div class="line">The control script is located at /usr/local/opt/php71/sbin/php71-fpm</div><div class="line"></div><div class="line">OS X 10.8 and newer come with php-fpm pre-installed, to ensure you are using the brew version you need to make sure /usr/local/sbin is before /usr/sbin in your PATH:</div><div class="line"></div><div class="line">  PATH=&quot;/usr/local/sbin:$PATH&quot;</div><div class="line"></div><div class="line">You may also need to edit the plist to use the correct &quot;UserName&quot;.</div><div class="line"></div><div class="line">Please note that the plist was called &apos;homebrew-php.josegonzalez.php71.plist&apos; in old versions of this formula.</div><div class="line"></div><div class="line">With the release of macOS Sierra the Apache module is now not built by default. If you want to build it on your system you have to install php with the --with-httpd24 option. See  brew options php71 for more details.</div><div class="line"></div><div class="line">To have launchd start homebrew/php/php71 now and restart at login:</div><div class="line">  brew services start homebrew/php/php71</div></pre></td></tr></table></figure></p><hr><h2 id="後記-Epilogue"><a href="#後記-Epilogue" class="headerlink" title="後記 Epilogue"></a>後記 Epilogue</h2><p>如果 <code>$ curl -IL http://127.0.0.1:8080</code> 出現 <code>curl: (7) Failed to connect to 127.0.0.1 port 8080: Connection refused</code>，請記得檢查</p><ol><li>php-fpm 是不是啟動</li><li>nginx 是否有 restart</li><li><code>/usr/loca/etc/php/7.1/php-fpm.d/www.conf</code> 內 <code>user</code> 及 <code>group</code> 是否正確設定</li><li><code>/usr/local/etc/nginx/conf.d/php-fpm</code> 檔案是否建立</li></ol><hr><h2 id="參考資料-References"><a href="#參考資料-References" class="headerlink" title="參考資料  References"></a>參考資料  References</h2><ul><li><a href="https://gist.github.com/dtomasi/ab76d14338db82ec24a1fc137caff75b" target="_blank" rel="external">Install NGINX with PHP7-FPM on Mac OS X with Homebrew</a></li><li><a href="https://gist.github.com/pixeline/51c43c787f51b018d484597f30be3d2b" target="_blank" rel="external">pixeline/php_upgrade_to_71.sh</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;在 macOX Sierra 透過 &lt;code&gt;brew&lt;/code&gt; 指令安裝 &lt;code&gt;php71&lt;/code&gt;（帶有 &lt;code&gt;php-fpm&lt;/code&gt;）及 &lt;code&gt;nginx&lt;/code&gt;。&lt;br&gt;Install NGINX with PHP71 on Mac OS Sierra with Homebrew.&lt;/p&gt;
    
    </summary>
    
      <category term="lemp" scheme="http://codefun.tw/categories/lemp/"/>
    
    
      <category term="nginx" scheme="http://codefun.tw/tags/nginx/"/>
    
      <category term="php71" scheme="http://codefun.tw/tags/php71/"/>
    
      <category term="php-fpm" scheme="http://codefun.tw/tags/php-fpm/"/>
    
  </entry>
  
  <entry>
    <title>使用 wget 砍站</title>
    <link href="http://codefun.tw/2017/08/18/2017081804-wget-download-web-pages/"/>
    <id>http://codefun.tw/2017/08/18/2017081804-wget-download-web-pages/</id>
    <published>2017-08-18T06:48:57.000Z</published>
    <updated>2017-10-23T03:25:11.000Z</updated>
    
    <content type="html"><![CDATA[<p>wget 是 linux 中除了 curl 外另一個檔案下載的好用工具，也可以使用它來“砍站”。<br>但是無法正確抓去使用 <code>vue-router</code> 等 js 撰寫的動態呈現網頁的內容。</p><a id="more"></a><p>用法</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ wget -m -k -E -p -F --restrict-file-names=windows -nH --header=&quot;Accept: text/html&quot; --user-agent=&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10.8; rv:21.0) Gecko/20100101 Firefox/21.0&quot; 127.0.0.1</div></pre></td></tr></table></figure><p>指令說明</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">-m,  --mirror                相等於 -N -r -l inf --no-remove-listing 選項</div><div class="line">-k,  --convert-links         將原本網站內所有站內的連結全都改為 Local 連結，這樣下載網站後才可以離線使用。</div><div class="line">-E,  --adjust-extension      save HTML/CSS documents with proper extensions.</div><div class="line">-p,  --page-requisites       下載所有顯示網頁所需的檔案，例如圖片等</div><div class="line">-F,  --force-html            以 HTML 方式處理輸入檔</div><div class="line">-N,  --timestamping          除非遠端檔案比較新，否則不下載遠端檔案</div><div class="line">-r,  --recursive             遞迴下載</div><div class="line">-l,  --level=數字             最大搜尋深度 (inf 或 0 表示無限)</div><div class="line">--no-remove-listing          不刪除 ‘.listing’ 檔案</div><div class="line">--restrict-file-names=OS     只使用作業系統能夠接受的字元作為檔案字元</div><div class="line">-nH, --no-host-directories   不建立含有遠端主機名稱的目錄</div><div class="line">--header=字串                 在連線資料標頭中加入指定字串</div><div class="line">-U,  --user-agent=AGENT      宣稱為 AGENT 而不是 Wget/VERSION</div></pre></td></tr></table></figure><hr><h2 id="參考資料"><a href="#參考資料" class="headerlink" title="參考資料"></a>參考資料</h2><ul><li><a href="https://www.gnu.org/software/wget/manual/wget.html" target="_blank" rel="external">GNU Wget 1.18 Manual</a></li><li><a href="https://john24318.wordpress.com/2013/08/18/wget-%E6%8C%87%E4%BB%A4%E7%94%A8%E6%B3%95%E8%88%87%E6%95%99%E5%AD%B8/" target="_blank" rel="external">wget 指令用法與教學</a></li><li><a href="https://www.lifewire.com/uses-of-command-wget-2201085" target="_blank" rel="external">How to Use the wget Linux Command to Download Web Pages and Files</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;wget 是 linux 中除了 curl 外另一個檔案下載的好用工具，也可以使用它來“砍站”。&lt;br&gt;但是無法正確抓去使用 &lt;code&gt;vue-router&lt;/code&gt; 等 js 撰寫的動態呈現網頁的內容。&lt;/p&gt;
    
    </summary>
    
      <category term="linux" scheme="http://codefun.tw/categories/linux/"/>
    
    
      <category term="wget" scheme="http://codefun.tw/tags/wget/"/>
    
  </entry>
  
  <entry>
    <title>開發廣告系統（DSP）不能不知道的關鍵字！</title>
    <link href="http://codefun.tw/2017/08/18/2017081803-cpc-cpa-ad-keywords/"/>
    <id>http://codefun.tw/2017/08/18/2017081803-cpc-cpa-ad-keywords/</id>
    <published>2017-08-18T04:20:55.000Z</published>
    <updated>2017-08-18T06:11:17.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="關鍵字"><a href="#關鍵字" class="headerlink" title="關鍵字"></a>關鍵字</h2><ul><li>DSP: Demand Side Platform 網路廣告中的需求方平台，可以讓廣告主進行跨媒體的自動化廣告投放。J: 買廣告版位</li><li>SSP: Supply Side Platform 是網路媒體中的供應方平台。SSP 平台幫助網路媒體託管其廣告位和廣告交易，與網路交易平台對接，從而將他們的流量變現。J: 賣廣告版位</li><li>DMP: Data-Management Platform 是專門為廣告主、媒體等開發的廣告數據管理平台，主要分析、儲存用戶行為數據，並管理相關資料，為廣告主提供精準的用戶行為分析。</li></ul><a id="more"></a><ul><li>RTB: Real Time Billing</li><li>CPC: Cost Per Click 每次點擊計價</li><li>CPM: Cost Per Mille，或者Cost Per Thousand;Cost Per Impressions，每千次展示計價</li><li>CPA: Cost Per Action 以實際行動效果來計算成本</li><li>CPS: Cost Per Sales 每次有效銷售定價</li><li>CPV: Cost Per View 每次觀看成本</li><li>AD Exchange: 網路廣告交易平台，功能就是聯繫廣告的賣方（媒體、網站主）和買方（廣告主）。Ad Exchange 平台交易的公司包括有 Yahoo、Google、The Rubicon Project、OpenX、AppNexus 等</li><li>AD Network: 聯播網</li><li>ROI: Return On Investment 每投資一塊錢所得到回饋的百分比</li><li>ROAS: Return On AD Spending 廣告沒投入一塊錢可獲得的營收</li></ul><hr><h2 id="DSP-優點"><a href="#DSP-優點" class="headerlink" title="DSP 優點"></a>DSP 優點</h2><ul><li>精確的受眾定向</li><li>簡單好用的使用者界面</li><li>強大的 RTB 技術</li><li>購買流程更快更簡單</li><li>整合多種服務，持續精進一站化</li><li>實現跨平台統一管理</li></ul><hr><h2 id="參考文章"><a href="#參考文章" class="headerlink" title="參考文章"></a>參考文章</h2><ul><li><a href="https://goo.gl/BFs31A" target="_blank" rel="external">關於RTB, DSP, DMP的一些小事及簡單認知</a></li><li><a href="https://www.bnext.com.tw/ext_rss/view/id/651447" target="_blank" rel="external">行銷人必知！ DSP廣告平台迷思求解7大守則</a></li><li><a href="https://www.inside.com.tw/2016/07/01/what-is-dsp-ssp-dmp" target="_blank" rel="external">【硬塞科技字典】什麼是 DSP 需求方平台/ SSP 供應方平台/ DMP 數據管理平台？</a></li><li><a href="https://www.inside.com.tw/2016/07/01/what-is-ad-exchange" target="_blank" rel="external">【硬塞科技字典】什麼是 Ad Exchange？</a></li><li><a href="https://www.inside.com.tw/2014/05/30/every-local-advertiser-needs-rtb" target="_blank" rel="external">什麼是 RTB 實時競價廣告？他將是未來趨勢！</a></li><li><a href="https://goo.gl/eG52L7" target="_blank" rel="external">常見的網路廣告平台運作原理淺析</a></li><li><a href="https://goo.gl/FwuOx8" target="_blank" rel="external">APP廣告、網路媒體常說到所謂的CPM、CPC、CPA、CPI到底是甚麼意思?</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;關鍵字&quot;&gt;&lt;a href=&quot;#關鍵字&quot; class=&quot;headerlink&quot; title=&quot;關鍵字&quot;&gt;&lt;/a&gt;關鍵字&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;DSP: Demand Side Platform 網路廣告中的需求方平台，可以讓廣告主進行跨媒體的自動化廣告投放。J: 買廣告版位&lt;/li&gt;
&lt;li&gt;SSP: Supply Side Platform 是網路媒體中的供應方平台。SSP 平台幫助網路媒體託管其廣告位和廣告交易，與網路交易平台對接，從而將他們的流量變現。J: 賣廣告版位&lt;/li&gt;
&lt;li&gt;DMP: Data-Management Platform 是專門為廣告主、媒體等開發的廣告數據管理平台，主要分析、儲存用戶行為數據，並管理相關資料，為廣告主提供精準的用戶行為分析。&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="marketing" scheme="http://codefun.tw/categories/marketing/"/>
    
    
      <category term="marketing" scheme="http://codefun.tw/tags/marketing/"/>
    
      <category term="ad keyword" scheme="http://codefun.tw/tags/ad-keyword/"/>
    
  </entry>
  
  <entry>
    <title>如何使用 Google Hangouts 進行遠端多人會議</title>
    <link href="http://codefun.tw/2017/08/18/2017081802-google-hangouts-multi-person-meeting/"/>
    <id>http://codefun.tw/2017/08/18/2017081802-google-hangouts-multi-person-meeting/</id>
    <published>2017-08-18T03:11:20.000Z</published>
    <updated>2017-10-23T03:26:14.000Z</updated>
    
    <content type="html"><![CDATA[<ol><li><p>開啟 Google Chrome 瀏覽器並且登入 Google 帳號，然後在網址列搜尋 <code>Google Hangouts</code> 或直接開啟連結 <a href="https://hangouts.google.com/?hl=zh-TW" target="_blank" rel="external">https://hangouts.google.com/?hl=zh-TW</a> 。</p><a id="more"></a><p><img src="https://lh3.googleusercontent.com/HvfYRZAccPR9UUKnDHlRd1zZWqIPwi2R_rsLdtdT0B9qaGRhnPWgmQqhv-h-shh4H4mrD9eJ4b_QWK-JrpnPfVxGqQGyySQnmNM3i0_I6Wj8_n9RIyA63IN-q1kW3wXMeaX8Zx034g=w816-h569-no" alt="Google Search &quot;google hangouts&quot;"></p></li><li><p>進入 <a href="https://hangouts.google.com/?hl=zh-TW" target="_blank" rel="external">https://hangouts.google.com/?hl=zh-TW</a> 頁面後點擊 <code>視訊通話</code>。<br><img src="https://lh3.googleusercontent.com/AlFUgzsOF6r7JUqpzjdfq5D1af5WpFffSDOuWE94uCZQjUDvay_gIb7Ab_01fsDXcuyLeiT7IT-Iohm0bFuN5rilRxYpbxvzKEm9jCXHsb9g8Qldxfc022gsid-IXbTBpyb-Fg285g=w1015-h598-no" alt="開啟視訊通話"></p></li><li><p>同意 Google Hangouts 取用攝影機及麥克風的權限，即可正式開啟會議。<br><img src="https://lh3.googleusercontent.com/komj3VnPhw7yi-KjjhBGMzh_FWEjp_rHLrB-fuF1cD2thBBGST1xnm0K_HwKmLAzsIqCS66qkK9D6oiM-QpggSjEmR0IppLB6NqsjcnpDXMK61iOx7OQ-6ob0Cev-AFrCX-Icc-b4A=w1026-h717-no" alt="同意取用攝影機及麥克風"></p></li><li><p>邀請進入會議的方式有二，一是透過 email 邀請，二是分享連結。<br><img src="https://lh3.googleusercontent.com/7funsf3-O_S6Pn7PDDOy8ufZfE4yLcnFdYshes6aVDhyyTzwMdA-F6JHoG4agLqYxWIwVVMx_IrhZXerDaFkWGac-sPETDDnxktLK8zuRZKziQfLJLtzvlIPlejRiaehZNs2zmt--w=w1097-h802-no" alt="邀請進入會議的方式"></p></li><li><p>要分享報告的內容給其他人時，可以點擊右上角。<br><img src="https://lh3.googleusercontent.com/2dApM7z6B2B4J5OUJmLsqeV0aDH4DgVAAleQJHWxga_6LaF_Cd_gK5o_TR3cgQfPwSK0Va6eS_AS_G88Pi7AW5_9eMiGBBAhniwnv3KG8KqANnZoXa_BaxnJ_Kz0Mx1WsmRB4AMbQA=w933-h705-no" alt="開啟螢幕分享"></p></li><li><p>然後點擊 <code>分享螢幕畫面</code><br><img src="https://lh3.googleusercontent.com/aj9yUUt70f5zdQ5X-InP-J_CJTD2SDb8EkTYU9B-6jf-Io7rsxAyZp1BzmPDvMO3VIykYCJ-rUxZQ7LLltmNkVtcXDJYy-84wgdFusiNJsvNt60fVrV_zJ4INBpZseRjxRtudYPvTQ=w1097-h802-no" alt="分享螢幕畫面"></p></li><li><p>再選擇要分享螢幕（Your Entire Screen）還是應用程式（Application Window）。<br><img src="https://lh3.googleusercontent.com/4l7x9qHKu-th4PQqFmaxzIB2Ri5tqYaIJNB0s_Ku3FgrhQcC43ch7E7JlMhT2AihQ3GY4bfYmem1zi3sqZeK1n0zFtxqZjvEsRN2cIN0MRQtM1xGQbQ0z4l6npF64mfzrIm4Dos12A=w617-h523-no" alt="分享整個螢幕畫面"><br><img src="https://lh3.googleusercontent.com/9EmKhj4VscJAmj9nL3GUGgOiYqoPs8iKlpEkzCH5gPECBEuvz9TSrvUlTamRs3u5Z4zza9UqLJMT0D6mgQxwcToRTdfin2pL6d2zdxnPKonmVIBQg_pNnaiHEvzWcoC7UJEDk51-XQ=w619-h523-no" alt="分享應用程式"></p></li><li><p>再點擊 <code>Share</code>，此時你的 Google Hangouts 畫面就會是要分享的內容。</p></li><li>要看其他人分享的螢幕，點擊主視窗下方的其他人的小視窗就可以進行切換。<br><img src="https://lh3.googleusercontent.com/sedtAm7wrJNBXCEaVVhg5PBIinaNEtYXNzzZL4rYf39v2-p6d3hDeYFzoXZk6s5ZOpGs_5I0R9LVDkQrBkXp_e59ZF6D6cWxqQuF-Bpp9xFV7r-AJPGdhKp73NeNy58SlMdXHy52ag=w1182-h673-no" alt="切換到他人分享的螢幕"></li></ol><p>以上截圖內容是在 MAC OS 下操作的畫面，其他 OS 可能會有出入。</p>]]></content>
    
    <summary type="html">
    
      &lt;ol&gt;
&lt;li&gt;&lt;p&gt;開啟 Google Chrome 瀏覽器並且登入 Google 帳號，然後在網址列搜尋 &lt;code&gt;Google Hangouts&lt;/code&gt; 或直接開啟連結 &lt;a href=&quot;https://hangouts.google.com/?hl=zh-TW&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://hangouts.google.com/?hl=zh-TW&lt;/a&gt; 。&lt;/p&gt;
    
    </summary>
    
      <category term="notes" scheme="http://codefun.tw/categories/notes/"/>
    
    
      <category term="IM" scheme="http://codefun.tw/tags/IM/"/>
    
      <category term="Google Hangouts" scheme="http://codefun.tw/tags/Google-Hangouts/"/>
    
  </entry>
  
  <entry>
    <title>Hexo 安裝筆記</title>
    <link href="http://codefun.tw/2017/08/18/2017081801-hexo-install-notes/"/>
    <id>http://codefun.tw/2017/08/18/2017081801-hexo-install-notes/</id>
    <published>2017-08-18T02:51:11.000Z</published>
    <updated>2017-10-23T04:04:11.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Install-Hexo"><a href="#Install-Hexo" class="headerlink" title="Install Hexo"></a>Install Hexo</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install -g hexo-cli</div></pre></td></tr></table></figure><a id="more"></a><h2 id="Repository"><a href="#Repository" class="headerlink" title="Repository"></a>Repository</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git clone https://github.com/GITPAGEUSERNAME/GITPAGEUSERNAME.github.io.git .deploy/GITPAGEUSERNAME.github.io</div></pre></td></tr></table></figure><h2 id="Shell-Script"><a href="#Shell-Script" class="headerlink" title="Shell Script"></a>Shell Script</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line">hexo generate</div><div class="line">cp -R public/* .deploy/codefuntw.github.io</div><div class="line">cd .deploy/codefuntw.github.io</div><div class="line">git add .</div><div class="line">git commit -m “update”</div><div class="line">git push origin master</div></pre></td></tr></table></figure><h2 id="Custom-Domain-Setting-Reference"><a href="#Custom-Domain-Setting-Reference" class="headerlink" title="Custom Domain Setting Reference"></a>Custom Domain Setting Reference</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">https://help.github.com/articles/setting-up-an-apex-domain/</div><div class="line">https://help.github.com/articles/setting-up-an-apex-domain/#configuring-a-records-with-your-dns-provider</div><div class="line">https://help.github.com/articles/adding-or-removing-a-custom-domain-for-your-github-pages-site/</div></pre></td></tr></table></figure><h3 id="Custom-Domain-對應到-GitHub-page"><a href="#Custom-Domain-對應到-GitHub-page" class="headerlink" title="Custom Domain 對應到 GitHub page"></a>Custom Domain 對應到 GitHub page</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">$ dig blog.codefun.tw +nostats +nocomments +nocmd</div><div class="line"></div><div class="line">; &lt;&lt;&gt;&gt; DiG 9.8.3-P1 &lt;&lt;&gt;&gt; blog.codefun.tw +nostats +nocomments +nocmd</div><div class="line">;; global options: +cmd</div><div class="line">;blog.codefun.tw.       IN  A</div><div class="line">blog.codefun.tw.    3599    IN  CNAME   GITPAGEUSERNAME.github.io.</div><div class="line">GITPAGEUSERNAME.github.io.  3599    IN  CNAME   github.map.fastly.net.</div><div class="line">github.map.fastly.net.  2865    IN  CNAME   prod.github.map.fastlylb.net.</div><div class="line">prod.github.map.fastlylb.net. 13 IN A   151.101.100.133</div></pre></td></tr></table></figure><h2 id="Command"><a href="#Command" class="headerlink" title="Command"></a>Command</h2><h3 id="常用基本指令"><a href="#常用基本指令" class="headerlink" title="常用基本指令"></a>常用基本指令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$ hexo g  # 或者 hexo generate</div><div class="line">$ hexo s  # 或者 hexo server，可以在 http://localhost:4000/ 查看</div><div class="line">$ hexo deploy (hexo d)  # 部署到遠端</div><div class="line">$ hexo new &quot;postName&quot;  # 新建文章</div><div class="line">$ hexo new page &quot;pageName&quot;  # 新建頁面</div></pre></td></tr></table></figure><h3 id="常用簡寫"><a href="#常用簡寫" class="headerlink" title="常用簡寫"></a>常用簡寫</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ hexo n == hexo new</div><div class="line">$ hexo g == hexo generate</div><div class="line">$ hexo s == hexo server</div><div class="line">$ hexo d == hexo deploy</div></pre></td></tr></table></figure><h3 id="常用組合"><a href="#常用組合" class="headerlink" title="常用組合"></a>常用組合</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ hexo d -g  # 生成部署</div><div class="line">$ hexo s -g  # 生成預覽</div></pre></td></tr></table></figure><hr><h2 id="Plugins"><a href="#Plugins" class="headerlink" title="Plugins"></a>Plugins</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ npm install hexo-generator-feed</div><div class="line">$ npm install hexo-generator-sitemap</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Install-Hexo&quot;&gt;&lt;a href=&quot;#Install-Hexo&quot; class=&quot;headerlink&quot; title=&quot;Install Hexo&quot;&gt;&lt;/a&gt;Install Hexo&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;$ npm install -g hexo-cli&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="blog" scheme="http://codefun.tw/categories/blog/"/>
    
    
      <category term="blog" scheme="http://codefun.tw/tags/blog/"/>
    
      <category term="hexo" scheme="http://codefun.tw/tags/hexo/"/>
    
  </entry>
  
  <entry>
    <title>在本地端使用 Nodejs &amp; Ngrok 進行 Line Bot 開發測試</title>
    <link href="http://codefun.tw/2017/06/02/20170602-nodejs-line-bot-p1/"/>
    <id>http://codefun.tw/2017/06/02/20170602-nodejs-line-bot-p1/</id>
    <published>2017-06-02T07:07:27.000Z</published>
    <updated>2017-06-03T16:59:45.000Z</updated>
    
    <content type="html"><![CDATA[<p>Chat Bot 正夯，剛好公司的專案有 Line Bot 的應用，所以參考了 <a href="https://goo.gl/ePtTRw" target="_blank" rel="external">不必真的架站也能 5 分鐘實機體驗 LINE bot – 教學 ( by node.js &amp; ngrok )</a>、<a href="http://www.oxxostudio.tw/articles/201701/line-bot.html" target="_blank" rel="external">LINE BOT 實戰 ( 原理篇 )</a>、<a href="http://www.oxxostudio.tw/articles/201701/line-bot-2.html" target="_blank" rel="external">LINE BOT 實戰 ( 聊天篇 )</a> 等文章來進行 Nodejs 的 Line bot 開發實作練習。</p><a id="more"></a><h2 id="開發環境"><a href="#開發環境" class="headerlink" title="開發環境"></a>開發環境</h2><ul><li>macOS Sierra： 10.12.5</li><li>Nodejs： 7.10.0</li><li>Packages：<ul><li><a href="https://www.npmjs.com/package/express" target="_blank" rel="external">express</a></li><li><a href="https://www.npmjs.com/package/linebot" target="_blank" rel="external">linebot</a></li></ul></li><li>Github： <a href="https://github.com/jerry771230/node-line-bot-practice" target="_blank" rel="external">https://github.com/jerry771230/node-line-bot-practice</a></li></ul><h2 id="本次實作有以下階段："><a href="#本次實作有以下階段：" class="headerlink" title="本次實作有以下階段："></a>本次實作有以下階段：</h2><ul><li><a href="#linebotaccount">申請 Line Bot 帳號</a></li><li><a href="#usingngrok">ngrok 讓 localhost 也可以使用 HTTPS</a></li><li><a href="#webhookservice">使用 Nodejs 在本地端部署 webhook service</a></li><li><a href="#sendlinebot">使用 Line App 傳訊息給 Line Bot</a></li></ul><h2 id="申請-Line-Bot-帳號"><a href="#申請-Line-Bot-帳號" class="headerlink" title="申請 Line Bot 帳號"></a><a id="linebotaccount"></a>申請 Line Bot 帳號</h2><ol><li><p>到 <a href="https://business.line.me/zh-hant" target="_blank" rel="external">LINE Business Center</a> 申請商用帳號。點擊「帳號清單」，再點擊「建立商用帳號」<br><img src="https://lh3.googleusercontent.com/maPhifD7BVwbpWvElCZzWdhXqULQfbGYofmqazlAE8S0ArKXVb5kWk2r8JmAb-CBZvpH2WuQ_NubG63u-5rW0GYIpBE4-7ryoDbXmJn-YwnZWn9x2xaAuhm-0M0FsLEyBfoe=w715-h409-no" alt="申請商用帳戶"></p></li><li><p>找到 Messageing API，點擊「開始使用Developer Trial」<br><img src="https://lh3.googleusercontent.com/2s8QshZMPK-b4hRv3fkYZGzP0Pw_7iKf9vMnpOOyv6G6J0jtDrSrFm4NSdoGdxEC8khRDLpzsDsUKZDQ4UWQyx4JPvWYcPFh7-HRiy_g12Q5ON861Aj8oWStncau_0ZubOl5=w1022-h480-no" alt="開始使用Developer Trial"></p></li><li><p>輸入 Bot 的帳號名稱，更換圖片以及選擇業種，再按下確定就會建立機器人專用帳號<br><img src="https://lh3.googleusercontent.com/eKQOGxTfs3hb3rgwyQIQ9qnLWkI7pcWyHt9BOBmXEiDEOON6upYlcJMM50vahJvA03M5WKT_V5o_x-CZ68ttR8EMGh1RJSE-Hk6eMYFwpMQHlw6dCVXBBm4whOwCohEFXw4DyQ=w481-h639-no" alt="建立機器人專用帳號"></p></li><li><p>在申請完成的頁面下方點擊「前往LINE@MANAGER」<br><img src="https://lh3.googleusercontent.com/YH-sM08j0AJpFLwzbU00WMYXlnskuQBaiq7qhwXZ0LT5qFeBx6re1L8CXsMT1pLUj3K3dxb0SHEMJXbMe5h--YlYOBe0-P2G5oL94srLxVCl-KRz4GUnE5ls2hIW4F0AdHlHPw=w529-h639-no" alt=""></p></li><li><p>開始使用 API。進入 LINE@ MANAGER 後，在左邊選單 「Settings」-&gt; 點擊「Bot Settings」-&gt; 再按下「Enable API」<br><img src="https://lh3.googleusercontent.com/g0NzW_h7LR7bAlgPEwkdbxMolf5yW-MqNg2RahHGiFvuW__r2kbsh5mn7nayUb3gGC10BFX8uwBg2o4kAoIr8ukP1ksws83y6o5kfCy4MnD6Jn_y3qMOyFHbu13nJYyMTj5o4A=w957-h639-no" alt="Enable API"></p><p><img src="https://lh3.googleusercontent.com/QSvYxtP7f-wSNrPryDskR7VjB6OtpYDU8WCA-37YuC3j_QfdXH3wrraumzypogezaX7kd6-A83kh7Kpsc1xK3l1_Jg9v90X2kdaRy-1g2J15sJrEq1X3NAu4_-8ld7JbvViZRw=w611-h393-no" alt="Enabling Confirm"><br>註：LINE@ MANAGER 的網址會是 <code>https://admin-official.line.me/</code> 開頭</p></li><li><p>Bot Settings 的部份要留意 Usable APIs 是否有 <code>REPLY_MESSAGE</code> 及 <code>PUSH_MESSAGE</code>。如果沒有 <code>PUSH_MESSAGE</code> 是不能進行 Bot 主動發訊息給 Client App 的。<br><img src="https://lh3.googleusercontent.com/hZmeGk-OPkAUxrjMuIqYgYbfmWmv1jVEWxQA8KT-FpjncQ-KD34K3Ur-IqGZlYg1Gp1c_QPqmdvbhNC55nOmC-NG2Gzz1frSfUNWASVxHO-F4tcsS2clrtU0Hmm8lMYNfTIj6A=w871-h639-no" alt="Use webhooks"><br>Request Settings 裡的 Use webhooks 請勾選 「Allow」。<br>Details 的 Allow Bot to join group chats、Auto Reply Message 及 Greeting Message 都勾選 「Don’t Allow」。</p></li></ol><h2 id="ngrok-讓-localhost-也可以使用-HTTPS"><a href="#ngrok-讓-localhost-也可以使用-HTTPS" class="headerlink" title="ngrok 讓 localhost 也可以使用 HTTPS"></a><a id="usingngrok"></a>ngrok 讓 localhost 也可以使用 HTTPS</h2><p>Line Bot 需要有 HTTPS 的 webhook service 才能接受及轉發訊息，這時候後端開發必備神器 - <a href="https://ngrok.com/" target="_blank" rel="external">ngrok</a>，可以讓 localhost 使用 HTTPS 的隨機網址，達成 webhook service 測試，省去了必須上傳到 Server 後才能得到測試結果的時間花費。</p><h3 id="安裝"><a href="#安裝" class="headerlink" title="安裝"></a>安裝</h3><p>Mac 的部份可以在 <a href="https://ngrok.com/" target="_blank" rel="external">ngrok</a> 官網下載程式，解壓縮後就可以使用了。或者是丟到 <code>/usr/local/bin</code>，方便之後使用。</p><p>Termial 指令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span> ngrok http 8080</div></pre></td></tr></table></figure><p>代表把外界的流量導到 localhost 的 8080 port。執行後會有以下畫面：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">ngrok by @inconshreveable          (Ctrl+C to quit)</div><div class="line"></div><div class="line">Session Status                online</div><div class="line">Account                       YOUR_ACCOUNT (Plan: Free)</div><div class="line">Version                       2.2.4</div><div class="line">Region                        United States (us)</div><div class="line">Web Interface                 http://127.0.0.1:4040</div><div class="line">Forwarding                    http://85ceccf9.ngrok.io -&gt; localhost:8080</div><div class="line"></div><div class="line">Connections                   ttl     opn     rt1     rt5     p50     p90</div><div class="line">                              0       0       0.00    0.00    0.00    0.00</div></pre></td></tr></table></figure><p>按下 <code>Ctrl + C</code> 跳出並停止運作。</p><h3 id="申請-HTTPS-protocol"><a href="#申請-HTTPS-protocol" class="headerlink" title="申請 HTTPS protocol"></a>申請 HTTPS protocol</h3><p>到 <a href="https://ngrok.com/" target="_blank" rel="external">ngrok</a> 官網註冊，可以使用 Github 或 Google 登入。<br>登入的畫面如下：<br><img src="https://lh3.googleusercontent.com/ZRyTQA8tuz-QiC3bJh3MjzC6U2_AliofTUUfHdnieoQJ4vO3rYt80AqR7yNyXA2KBERCuS0KXIcaTbX0ay3G2-Msz9oEj6TylLSQOqY-uYOOMKm-1M1IC4as3lP6kMkRuGdWhQ=w742-h639-no" alt="ngrok Dashborad"></p><p>在 Terminal 下執行指令，這樣就可以使用 https 的網址</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">$ ngrok authtoken &#123;token&#125;</div><div class="line">$ ngrok http 8080</div><div class="line"></div><div class="line">ngrok by @inconshreveable           (Ctrl+C to quit)</div><div class="line"></div><div class="line">Session Status                online</div><div class="line">Account                       YOUR_ACCOUNT (Plan: Free)</div><div class="line">Version                       2.2.4</div><div class="line">Region                        United States (us)</div><div class="line">Web Interface                 http://127.0.0.1:4040</div><div class="line">Forwarding                    http://ec041dbf.ngrok.io -&gt; localhost:8080</div><div class="line">Forwarding                    https://ec041dbf.ngrok.io -&gt; localhost:8080</div><div class="line"></div><div class="line">Connections                   ttl     opn     rt1     rt5     p50     p90</div><div class="line">                              0       0       0.00    0.00    0.00    0.00</div></pre></td></tr></table></figure><p>其他指令參考</p><ul><li>HTTP Auth</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span> ngrok http -auth "user:passwd" 80</div></pre></td></tr></table></figure><ul><li>轉址到 local domain（修改 /etc/hosts）</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span> ngrok http -host-header=myweb.dev myweb.dev:80</div></pre></td></tr></table></figure><p>以上 ngrok 的基本使用是參考 <a href="https://coder.tw/?p=7211" target="_blank" rel="external">Ngrok – 讓本機也可以開發 webhook 免部署環境的神器</a></p><h2 id="使用-Nodejs-在本地端部署-webhook-service"><a href="#使用-Nodejs-在本地端部署-webhook-service" class="headerlink" title="使用 Nodejs 在本地端部署 webhook service"></a><a id="webhookservice"></a>使用 Nodejs 在本地端部署 webhook service</h2><h3 id="開始建立-Nodejs-專案"><a href="#開始建立-Nodejs-專案" class="headerlink" title="開始建立 Nodejs 專案"></a>開始建立 Nodejs 專案</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span> mkdir node-line-bot</div><div class="line"><span class="meta">$</span> cd node-line-bot</div></pre></td></tr></table></figure><p>建立 <code>package.json</code> 檔案，並修改 “scripts”，增加 <code>&quot;start&quot;: &quot;node .&quot;</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span> npm init</div><div class="line"></div><div class="line">&#123;</div><div class="line">  "name": "node-line-bot",</div><div class="line">  "version": "1.0.0",</div><div class="line">  "description": "",</div><div class="line">  "main": "index.js",</div><div class="line">  "scripts": &#123;</div><div class="line">    "start": "node ."</div><div class="line">  &#125;,</div><div class="line">  "author": "Jerry Huang",</div><div class="line">  "license": "MIT"</div><div class="line">&#125;</div></pre></td></tr></table></figure><p>安裝模組 <code>linebot</code> 及 <code>express</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span> npm install linebot express --save</div><div class="line"></div><div class="line">node-line-bot@1.0.0 /Users/jerryhuang/workspace/practice/nodejs/node-line-bot</div><div class="line">├─┬ express@4.15.3</div><div class="line">│ ├─┬ accepts@1.3.3</div><div class="line">│ │ ├─┬ mime-types@2.1.15</div><div class="line">│ │ │ └── mime-db@1.27.0</div><div class="line">│ │ └── negotiator@0.6.1</div><div class="line">│ ├── array-flatten@1.1.1</div><div class="line">│ ├── content-disposition@0.5.2</div><div class="line">│ ├── content-type@1.0.2</div><div class="line">│ ├── cookie@0.3.1</div><div class="line">│ ├── cookie-signature@1.0.6</div><div class="line">│ ├─┬ debug@2.6.7</div><div class="line">│ │ └── ms@2.0.0</div><div class="line">│ ├── depd@1.1.0</div><div class="line">│ ├── encodeurl@1.0.1</div><div class="line">│ ├── escape-html@1.0.3</div><div class="line">│ ├── etag@1.8.0</div><div class="line">│ ├─┬ finalhandler@1.0.3</div><div class="line">│ │ └── unpipe@1.0.0</div><div class="line">│ ├── fresh@0.5.0</div><div class="line">│ ├── merge-descriptors@1.0.1</div><div class="line">│ ├── methods@1.1.2</div><div class="line">│ ├─┬ on-finished@2.3.0</div><div class="line">│ │ └── ee-first@1.1.1</div><div class="line">│ ├── parseurl@1.3.1</div><div class="line">│ ├── path-to-regexp@0.1.7</div><div class="line">│ ├─┬ proxy-addr@1.1.4</div><div class="line">│ │ ├── forwarded@0.1.0</div><div class="line">│ │ └── ipaddr.js@1.3.0</div><div class="line">│ ├── qs@6.4.0</div><div class="line">│ ├── range-parser@1.2.0</div><div class="line">│ ├─┬ send@0.15.3</div><div class="line">│ │ ├── destroy@1.0.4</div><div class="line">│ │ ├─┬ http-errors@1.6.1</div><div class="line">│ │ │ └── inherits@2.0.3</div><div class="line">│ │ └── mime@1.3.4</div><div class="line">│ ├── serve-static@1.12.3</div><div class="line">│ ├── setprototypeof@1.0.3</div><div class="line">│ ├── statuses@1.3.1</div><div class="line">│ ├─┬ type-is@1.6.15</div><div class="line">│ │ └── media-typer@0.3.0</div><div class="line">│ ├── utils-merge@1.0.0</div><div class="line">│ └── vary@1.1.1</div><div class="line">└─┬ linebot@1.3.0</div><div class="line">  ├─┬ body-parser@1.17.2</div><div class="line">  │ ├── bytes@2.4.0</div><div class="line">  │ ├── iconv-lite@0.4.15</div><div class="line">  │ └── raw-body@2.2.0</div><div class="line">  └─┬ node-fetch@1.7.0</div><div class="line">    ├── encoding@0.1.12</div><div class="line">    └── is-stream@1.1.0</div><div class="line"></div><div class="line">npm WARN node-line-bot@1.0.0 No description</div><div class="line">npm WARN node-line-bot@1.0.0 No repository field.</div></pre></td></tr></table></figure><p>建立 <code>index.js</code> 檔案的內容如下</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> linebot = <span class="built_in">require</span>(<span class="string">'linebot'</span>),</div><div class="line">    express = <span class="built_in">require</span>(<span class="string">'express'</span>);</div><div class="line"></div><div class="line"><span class="keyword">const</span> config = <span class="built_in">require</span>(<span class="string">'./config.json'</span>),</div><div class="line">    util = <span class="built_in">require</span>(<span class="string">'util'</span>);</div><div class="line"></div><div class="line"><span class="keyword">let</span> bot = linebot(&#123;</div><div class="line">    channelId: <span class="string">'Line Bot Channel ID'</span>,</div><div class="line">    channelSecret: <span class="string">'Line Bot Channel Secret'</span>,</div><div class="line">    channelAccessToken: <span class="string">'Line Bot Access Token'</span></div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="keyword">const</span> linebotParser = bot.parser(),</div><div class="line">    app = express();</div><div class="line"></div><div class="line">bot.on(<span class="string">'message'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</div><div class="line">    <span class="comment">// 把收到訊息的 event 印出來</span></div><div class="line">    <span class="built_in">console</span>.log(event);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">app.post(<span class="string">'/webhook'</span>, linebotParser);</div><div class="line"></div><div class="line"><span class="comment">// 在 localhost 走 8080 port</span></div><div class="line"><span class="keyword">let</span> server = app.listen(process.env.PORT || <span class="number">8080</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">let</span> port = server.address().port;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">"My Line bot App running on port"</span>, port);</div><div class="line">&#125;);</div></pre></td></tr></table></figure><h3 id="如何取得-Line-Bot-的-Channel-ID-及設定-Webhook"><a href="#如何取得-Line-Bot-的-Channel-ID-及設定-Webhook" class="headerlink" title="如何取得 Line Bot 的 Channel ID 及設定 Webhook"></a>如何取得 Line Bot 的 Channel ID 及設定 Webhook</h3><p>Channel ID、Channel Secret 及 Channel Access Token 可以從 LINE Business Center 進入後取得</p><h4 id="取得-Channel-ID、Channel-Secret-及-Channel-Access-Token"><a href="#取得-Channel-ID、Channel-Secret-及-Channel-Access-Token" class="headerlink" title="取得 Channel ID、Channel Secret 及 Channel Access Token"></a>取得 Channel ID、Channel Secret 及 Channel Access Token</h4><p>回到 LINE Business Center 按下 Messaging API 右邊的「LINE Developers」<br> <img src="https://lh3.googleusercontent.com/i2ZbXKUPnLO3EB-GpOH7CwbwLHB5xVFTI8J5ZSHm2GyGNmfIFmkpyjWLBoGA0Lo7J-xAS0OwC4C4jiqOG1SAKCksmeNr_LRmVB5pn0E5EZBg9C9Xx_rq0EyywNEWJZpkqDHriw=w738-h583-no" alt="前往 LINE Developers"></p><p>在 LINE developers 下的 “Basic information”，將 “Channel ID”、”Channel Secret”（點選 SHOW 會出現）、 “Channel Access Token” 複製貼到 index.js 裡對應的程式中<br> <img src="https://lh3.googleusercontent.com/nhK_bbRrgxY-cCb0D_79yUV-e_ARnRydKBXgj9QpUaoQh0-Lv5AdU7MsNgbK1LmB8VUuFUbOkRRfbLbX1kj8ZNNfIMJq7yo2oz8eSPlvmZOB5_Ce7LW45X8e9fuNujyJHEdaJQ=w654-h639-no" alt="取得 Channel ID"></p><p>點選 ISSUE 會產生 “Channel Access Token”<br> <img src="https://lh3.googleusercontent.com/HXbB5WOezmhLSsokuOp4TZEFOn1xC10jdNXsZj76RH3fI5-OvJYd4TGYR6VN6AYLGgFIeLJCfXPznvnaZadwbFI6nVnx9cVW1ybWFcu5lFDkt0dgkUA5vHGHaqlpe9j2_OK9Kw=w633-h639-no" alt="取得 Channel Access Token"></p><h4 id="設定-Webhook-URL"><a href="#設定-Webhook-URL" class="headerlink" title="設定 Webhook URL"></a>設定 Webhook URL</h4><p>同樣在 “Basic information” 下，按下右下角的 “EDIT”，然後將 ngrok 產生的網址以及 index.js 內監聽 post mehtod 的路徑組合 <code>https://ec041dbf.ngrok.io/webhook</code> 貼到 “Webhook URL” 中<br> <img src="https://lh3.googleusercontent.com/ptb0MmQ-AwOc4Ze5EywsFwy94QzjbOlWkXLmQtisBig5qHSCxpgVhIpNbOC2iJHk9PrwJHcBfHO9aKvB5biE95TkuQ-pqIgX4yi0b8BNrJO3qeI9OcnBCYPP2qpvw71IaiPWCg=w600-h639-no" alt="設定 Webhook URL"></p><p>回到 Terminal 畫面，啟動 webhook service</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span> node index.js</div></pre></td></tr></table></figure><p>再回 LINE developers 的 “Basic information”，按下 Webhoo URL 右方的 “VERIFY” 以驗證是否正確。</p><p>Terminal 畫面會有以下資訊</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">&#123; replyToken: '00000000000000000000000000000000',</div><div class="line">  type: 'message',</div><div class="line">  timestamp: 1451617200000,</div><div class="line">  source:</div><div class="line">   &#123; type: 'user',</div><div class="line">     userId: 'UdeadbeefdeadbeefdeLINEBOTUSERID',</div><div class="line">     profile: [Function] &#125;,</div><div class="line">  message:</div><div class="line">   &#123; id: '100001',</div><div class="line">     type: 'text',</div><div class="line">     text: 'Hello,world',</div><div class="line">     content: [Function] &#125;,</div><div class="line">  reply: [Function] &#125;</div><div class="line">&#123; replyToken: 'ffffffffffffffffffffffffffffffff',</div><div class="line">  type: 'message',</div><div class="line">  timestamp: 1451617210000,</div><div class="line">  source:</div><div class="line">   &#123; type: 'user',</div><div class="line">     userId: 'UdeadbeefdeadbeefdeLINEBOTUSERID',</div><div class="line">     profile: [Function] &#125;,</div><div class="line">  message:</div><div class="line">   &#123; id: '100002',</div><div class="line">     type: 'sticker',</div><div class="line">     packageId: '1',</div><div class="line">     stickerId: '1',</div><div class="line">     content: [Function] &#125;,</div><div class="line">  reply: [Function] &#125;</div></pre></td></tr></table></figure><h2 id="使用-Line-App-傳訊息給-Line-Bot"><a href="#使用-Line-App-傳訊息給-Line-Bot" class="headerlink" title="使用 Line App 傳訊息給 Line Bot"></a><a id="sendlinebot"></a>使用 Line App 傳訊息給 Line Bot</h2><p>手機 Line App 掃描  LINE developers 的 “Basic information” 畫面中的 QR Code 將 Line Bot 加入，然後輸入文字，測試 Line Bot 是否有正確接收到。<br> <img src="https://lh3.googleusercontent.com/M6x09wRnbeDagDnrCe0m7rQAPocOIOnhooSD6mOnLbBG-ygU2M-VRi7UWcYVQ6jHkkQyy9htxI54rehBjWBQFwzpw_EI5QQSTzIct5UtFO3aB0sgykQllqpd3ehUjeq4gNF7wA=w317-h181-no" alt=""></p><p>如果有正確收到訊息，則 Terminal 畫面會顯示以下資訊</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&#123; type: 'message',</div><div class="line">  replyToken: '98eb2ca92bdb468c9REPLYTOKEN',</div><div class="line">  source:</div><div class="line">   &#123; userId: 'U08cee31d0f3a94CLIENTAPPUSERID',</div><div class="line">     type: 'user',</div><div class="line">     profile: [Function] &#125;,</div><div class="line">  timestamp: 1496462418683,</div><div class="line">  message:</div><div class="line">   &#123; type: 'text',</div><div class="line">     id: '618217MSGID',</div><div class="line">     text: '開發測試Q Q',</div><div class="line">     content: [Function] &#125;,</div><div class="line">  reply: [Function] &#125;</div></pre></td></tr></table></figure><h3 id="將收到的訊息，回覆給-Client-App"><a href="#將收到的訊息，回覆給-Client-App" class="headerlink" title="將收到的訊息，回覆給 Client App"></a>將收到的訊息，回覆給 Client App</h3><p>修改一下 on ‘message’ 的內容</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">bot.on(<span class="string">'message'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</div><div class="line">    <span class="comment">// 把收到訊息的 event 印出來</span></div><div class="line">    <span class="comment">//console.log(event);</span></div><div class="line"></div><div class="line">    <span class="comment">// 重複 client 輸入的內容</span></div><div class="line">    <span class="keyword">if</span> (event.message.type = <span class="string">'text'</span>) &#123;</div><div class="line">        <span class="keyword">var</span> msg = event.message.text;</div><div class="line">        event.reply(msg).then(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</div><div class="line">            <span class="comment">// success</span></div><div class="line">            <span class="built_in">console</span>.log(msg);</div><div class="line">        &#125;).catch(<span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>&#123;</div><div class="line">            <span class="comment">// error</span></div><div class="line">            <span class="built_in">console</span>.log(<span class="string">'error'</span>);</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure><p>記得要重啟 nodejs server 喔 :)</p><p> <img src="https://lh3.googleusercontent.com/hx85cXamDUf7tD3pktZZtgP1w46UyMydyGa1PcO3bdVvSBJhCJbZuDBDeQCC4VFaEpV9fhGyJVB1sdnFEMjiMqo6zCaVSmI7wQHpSXX4Fb3xx2--T-x_wnNRh_i7z-5p2X3mvw=w319-h282-no" alt="重複 client 輸入的內容"></p><h3 id="主動發送訊息"><a href="#主動發送訊息" class="headerlink" title="主動發送訊息"></a>主動發送訊息</h3><p>讓 server 啟動後 3 秒，發送訊息給 Client App，請在 index.js 加入以下程式，。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 主動發送訊息給 Client App</span></div><div class="line">setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> userId = <span class="string">'Client App User ID'</span>;</div><div class="line">    <span class="keyword">var</span> sendMsg = <span class="string">"push msg to one user"</span>;</div><div class="line">    bot.push(userId, [sendMsg]);</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'userId: '</span> + userId);</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'send: '</span> + sendMsg);</div><div class="line">&#125;, <span class="number">3000</span>);</div></pre></td></tr></table></figure><p> <img src="https://lh3.googleusercontent.com/bq-9Ck0gZ8aS5gcP6TKdcSjUAsdSVBpF-EcJqSSmEWTyHxfLKDEBgxfBKCMG0P1267Apl_tcaxr24omYJiGqruOYbdpr4BxiUWQh_dOmIytlfAw3kfHdQppgwF8gd0y9JnWaZw=w320-h335-no" alt="主動發送訊息"></p><h2 id="參考資料："><a href="#參考資料：" class="headerlink" title="參考資料："></a>參考資料：</h2><ul><li><a href="http://www.oxxostudio.tw/articles/201701/line-bot.html" target="_blank" rel="external">LINE BOT 實戰 ( 原理篇 )</a></li><li><a href="http://www.oxxostudio.tw/articles/201701/line-bot-2.html" target="_blank" rel="external">LINE BOT 實戰 ( 聊天篇 )</a></li><li><a href="https://goo.gl/ePtTRw" target="_blank" rel="external">不必真的架站也能 5 分鐘實機體驗 LINE bot – 教學 ( by node.js &amp; ngrok )</a></li><li><a href="https://coder.tw/?p=7211" target="_blank" rel="external">Ngrok – 讓本機也可以開發 webhook 免部署環境的神器</a></li><li><a href="https://ngrok.com/" target="_blank" rel="external">ngrok.com</a></li></ul><h3 id="Line-Bot-的圖片來源"><a href="#Line-Bot-的圖片來源" class="headerlink" title="Line Bot 的圖片來源"></a>Line Bot 的圖片來源</h3><ul><li><a href="https://tgram.ru/bots/topics_bot" target="_blank" rel="external">tgram.ru</a></li><li><a href="https://tgram.ru/wiki/bots/image/topics_bot.jpg" target="_blank" rel="external">https://tgram.ru/wiki/bots/image/topics_bot.jpg</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Chat Bot 正夯，剛好公司的專案有 Line Bot 的應用，所以參考了 &lt;a href=&quot;https://goo.gl/ePtTRw&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;不必真的架站也能 5 分鐘實機體驗 LINE bot – 教學 ( by node.js &amp;amp; ngrok )&lt;/a&gt;、&lt;a href=&quot;http://www.oxxostudio.tw/articles/201701/line-bot.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;LINE BOT 實戰 ( 原理篇 )&lt;/a&gt;、&lt;a href=&quot;http://www.oxxostudio.tw/articles/201701/line-bot-2.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;LINE BOT 實戰 ( 聊天篇 )&lt;/a&gt; 等文章來進行 Nodejs 的 Line bot 開發實作練習。&lt;/p&gt;
    
    </summary>
    
      <category term="nodejs" scheme="http://codefun.tw/categories/nodejs/"/>
    
    
      <category term="nodejs" scheme="http://codefun.tw/tags/nodejs/"/>
    
      <category term="line bot" scheme="http://codefun.tw/tags/line-bot/"/>
    
      <category term="ngrok" scheme="http://codefun.tw/tags/ngrok/"/>
    
  </entry>
  
  <entry>
    <title>OSX 執行 gvm pkgset use 發生錯誤</title>
    <link href="http://codefun.tw/2017/04/26/20170426-osx-gvm-pkgset-use-error/"/>
    <id>http://codefun.tw/2017/04/26/20170426-osx-gvm-pkgset-use-error/</id>
    <published>2017-04-26T01:58:10.000Z</published>
    <updated>2017-06-03T16:46:50.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="第一次安裝-gvm-就踩到奇怪的雷"><a href="#第一次安裝-gvm-就踩到奇怪的雷" class="headerlink" title="第一次安裝 gvm 就踩到奇怪的雷"></a>第一次安裝 gvm 就踩到奇怪的雷</h2><p><a href="https://github.com/moovweb/gvm" target="_blank" rel="external">gvm</a> 是 <a href="https://golang.org/" target="_blank" rel="external">golang</a> 的版本管理工具（跟 nvm 很像），但是竟然在 OSX 下踩到奇怪的雷，<br>在 <code>~/.bash_profile</code> 內的 <code>export GREP_OPTIONS=&#39;--color=always&#39;</code> 會造成 <code>gvm use</code> 或 <code>gvm pkgset use</code> 無法正常運作。</p><a id="more"></a><h2 id="解決方式："><a href="#解決方式：" class="headerlink" title="解決方式："></a>解決方式：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ vim $HOME/.gvm/scripts/env/pkgset-use</div><div class="line">$ vim $HOME/.gvm/scripts/env/use</div></pre></td></tr></table></figure><p>在 <code>$GREP_PATH</code> 後面加上 <code>--color=never</code>，也就是修改成 <code>$GREP_PATH --color=never</code></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;第一次安裝-gvm-就踩到奇怪的雷&quot;&gt;&lt;a href=&quot;#第一次安裝-gvm-就踩到奇怪的雷&quot; class=&quot;headerlink&quot; title=&quot;第一次安裝 gvm 就踩到奇怪的雷&quot;&gt;&lt;/a&gt;第一次安裝 gvm 就踩到奇怪的雷&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/moovweb/gvm&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;gvm&lt;/a&gt; 是 &lt;a href=&quot;https://golang.org/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;golang&lt;/a&gt; 的版本管理工具（跟 nvm 很像），但是竟然在 OSX 下踩到奇怪的雷，&lt;br&gt;在 &lt;code&gt;~/.bash_profile&lt;/code&gt; 內的 &lt;code&gt;export GREP_OPTIONS=&amp;#39;--color=always&amp;#39;&lt;/code&gt; 會造成 &lt;code&gt;gvm use&lt;/code&gt; 或 &lt;code&gt;gvm pkgset use&lt;/code&gt; 無法正常運作。&lt;/p&gt;
    
    </summary>
    
      <category term="golang" scheme="http://codefun.tw/categories/golang/"/>
    
    
      <category term="golang" scheme="http://codefun.tw/tags/golang/"/>
    
      <category term="gvm" scheme="http://codefun.tw/tags/gvm/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://codefun.tw/2016/10/08/hello-world/"/>
    <id>http://codefun.tw/2016/10/08/hello-world/</id>
    <published>2016-10-08T08:53:11.000Z</published>
    <updated>2017-06-03T16:24:07.000Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p><a id="more"></a><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;documentation&lt;/a&gt; for more info. If you get any problems when using Hexo, you can find the answer in &lt;a href=&quot;https://hexo.io/docs/troubleshooting.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;troubleshooting&lt;/a&gt; or you can ask me on &lt;a href=&quot;https://github.com/hexojs/hexo/issues&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;GitHub&lt;/a&gt;.&lt;/p&gt;
    
    </summary>
    
    
  </entry>
  
</feed>
