<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Codefun</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://codefun.tw/"/>
  <updated>2022-05-21T06:34:15.000Z</updated>
  <id>http://codefun.tw/</id>
  
  <author>
    <name>Jerry Huang</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Makefile 的另一個選擇 Taskfile</title>
    <link href="http://codefun.tw/2022/20220521-taskfile-a-makefile-alternative.html"/>
    <id>http://codefun.tw/2022/20220521-taskfile-a-makefile-alternative.html</id>
    <published>2022-05-21T06:34:15.000Z</published>
    <updated>2022-05-21T06:34:15.000Z</updated>
    
    <content type="html"><![CDATA[<p>在 macOS 環境，除了使用 Makefile 之外，還有另一個選擇 Taskfile。</p><a id="more"></a><h2 id="環境-Environment"><a href="#環境-Environment" class="headerlink" title="環境  Environment"></a>環境  Environment</h2><ul><li>macOS 12.3.1</li><li>Homebrew 3.4.5</li></ul><h2 id="安裝-Taskfile"><a href="#安裝-Taskfile" class="headerlink" title="安裝 Taskfile"></a>安裝 Taskfile</h2><p>Use <code>brew</code> command to install <code>task</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ brew install go-task/tap/go-task</span><br></pre></td></tr></table></figure><h2 id="新增-Taskfile"><a href="#新增-Taskfile" class="headerlink" title="新增 Taskfile"></a>新增 Taskfile</h2><p>Create <code>Taskfile.yml</code> and insert the following,</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">"3"</span></span><br><span class="line"></span><br><span class="line"><span class="attr">tasks:</span></span><br><span class="line"><span class="attr">  build:</span></span><br><span class="line"><span class="attr">    desc:</span> <span class="string">Build</span> <span class="string">the</span> <span class="string">app</span></span><br><span class="line"><span class="attr">    cmds:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">GOFLAGS=-mod=mod</span> <span class="string">go</span> <span class="string">build</span> <span class="bullet">-o</span> <span class="string">./bin/app</span> <span class="string">./internal/main.go</span></span><br><span class="line"></span><br><span class="line"><span class="attr">  run:</span></span><br><span class="line"><span class="attr">    desc:</span> <span class="string">Run</span> <span class="string">the</span> <span class="string">app</span></span><br><span class="line"><span class="attr">    cmds:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">GOFLAGS=-mod=mod</span> <span class="string">go</span> <span class="string">run</span> <span class="string">./internal/main.go</span></span><br></pre></td></tr></table></figure><p>Display the list of available tasks:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ task --list</span><br><span class="line">task: Available tasks <span class="keyword">for</span> this project:</span><br><span class="line">* build:  Build the app</span><br><span class="line">* run:   Run the app</span><br></pre></td></tr></table></figure><h2 id="執行-Taskfile-command"><a href="#執行-Taskfile-command" class="headerlink" title="執行 Taskfile command"></a>執行 Taskfile command</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ task run</span><br><span class="line">task: [run] GOFLAGS=-mod=mod go run ./internal/main.go</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>進階使用可參考 <a href="https://dev.to/stack-labs/introduction-to-taskfile-a-makefile-alternative-h92" target="_blank" rel="noopener">Introduction to Taskfile: a Makefile alternative</a> 。</p><h2 id="參考資料-References"><a href="#參考資料-References" class="headerlink" title="參考資料  References"></a>參考資料  References</h2><ul><li><a href="https://dev.to/stack-labs/introduction-to-taskfile-a-makefile-alternative-h92" target="_blank" rel="noopener">Introduction to Taskfile: a Makefile alternative</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;在 macOS 環境，除了使用 Makefile 之外，還有另一個選擇 Taskfile。&lt;/p&gt;
    
    </summary>
    
      <category term="development" scheme="http://codefun.tw/categories/development/"/>
    
    
      <category term="makefile" scheme="http://codefun.tw/tags/makefile/"/>
    
      <category term="taskfile" scheme="http://codefun.tw/tags/taskfile/"/>
    
  </entry>
  
  <entry>
    <title>被 curl 命令輸出的 &quot;* Expire in 0 ms for 1 (transfer 0x7f85f6002000)&quot; 洗版了</title>
    <link href="http://codefun.tw/2021/2021120801-curl-command-outputs-expire-in-x-ms-for-1.html"/>
    <id>http://codefun.tw/2021/2021120801-curl-command-outputs-expire-in-x-ms-for-1.html</id>
    <published>2021-12-08T08:48:34.000Z</published>
    <updated>2021-12-08T08:48:34.000Z</updated>
    
    <content type="html"><![CDATA[<p>使用 curl 命令，被一堆 <code>* Expire in 0 ms for 1 (transfer 0x7f85f6002000)</code> 洗版很傻眼。。。</p><a id="more"></a><h2 id="環境-Environment"><a href="#環境-Environment" class="headerlink" title="環境  Environment"></a>環境  Environment</h2><ul><li>macOS: v10.14.6</li><li>iTerm2: Build 3.4.14</li><li>curl: v7.64.0</li></ul><h2 id="狀況"><a href="#狀況" class="headerlink" title="狀況"></a>狀況</h2><p>終於受不了每次使用 curl 命令，畫面會出現非常多的</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">* Expire <span class="keyword">in</span> 2 ms <span class="keyword">for</span> 1 (transfer 0x7f85f6002000)</span><br><span class="line">* Expire <span class="keyword">in</span> 0 ms <span class="keyword">for</span> 1 (transfer 0x7f85f6002000)</span><br><span class="line">* Expire <span class="keyword">in</span> 0 ms <span class="keyword">for</span> 1 (transfer 0x7f85f6002000)</span><br><span class="line">* Expire <span class="keyword">in</span> 2 ms <span class="keyword">for</span> 1 (transfer 0x7f85f6002000)</span><br><span class="line">* Expire <span class="keyword">in</span> 0 ms <span class="keyword">for</span> 1 (transfer 0x7f85f6002000)</span><br><span class="line">* Expire <span class="keyword">in</span> 0 ms <span class="keyword">for</span> 1 (transfer 0x7f85f6002000)</span><br><span class="line">* Expire <span class="keyword">in</span> 2 ms <span class="keyword">for</span> 1 (transfer 0x7f85f6002000)</span><br><span class="line">* Expire <span class="keyword">in</span> 0 ms <span class="keyword">for</span> 1 (transfer 0x7f85f6002000)</span><br><span class="line">* Expire <span class="keyword">in</span> 0 ms <span class="keyword">for</span> 1 (transfer 0x7f85f6002000)</span><br><span class="line">* Expire <span class="keyword">in</span> 2 ms <span class="keyword">for</span> 1 (transfer 0x7f85f6002000)</span><br><span class="line">* Expire <span class="keyword">in</span> 0 ms <span class="keyword">for</span> 1 (transfer 0x7f85f6002000)</span><br><span class="line">* Expire <span class="keyword">in</span> 0 ms <span class="keyword">for</span> 1 (transfer 0x7f85f6002000)</span><br></pre></td></tr></table></figure><p>爬文看到有人跟我有一樣的困擾，看起來是某一版的 curl 才會出現這樣的 log output。解法就是升級 curl。</p><p>查看 curl 版本，</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">curl -V</span><br><span class="line">curl 7.64.0 (x86_64-apple-darwin13.4.0) libcurl/7.64.0 OpenSSL/1.1.1b zlib/1.2.11 libssh2/1.8.0</span><br><span class="line">Release-Date: 2019-02-06</span><br><span class="line">Protocols: dict file ftp ftps gopher http https imap imaps pop3 pop3s rtsp scp sftp smb smbs smtp smtps telnet tftp</span><br><span class="line">Features: AsynchDNS IPv6 Largefile GSS-API Kerberos SPNEGO NTLM NTLM_WB SSL libz TLS-SRP UnixSockets HTTPS-proxy</span><br></pre></td></tr></table></figure><h2 id="處理方式"><a href="#處理方式" class="headerlink" title="處理方式"></a>處理方式</h2><p>使用 homebrew 更新</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">brew upgrade curl</span><br><span class="line"></span><br><span class="line">==&gt; Upgrading curl</span><br><span class="line">  7.79.1_1 -&gt; 7.80.0_1</span><br></pre></td></tr></table></figure><p>務必要執行以下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">'export PATH="/usr/local/opt/curl/bin:$PATH"'</span> &gt;&gt; ~/.zshrc</span><br></pre></td></tr></table></figure><h2 id="參考資料-References"><a href="#參考資料-References" class="headerlink" title="參考資料  References"></a>參考資料  References</h2><ul><li><a href="https://stackoverflow.com/questions/63191648/curl-error-expire-in-1-ms-for-1-transfer-0x" target="_blank" rel="noopener">CURL error “Expire in 1 ms for 1 (transfer 0x…)”</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;使用 curl 命令，被一堆 &lt;code&gt;* Expire in 0 ms for 1 (transfer 0x7f85f6002000)&lt;/code&gt; 洗版很傻眼。。。&lt;/p&gt;
    
    </summary>
    
      <category term="development" scheme="http://codefun.tw/categories/development/"/>
    
    
      <category term="curl" scheme="http://codefun.tw/tags/curl/"/>
    
  </entry>
  
  <entry>
    <title>我的日常 git 操作</title>
    <link href="http://codefun.tw/2019/2019062601-my-version-control-specification.html"/>
    <id>http://codefun.tw/2019/2019062601-my-version-control-specification.html</id>
    <published>2019-06-26T03:45:09.000Z</published>
    <updated>2019-06-26T03:45:09.000Z</updated>
    
    <content type="html"><![CDATA[<p>將日常的 git 操作記錄下來作為團隊的開發規範。</p><a id="more"></a><h2 id="開發"><a href="#開發" class="headerlink" title="開發"></a>開發</h2><h3 id="遵循-Git-flow"><a href="#遵循-Git-flow" class="headerlink" title="遵循 Git flow"></a>遵循 Git flow</h3><ol><li>務必在個人開發環境安裝 git flow</li><li>可依據個人習慣使用 command 或是 <a href="https://www.sourcetreeapp.com/" target="_blank" rel="noopener">sourcetree</a> 進行 git 各項操作</li><li>Git flow 的說明可參考 <a href="https://gitbook.tw/chapters/gitflow/why-need-git-flow.html" target="_blank" rel="noopener">Git Flow 是什麼？為什麼需要這種東西？</a></li><li>各項操作參照 <a href="https://danielkummer.github.io/git-flow-cheatsheet/" target="_blank" rel="noopener">git-flow cheatsheet</a> 文章內的方式進行</li></ol><h3 id="工作規範"><a href="#工作規範" class="headerlink" title="工作規範"></a>工作規範</h3><h4 id="Checkout"><a href="#Checkout" class="headerlink" title="Checkout"></a>Checkout</h4><ol><li>工作的 branch 一定從 develop 切（checkout）出 feature branch</li><li>每一 feature branch 只開發最小單位功能，以避免與 develop 產生過大的差異，導致 merge 的難度提高</li></ol><h4 id="Commit"><a href="#Commit" class="headerlink" title="Commit"></a>Commit</h4><ol><li>第一行為必填的標題（Subject），需重點說明，建議少於 50 字元</li><li>空一行後可撰寫詳細描述（Body），為選填，僅摘要描述</li><li>Commit 寫法可參考 <a href="https://juffalow.com/other/write-good-git-commit-message" target="_blank" rel="noopener">Write good git commit message</a></li><li>僅可能使用英文（Google translator 是好幫手 :thumbsup: ）</li></ol><h4 id="Pull-及-Push"><a href="#Pull-及-Push" class="headerlink" title="Pull 及 Push"></a>Pull 及 Push</h4><ol><li>每次進行 pull/ push 前，先執行 fetch，以取得最新的 branches 的狀態，並依據當下情境進行更新</li><li>從 develop 進行 checkout 前，需 pull 取得最新狀態</li><li>每日下午 5 點將 feature branch push 到 remote 進行保存（買保險的概念 :smile: ）</li></ol><h4 id="Pull-Request"><a href="#Pull-Request" class="headerlink" title="Pull Request"></a>Pull Request</h4><ol><li>feature branch 項目完成後，不可直接 merge 回 develop</li><li>請至 repository server 發出 pull request，請求其他人進行 code review</li></ol><h4 id="Merge-to-develop"><a href="#Merge-to-develop" class="headerlink" title="Merge to develop"></a>Merge to develop</h4><ol><li>Code review 完成後，由最後一位將 issue close，並將該 feature branch merge 到 develop</li></ol><hr><h2 id="Repository-備份"><a href="#Repository-備份" class="headerlink" title="Repository 備份"></a>Repository 備份</h2><p>可行方式如下：</p><ol><li>每日排程備份 repository server 的資料</li><li>repository server 的資料存放在如 <a href="https://www.gluster.org/" target="_blank" rel="noopener">Gluster</a> 的 file system</li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;將日常的 git 操作記錄下來作為團隊的開發規範。&lt;/p&gt;
    
    </summary>
    
      <category term="development" scheme="http://codefun.tw/categories/development/"/>
    
    
      <category term="git" scheme="http://codefun.tw/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>使用 Git pre-commit 自動修正 PHP 的 Coding Style</title>
    <link href="http://codefun.tw/2019/2019051901-php-coding-style-fix-with-git.html"/>
    <id>http://codefun.tw/2019/2019051901-php-coding-style-fix-with-git.html</id>
    <published>2019-05-19T04:09:38.000Z</published>
    <updated>2019-05-19T04:09:38.000Z</updated>
    
    <content type="html"><![CDATA[<p>在 VS Code 下，除了<a href="2017/2017102302-vscode-extension-php-cs-fixer.html">使用 extension - <code>junstyle.php-cs-fixer</code> 進行 PHP 的 Coding Style 修正</a> 之外，也可以使用 <a href="https://githooks.com/" target="_blank" rel="noopener">Git hooks</a> 的功能，在 commit 之前執行指定的 script，稱為 <a href="https://github.com/git/git/blob/master/templates/hooks--pre-commit.sample" target="_blank" rel="noopener">pre-commit</a>，搭配 <a href="https://github.com/friendsofphp/php-cs-fixer" target="_blank" rel="noopener">php-cs-fixer</a> 就能自動化的對有差異的 PHP 檔案進行 Coding Style 的修正。</p><a id="more"></a><h2 id="環境"><a href="#環境" class="headerlink" title="環境"></a>環境</h2><ol><li>macOS 10.13.6 High Sierra</li><li>PHP 7.3.5</li></ol><h2 id="開始設定-pre-commit"><a href="#開始設定-pre-commit" class="headerlink" title="開始設定 pre-commit"></a>開始設定 pre-commit</h2><h3 id="Step-1-檢查是否有-hooks-目錄"><a href="#Step-1-檢查是否有-hooks-目錄" class="headerlink" title="Step 1. 檢查是否有 hooks 目錄"></a>Step 1. 檢查是否有 hooks 目錄</h3><p>檢查 workspace 下的 <code>.git</code> 目錄是否有 <code>hooks</code> 子目錄，如下，<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$ ll ./.git</span><br><span class="line">total 64</span><br><span class="line">-rw-r--r--    1 jerryhuang  staff     8B May 17 18:02 COMMIT_EDITMSG</span><br><span class="line">-rw-r--r--    1 jerryhuang  staff     0B May 19 12:54 FETCH_HEAD</span><br><span class="line">-rw-r--r--    1 jerryhuang  staff    24B May 17 17:23 HEAD</span><br><span class="line">-rw-r--r--    1 jerryhuang  staff   371B May 17 17:30 config</span><br><span class="line">-rw-r--r--    1 jerryhuang  staff    73B May 17 17:30 description</span><br><span class="line">drwxr-xr-x   14 jerryhuang  staff   448B May 17 17:59 hooks</span><br><span class="line">-rw-r--r--    1 jerryhuang  staff    11K May 17 18:02 index</span><br><span class="line">drwxr-xr-x    3 jerryhuang  staff    96B May 17 17:30 info</span><br><span class="line">drwxr-xr-x    4 jerryhuang  staff   128B May  7 12:15 logs</span><br><span class="line">drwxr-xr-x  143 jerryhuang  staff   4.5K May 17 18:02 objects</span><br><span class="line">drwxr-xr-x    5 jerryhuang  staff   160B May  7 12:16 refs</span><br><span class="line">-rw-r--r--@   1 jerryhuang  staff   174B May 17 18:07 sourcetreeconfig</span><br></pre></td></tr></table></figure></p><p>如果有 <code>hooks</code>，則跳過 Step 2。</p><h3 id="Step-2-建立-hooks-目錄"><a href="#Step-2-建立-hooks-目錄" class="headerlink" title="Step 2. 建立 hooks 目錄"></a>Step 2. 建立 hooks 目錄</h3><p>同樣地在 workspace 目錄下，執行<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git init</span><br></pre></td></tr></table></figure></p><p>此時會重新建立 git 及其子目錄 hooks 與該目錄內的 sample 檔案。</p><h3 id="Step-3-新增-pre-commit-檔案內容"><a href="#Step-3-新增-pre-commit-檔案內容" class="headerlink" title="Step 3. 新增 pre-commit 檔案內容"></a>Step 3. 新增 pre-commit 檔案內容</h3><p>在 workspace 下執行 <code>vim ./.git/hooks/pre-commit</code>，新增如下的檔案內容</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">pass=<span class="literal">true</span></span><br><span class="line"></span><br><span class="line">files=$(git diff --cached --name-only --diff-filter=ACMR | grep -E <span class="string">'\.(php|phtml)$'</span>)</span><br><span class="line"><span class="keyword">if</span> [ <span class="string">"<span class="variable">$files</span>"</span> != <span class="string">""</span> ]; <span class="keyword">then</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Run php syntax check before commit</span></span><br><span class="line">    <span class="keyword">while</span> <span class="built_in">read</span> -r file; <span class="keyword">do</span></span><br><span class="line">        php -l <span class="string">"<span class="variable">$file</span>"</span></span><br><span class="line">        <span class="keyword">if</span> [ $? -ne 0 ]; <span class="keyword">then</span></span><br><span class="line">            pass=<span class="literal">false</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">done</span> &lt;&lt;&lt; <span class="string">"<span class="variable">$files</span>"</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Run php-cs-fixer validation before commit</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"<span class="variable">$files</span>"</span> | xargs ./vendor/bin/php-cs-fixer fix --diff --config .php_cs</span><br><span class="line">    <span class="keyword">if</span> [ $? -ne 0 ]; <span class="keyword">then</span></span><br><span class="line">        pass=<span class="literal">false</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Automatically add files that may have been fixed by php-cs-fixer</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"<span class="variable">$files</span>"</span> | xargs git add</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="variable">$pass</span>; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">exit</span> 0</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">""</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"PRE-COMMIT HOOK FAILED:"</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"Code style validation failed. Please fix errors and try committing again."</span></span><br><span class="line">    <span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><p>請留意 <code>echo &quot;$files&quot; | xargs ./vendor/bin/php-cs-fixer fix --diff --config .php_cs</code> 這段，</p><ol><li><code>./vendor/bin/php-cs-fixer</code>： 是使用 <code>composer require --dev friendsofphp/php-cs-fixer</code> 安裝在 project 內 vendor 目錄中的 php-cs-fixer 進行 Coding Style 修正。Global 安裝方式請參考 <a href="https://github.com/friendsofphp/php-cs-fixer" target="_blank" rel="noopener">FriendsOfPHP/PHP-CS-Fixer</a>。</li><li><code>.php_cs</code>： 使用 <a href="2017/2017102302-vscode-extension-php-cs-fixer.html">在 vs code 使用 php cs fixer 進行 coding style 的格式修正</a> 一文內建立的檔案，或參考 <a href="https://github.com/friendsofphp/php-cs-fixer" target="_blank" rel="noopener">FriendsOfPHP/PHP-CS-Fixer</a> 內的 <code>.php_cs.dist</code> 再依據需求修改。</li></ol><h3 id="Step-4-修改-pre-commit-的權限"><a href="#Step-4-修改-pre-commit-的權限" class="headerlink" title="Step 4. 修改 pre-commit 的權限"></a>Step 4. 修改 pre-commit 的權限</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ chmod +x .git/hooks/pre-commit</span><br></pre></td></tr></table></figure><p>必須修改 <code>pre-commit</code> 的權限，這樣才能在 commit 前正確執行寫 php-cs-fixer。</p><p>完成以上設定後，每次在 commit 前，只要有產生差異的 PHP 檔案，就會自動進行 Coding Style 修正。</p><h2 id="參考資料-References"><a href="#參考資料-References" class="headerlink" title="參考資料  References"></a>參考資料  References</h2><ul><li><a href="https://victor.4devs.io/en/clean-code/automating-code-style-fixes-with-git-and-php-cs-fixer.html" target="_blank" rel="noopener">Automating Code Style Fixes with Git and PHP Coding Standards Fixer</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;在 VS Code 下，除了&lt;a href=&quot;2017/2017102302-vscode-extension-php-cs-fixer.html&quot;&gt;使用 extension - &lt;code&gt;junstyle.php-cs-fixer&lt;/code&gt; 進行 PHP 的 Coding Style 修正&lt;/a&gt; 之外，也可以使用 &lt;a href=&quot;https://githooks.com/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Git hooks&lt;/a&gt; 的功能，在 commit 之前執行指定的 script，稱為 &lt;a href=&quot;https://github.com/git/git/blob/master/templates/hooks--pre-commit.sample&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;pre-commit&lt;/a&gt;，搭配 &lt;a href=&quot;https://github.com/friendsofphp/php-cs-fixer&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;php-cs-fixer&lt;/a&gt; 就能自動化的對有差異的 PHP 檔案進行 Coding Style 的修正。&lt;/p&gt;
    
    </summary>
    
      <category term="php" scheme="http://codefun.tw/categories/php/"/>
    
    
      <category term="coding style" scheme="http://codefun.tw/tags/coding-style/"/>
    
      <category term="php-cs-fixer" scheme="http://codefun.tw/tags/php-cs-fixer/"/>
    
  </entry>
  
  <entry>
    <title>使用 Homebrew 安裝 anaconda</title>
    <link href="http://codefun.tw/2019/2019042601-install-anaconda-with-homebrew.html"/>
    <id>http://codefun.tw/2019/2019042601-install-anaconda-with-homebrew.html</id>
    <published>2019-04-26T09:20:10.000Z</published>
    <updated>2019-04-26T09:20:10.000Z</updated>
    
    <content type="html"><![CDATA[<p>只要簡單幾行命令，就可以快速安裝好 <a href="https://www.anaconda.com/" title="anaconda" target="_blank" rel="noopener">anaconda</a>，並且使用 <a href="https://jupyter.org/" target="_blank" rel="noopener">jupyter notebook</a>。</p><a id="more"></a><h2 id="使用-Homebrew-安裝-anaconda"><a href="#使用-Homebrew-安裝-anaconda" class="headerlink" title="使用 Homebrew 安裝 anaconda"></a>使用 Homebrew 安裝 anaconda</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br></pre></td><td class="code"><pre><span class="line">$ brew cask install anaconda</span><br><span class="line"></span><br><span class="line">==&gt; Satisfying dependencies</span><br><span class="line">==&gt; Downloading https://repo.anaconda.com/archive/Anaconda3-2019.03-MacOSX-x86_64.sh</span><br><span class="line"></span><br><span class="line"><span class="comment">###### ################################################################## 100.0%</span></span><br><span class="line"></span><br><span class="line">==&gt; Verifying SHA-256 checksum <span class="keyword">for</span> Cask <span class="string">'anaconda'</span>.</span><br><span class="line">==&gt; Installing Cask anaconda</span><br><span class="line">==&gt; Running installer script <span class="string">'Anaconda3-2019.03-MacOSX-x86_64.sh'</span></span><br><span class="line">Password:</span><br><span class="line">PREFIX=/usr/<span class="built_in">local</span>/anaconda3</span><br><span class="line">installing: python-3.7.3-h359304d_0 ...</span><br><span class="line">Python 3.7.3</span><br><span class="line">installing: conda-env-2.6.0-1 ...</span><br><span class="line">installing: blas-1.0-mkl ...</span><br><span class="line">installing: bzip2-1.0.6-h1de35cc_5 ...</span><br><span class="line">installing: ca-certificates-2019.1.23-0 ...</span><br><span class="line">installing: intel-openmp-2019.3-199 ...</span><br><span class="line">installing: jbig-2.1-h4d881f8_0 ...</span><br><span class="line">installing: jpeg-9b-he5867d9_2 ...</span><br><span class="line">installing: libcxxabi-4.0.1-hcfea43d_1 ...</span><br><span class="line">installing: libgfortran-3.0.1-h93005f0_2 ...</span><br><span class="line">installing: libiconv-1.15-hdd342a3_7 ...</span><br><span class="line">installing: libsodium-1.0.16-h3efe00b_0 ...</span><br><span class="line">installing: lz4-c-1.8.1.2-h1de35cc_0 ...</span><br><span class="line">installing: lzo-2.10-h362108e_2 ...</span><br><span class="line">installing: pandoc-2.2.3.2-0 ...</span><br><span class="line">installing: xz-5.2.4-h1de35cc_4 ...</span><br><span class="line">installing: yaml-0.1.7-hc338f04_2 ...</span><br><span class="line">installing: zlib-1.2.11-h1de35cc_3 ...</span><br><span class="line">installing: libcxx-4.0.1-hcfea43d_1 ...</span><br><span class="line">installing: libpng-1.6.36-ha441bb4_0 ...</span><br><span class="line">installing: mkl-2019.3-199 ...</span><br><span class="line">installing: openssl-1.1.1b-h1de35cc_1 ...</span><br><span class="line">installing: tk-8.6.8-ha441bb4_0 ...</span><br><span class="line">installing: zstd-1.3.7-h5bba6e5_0 ...</span><br><span class="line">installing: expat-2.2.6-h0a44026_0 ...</span><br><span class="line">installing: freetype-2.9.1-hb4e5f40_0 ...</span><br><span class="line">installing: gmp-6.1.2-hb37e062_1 ...</span><br><span class="line">installing: hdf5-1.10.4-hfa1e0ec_0 ...</span><br><span class="line">installing: icu-58.2-h4b95b61_1 ...</span><br><span class="line">installing: libffi-3.2.1-h475c297_4 ...</span><br><span class="line">installing: liblief-0.9.0-h2a1bed3_2 ...</span><br><span class="line">installing: libssh2-1.8.0-ha12b0ac_4 ...</span><br><span class="line">installing: libtiff-4.0.10-hcb84e12_2 ...</span><br><span class="line">installing: ncurses-6.1-h0a44026_1 ...</span><br><span class="line">installing: pcre-8.43-h0a44026_0 ...</span><br><span class="line">installing: snappy-1.1.7-he62c110_3 ...</span><br><span class="line">installing: zeromq-4.3.1-h0a44026_3 ...</span><br><span class="line">installing: blosc-1.15.0-hd9629dc_0 ...</span><br><span class="line">installing: gettext-0.19.8.1-h15daf44_3 ...</span><br><span class="line">installing: libedit-3.1.20181209-hb402a30_0 ...</span><br><span class="line">installing: libxml2-2.9.9-hab757c2_0 ...</span><br><span class="line">installing: mpfr-4.0.1-h3018a27_3 ...</span><br><span class="line">installing: readline-7.0-h1de35cc_5 ...</span><br><span class="line">installing: glib-2.56.2-hd9629dc_0 ...</span><br><span class="line">installing: krb5-1.16.1-hddcf347_7 ...</span><br><span class="line">installing: libarchive-3.3.3-h786848e_5 ...</span><br><span class="line">installing: libxslt-1.1.33-h33a18ac_0 ...</span><br><span class="line">installing: mpc-1.1.0-h6ef4df4_1 ...</span><br><span class="line">installing: sqlite-3.27.2-ha441bb4_0 ...</span><br><span class="line">installing: unixodbc-2.3.7-h1de35cc_0 ...</span><br><span class="line">installing: dbus-1.13.6-h90a0687_0 ...</span><br><span class="line">installing: libcurl-7.64.0-h051b688_2 ...</span><br><span class="line">installing: qt-5.9.7-h468cd18_1 ...</span><br><span class="line">installing: alabaster-0.7.12-py37_0 ...</span><br><span class="line">installing: appnope-0.1.0-py37_0 ...</span><br><span class="line">installing: appscript-1.1.0-py37h1de35cc_0 ...</span><br><span class="line">installing: asn1crypto-0.24.0-py37_0 ...</span><br><span class="line">installing: atomicwrites-1.3.0-py37_1 ...</span><br><span class="line">installing: attrs-19.1.0-py37_1 ...</span><br><span class="line">installing: backcall-0.1.0-py37_0 ...</span><br><span class="line">installing: backports-1.0-py37_1 ...</span><br><span class="line">installing: bitarray-0.8.3-py37h1de35cc_0 ...</span><br><span class="line">installing: boto-2.49.0-py37_0 ...</span><br><span class="line">installing: certifi-2019.3.9-py37_0 ...</span><br><span class="line">installing: chardet-3.0.4-py37_1 ...</span><br><span class="line">installing: click-7.0-py37_0 ...</span><br><span class="line">installing: cloudpickle-0.8.0-py37_0 ...</span><br><span class="line">installing: colorama-0.4.1-py37_0 ...</span><br><span class="line">installing: contextlib2-0.5.5-py37_0 ...</span><br><span class="line">installing: curl-7.64.0-ha441bb4_2 ...</span><br><span class="line">installing: dask-core-1.1.4-py37_1 ...</span><br><span class="line">installing: decorator-4.4.0-py37_1 ...</span><br><span class="line">installing: defusedxml-0.5.0-py37_1 ...</span><br><span class="line">installing: docutils-0.14-py37_0 ...</span><br><span class="line">installing: entrypoints-0.3-py37_0 ...</span><br><span class="line">installing: et_xmlfile-1.0.1-py37_0 ...</span><br><span class="line">installing: fastcache-1.0.2-py37h1de35cc_2 ...</span><br><span class="line">installing: filelock-3.0.10-py37_0 ...</span><br><span class="line">installing: future-0.17.1-py37_0 ...</span><br><span class="line">installing: glob2-0.6-py37_1 ...</span><br><span class="line">installing: gmpy2-2.0.8-py37h6ef4df4_2 ...</span><br><span class="line">installing: greenlet-0.4.15-py37h1de35cc_0 ...</span><br><span class="line">installing: heapdict-1.0.0-py37_2 ...</span><br><span class="line">installing: idna-2.8-py37_0 ...</span><br><span class="line">installing: imagesize-1.1.0-py37_0 ...</span><br><span class="line">installing: ipython_genutils-0.2.0-py37_0 ...</span><br><span class="line">installing: itsdangerous-1.1.0-py37_0 ...</span><br><span class="line">installing: jdcal-1.4-py37_0 ...</span><br><span class="line">installing: kiwisolver-1.0.1-py37h0a44026_0 ...</span><br><span class="line">installing: lazy-object-proxy-1.3.1-py37h1de35cc_2 ...</span><br><span class="line">installing: llvmlite-0.28.0-py37h8c7ce04_0 ...</span><br><span class="line">installing: locket-0.2.0-py37_1 ...</span><br><span class="line">installing: lxml-4.3.2-py37hef8c89e_0 ...</span><br><span class="line">installing: markupsafe-1.1.1-py37h1de35cc_0 ...</span><br><span class="line">installing: mccabe-0.6.1-py37_1 ...</span><br><span class="line">installing: mistune-0.8.4-py37h1de35cc_0 ...</span><br><span class="line">installing: mkl-service-1.1.2-py37hfbe908c_5 ...</span><br><span class="line">installing: more-itertools-6.0.0-py37_0 ...</span><br><span class="line">installing: mpmath-1.1.0-py37_0 ...</span><br><span class="line">installing: msgpack-python-0.6.1-py37h04f5b5a_1 ...</span><br><span class="line">installing: numpy-base-1.16.2-py37h6575580_0 ...</span><br><span class="line">installing: olefile-0.46-py37_0 ...</span><br><span class="line">installing: pandocfilters-1.4.2-py37_1 ...</span><br><span class="line">installing: parso-0.3.4-py37_0 ...</span><br><span class="line">installing: pep8-1.7.1-py37_0 ...</span><br><span class="line">installing: pickleshare-0.7.5-py37_0 ...</span><br><span class="line">installing: pkginfo-1.5.0.1-py37_0 ...</span><br><span class="line">installing: pluggy-0.9.0-py37_0 ...</span><br><span class="line">installing: ply-3.11-py37_0 ...</span><br><span class="line">installing: prometheus_client-0.6.0-py37_0 ...</span><br><span class="line">installing: psutil-5.6.1-py37h1de35cc_0 ...</span><br><span class="line">installing: ptyprocess-0.6.0-py37_0 ...</span><br><span class="line">installing: py-1.8.0-py37_0 ...</span><br><span class="line">installing: py-lief-0.9.0-py37h1413db1_2 ...</span><br><span class="line">installing: pycodestyle-2.5.0-py37_0 ...</span><br><span class="line">installing: pycosat-0.6.3-py37h1de35cc_0 ...</span><br><span class="line">installing: pycparser-2.19-py37_0 ...</span><br><span class="line">installing: pycrypto-2.6.1-py37h1de35cc_9 ...</span><br><span class="line">installing: pycurl-7.43.0.2-py37ha12b0ac_0 ...</span><br><span class="line">installing: pyflakes-2.1.1-py37_0 ...</span><br><span class="line">installing: pyodbc-4.0.26-py37h0a44026_0 ...</span><br><span class="line">installing: pyparsing-2.3.1-py37_0 ...</span><br><span class="line">installing: pysocks-1.6.8-py37_0 ...</span><br><span class="line">installing: python-libarchive-c-2.8-py37_6 ...</span><br><span class="line">installing: python.app-2-py37_9 ...</span><br><span class="line">installing: pytz-2018.9-py37_0 ...</span><br><span class="line">installing: pyyaml-5.1-py37h1de35cc_0 ...</span><br><span class="line">installing: pyzmq-18.0.0-py37h0a44026_0 ...</span><br><span class="line">installing: qtpy-1.7.0-py37_1 ...</span><br><span class="line">installing: rope-0.12.0-py37_0 ...</span><br><span class="line">installing: ruamel_yaml-0.15.46-py37h1de35cc_0 ...</span><br><span class="line">installing: send2trash-1.5.0-py37_0 ...</span><br><span class="line">installing: simplegeneric-0.8.1-py37_2 ...</span><br><span class="line">installing: sip-4.19.8-py37h0a44026_0 ...</span><br><span class="line">installing: six-1.12.0-py37_0 ...</span><br><span class="line">installing: snowballstemmer-1.2.1-py37_0 ...</span><br><span class="line">installing: sortedcontainers-2.1.0-py37_0 ...</span><br><span class="line">installing: soupsieve-1.8-py37_0 ...</span><br><span class="line">installing: sphinxcontrib-1.0-py37_1 ...</span><br><span class="line">installing: sqlalchemy-1.3.1-py37h1de35cc_0 ...</span><br><span class="line">installing: tblib-1.3.2-py37_0 ...</span><br><span class="line">installing: testpath-0.4.2-py37_0 ...</span><br><span class="line">installing: toolz-0.9.0-py37_0 ...</span><br><span class="line">installing: tornado-6.0.2-py37h1de35cc_0 ...</span><br><span class="line">installing: tqdm-4.31.1-py37_1 ...</span><br><span class="line">installing: unicodecsv-0.14.1-py37_0 ...</span><br><span class="line">installing: wcwidth-0.1.7-py37_0 ...</span><br><span class="line">installing: webencodings-0.5.1-py37_1 ...</span><br><span class="line">installing: werkzeug-0.14.1-py37_0 ...</span><br><span class="line">installing: wrapt-1.11.1-py37h1de35cc_0 ...</span><br><span class="line">installing: wurlitzer-1.0.2-py37_0 ...</span><br><span class="line">installing: xlrd-1.2.0-py37_0 ...</span><br><span class="line">installing: xlsxwriter-1.1.5-py37_0 ...</span><br><span class="line">installing: xlwt-1.3.0-py37_0 ...</span><br><span class="line">installing: zipp-0.3.3-py37_1 ...</span><br><span class="line">installing: babel-2.6.0-py37_0 ...</span><br><span class="line">installing: backports.os-0.1.1-py37_0 ...</span><br><span class="line">installing: backports.shutil_get_terminal_size-1.0.0-py37_2 ...</span><br><span class="line">installing: beautifulsoup4-4.7.1-py37_1 ...</span><br><span class="line">installing: cffi-1.12.2-py37hb5b8e2f_1 ...</span><br><span class="line">installing: cycler-0.10.0-py37_0 ...</span><br><span class="line">installing: cytoolz-0.9.0.1-py37h1de35cc_1 ...</span><br><span class="line">installing: html5lib-1.0.1-py37_0 ...</span><br><span class="line">installing: importlib_metadata-0.8-py37_0 ...</span><br><span class="line">installing: jedi-0.13.3-py37_0 ...</span><br><span class="line">installing: keyring-18.0.0-py37_0 ...</span><br><span class="line">installing: mkl_random-1.0.2-py37h27c97d8_0 ...</span><br><span class="line">installing: multipledispatch-0.6.0-py37_0 ...</span><br><span class="line">installing: nltk-3.4-py37_1 ...</span><br><span class="line">installing: openpyxl-2.6.1-py37_1 ...</span><br><span class="line">installing: packaging-19.0-py37_0 ...</span><br><span class="line">installing: partd-0.3.10-py37_1 ...</span><br><span class="line">installing: pathlib2-2.3.3-py37_0 ...</span><br><span class="line">installing: pexpect-4.6.0-py37_0 ...</span><br><span class="line">installing: pillow-5.4.1-py37hb68e598_0 ...</span><br><span class="line">installing: pyqt-5.9.2-py37h655552a_2 ...</span><br><span class="line">installing: pyrsistent-0.14.11-py37h1de35cc_0 ...</span><br><span class="line">installing: python-dateutil-2.8.0-py37_0 ...</span><br><span class="line">installing: qtawesome-0.5.7-py37_1 ...</span><br><span class="line">installing: setuptools-40.8.0-py37_0 ...</span><br><span class="line">installing: singledispatch-3.4.0.3-py37_0 ...</span><br><span class="line">installing: sortedcollections-1.1.2-py37_0 ...</span><br><span class="line">installing: sphinxcontrib-websupport-1.1.0-py37_1 ...</span><br><span class="line">installing: sympy-1.3-py37_0 ...</span><br><span class="line">installing: terminado-0.8.1-py37_1 ...</span><br><span class="line">installing: traitlets-4.3.2-py37_0 ...</span><br><span class="line">installing: xlwings-0.15.4-py37_0 ...</span><br><span class="line">installing: zict-0.1.4-py37_0 ...</span><br><span class="line">installing: astroid-2.2.5-py37_0 ...</span><br><span class="line">installing: bleach-3.1.0-py37_0 ...</span><br><span class="line">installing: clyent-1.2.2-py37_1 ...</span><br><span class="line">installing: cryptography-2.6.1-py37ha12b0ac_0 ...</span><br><span class="line">installing: cython-0.29.6-py37h0a44026_0 ...</span><br><span class="line">installing: distributed-1.26.0-py37_1 ...</span><br><span class="line">installing: get_terminal_size-1.0.0-h7520d66_0 ...</span><br><span class="line">installing: gevent-1.4.0-py37h1de35cc_0 ...</span><br><span class="line">installing: isort-4.3.16-py37_0 ...</span><br><span class="line">installing: jinja2-2.10-py37_0 ...</span><br><span class="line">installing: jsonschema-3.0.1-py37_0 ...</span><br><span class="line">installing: jupyter_core-4.4.0-py37_0 ...</span><br><span class="line">installing: navigator-updater-0.2.1-py37_0 ...</span><br><span class="line">installing: networkx-2.2-py37_1 ...</span><br><span class="line">installing: nose-1.3.7-py37_2 ...</span><br><span class="line">installing: path.py-11.5.0-py37_0 ...</span><br><span class="line">installing: pygments-2.3.1-py37_0 ...</span><br><span class="line">installing: pytest-4.3.1-py37_0 ...</span><br><span class="line">installing: wheel-0.33.1-py37_0 ...</span><br><span class="line">installing: conda-verify-3.1.1-py37_0 ...</span><br><span class="line">installing: flask-1.0.2-py37_1 ...</span><br><span class="line">installing: jupyter_client-5.2.4-py37_0 ...</span><br><span class="line">installing: nbformat-4.4.0-py37_0 ...</span><br><span class="line">installing: pip-19.0.3-py37_0 ...</span><br><span class="line">installing: prompt_toolkit-2.0.9-py37_0 ...</span><br><span class="line">installing: pylint-2.3.1-py37_0 ...</span><br><span class="line">installing: pyopenssl-19.0.0-py37_0 ...</span><br><span class="line">installing: pytest-openfiles-0.3.2-py37_0 ...</span><br><span class="line">installing: pytest-remotedata-0.3.1-py37_0 ...</span><br><span class="line">installing: ipython-7.4.0-py37h39e3cac_0 ...</span><br><span class="line">installing: nbconvert-5.4.1-py37_3 ...</span><br><span class="line">installing: urllib3-1.24.1-py37_0 ...</span><br><span class="line">installing: ipykernel-5.1.0-py37h39e3cac_0 ...</span><br><span class="line">installing: requests-2.21.0-py37_0 ...</span><br><span class="line">installing: anaconda-client-1.7.2-py37_0 ...</span><br><span class="line">installing: conda-4.6.11-py37_0 ...</span><br><span class="line">installing: jupyter_console-6.0.0-py37_0 ...</span><br><span class="line">installing: notebook-5.7.8-py37_0 ...</span><br><span class="line">installing: qtconsole-4.4.3-py37_0 ...</span><br><span class="line">installing: sphinx-1.8.5-py37_0 ...</span><br><span class="line">installing: spyder-kernels-0.4.2-py37_0 ...</span><br><span class="line">installing: anaconda-navigator-1.9.7-py37_0 ...</span><br><span class="line">installing: anaconda-project-0.8.2-py37_0 ...</span><br><span class="line">installing: conda-build-3.17.8-py37_0 ...</span><br><span class="line">installing: jupyterlab_server-0.2.0-py37_0 ...</span><br><span class="line">installing: numpydoc-0.8.0-py37_0 ...</span><br><span class="line">installing: widgetsnbextension-3.4.2-py37_0 ...</span><br><span class="line">installing: ipywidgets-7.4.2-py37_0 ...</span><br><span class="line">installing: jupyterlab-0.35.4-py37hf63ae98_0 ...</span><br><span class="line">installing: spyder-3.3.3-py37_0 ...</span><br><span class="line">installing: _ipyw_jlab_nb_ext_conf-0.1.0-py37_0 ...</span><br><span class="line">installing: jupyter-1.0.0-py37_7 ...</span><br><span class="line">installing: bokeh-1.0.4-py37_0 ...</span><br><span class="line">installing: bottleneck-1.2.1-py37h1d22016_1 ...</span><br><span class="line">installing: h5py-2.9.0-py37h3134771_0 ...</span><br><span class="line">installing: imageio-2.5.0-py37_0 ...</span><br><span class="line">installing: matplotlib-3.0.3-py37h54f8f79_0 ...</span><br><span class="line">installing: mkl_fft-1.0.10-py37h5e564d8_0 ...</span><br><span class="line">installing: numpy-1.16.2-py37hacdab7b_0 ...</span><br><span class="line">installing: numba-0.43.1-py37h6440ff4_0 ...</span><br><span class="line">installing: numexpr-2.6.9-py37h7413580_0 ...</span><br><span class="line">installing: pandas-0.24.2-py37h0a44026_0 ...</span><br><span class="line">installing: pytest-arraydiff-0.3-py37h39e3cac_0 ...</span><br><span class="line">installing: pytest-doctestplus-0.3.0-py37_0 ...</span><br><span class="line">installing: pywavelets-1.0.2-py37h1d22016_0 ...</span><br><span class="line">installing: scipy-1.2.1-py37h1410ff5_0 ...</span><br><span class="line">installing: bkcharts-0.2-py37_0 ...</span><br><span class="line">installing: dask-1.1.4-py37_1 ...</span><br><span class="line">installing: patsy-0.5.1-py37_0 ...</span><br><span class="line">installing: pytables-3.5.1-py37h5bccee9_0 ...</span><br><span class="line">installing: pytest-astropy-0.5.0-py37_0 ...</span><br><span class="line">installing: scikit-image-0.14.2-py37h0a44026_0 ...</span><br><span class="line">installing: scikit-learn-0.20.3-py37h27c97d8_0 ...</span><br><span class="line">installing: astropy-3.1.2-py37h1de35cc_0 ...</span><br><span class="line">installing: statsmodels-0.9.0-py37h1d22016_0 ...</span><br><span class="line">installing: seaborn-0.9.0-py37_0 ...</span><br><span class="line">installing: anaconda-2019.03-py37_0 ...</span><br><span class="line">installation finished.</span><br><span class="line">==&gt; Changing ownership of paths required by anaconda; your password may be necessary</span><br><span class="line">🍺  anaconda was successfully installed!</span><br></pre></td></tr></table></figure><h2 id="設定環境路徑"><a href="#設定環境路徑" class="headerlink" title="設定環境路徑"></a>設定環境路徑</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vim ~/.zshrc</span><br></pre></td></tr></table></figure><p>加入 anaconda 的安裝路徑，</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PATH=<span class="string">"/usr/local/anaconda3/bin:<span class="variable">$PATH</span>"</span></span><br></pre></td></tr></table></figure><p> 重啓 terminal 或是執行 <code>source ~/.zshrc</code> 重載入環境變數。</p><h2 id="開始使用-jupyter-notebook"><a href="#開始使用-jupyter-notebook" class="headerlink" title="開始使用 jupyter notebook"></a>開始使用 jupyter notebook</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$ jupyter notebook</span><br><span class="line"></span><br><span class="line">[I 17:11:37.762 NotebookApp] Writing notebook server cookie secret to /Users/jerryhuang/Library/Jupyter/runtime/notebook_cookie_secret</span><br><span class="line">[I 17:11:38.780 NotebookApp] JupyterLab extension loaded from /usr/<span class="built_in">local</span>/anaconda3/lib/python3.7/site-packages/jupyterlab</span><br><span class="line">[I 17:11:38.780 NotebookApp] JupyterLab application directory is /usr/<span class="built_in">local</span>/anaconda3/share/jupyter/lab</span><br><span class="line">[I 17:11:38.781 NotebookApp] Serving notebooks from <span class="built_in">local</span> directory: /Users/jerryhuang/workspace/redfalcon/brazil/carnival.2019</span><br><span class="line">[I 17:11:38.781 NotebookApp] The Jupyter Notebook is running at:</span><br><span class="line">[I 17:11:38.781 NotebookApp] http://localhost:8888/?token=7644583630c119f4ce453430fa6993b6cc8c9fe6258d2026</span><br><span class="line">[I 17:11:38.782 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).</span><br><span class="line">[C 17:11:38.793 NotebookApp]</span><br><span class="line"></span><br><span class="line">    To access the notebook, open this file <span class="keyword">in</span> a browser:</span><br><span class="line">        file:///Users/jerryhuang/Library/Jupyter/runtime/nbserver-50420-open.html</span><br><span class="line">    Or copy and paste one of these URLs:</span><br><span class="line">        http://localhost:8888/?token=7644583630c119f4ce453430fa6993b6cc8c9fe6258d2026</span><br><span class="line">^C[I 17:12:02.475 NotebookApp] interrupted</span><br><span class="line">Serving notebooks from <span class="built_in">local</span> directory: /Users/jerryhuang/workspace/redfalcon/brazil/carnival.2019</span><br><span class="line">0 active kernels</span><br><span class="line">The Jupyter Notebook is running at:</span><br><span class="line">http://localhost:8888/?token=7644583630c119f4ce453430fa6993b6cc8c9fe6258d2026</span><br></pre></td></tr></table></figure><h2 id="參考資料-References"><a href="#參考資料-References" class="headerlink" title="參考資料  References"></a>參考資料  References</h2><ul><li><a href="https://medium.com/ayuth/install-anaconda-on-macos-with-homebrew-c94437d63a37" target="_blank" rel="noopener">Install anaconda on macOS with homebrew</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;只要簡單幾行命令，就可以快速安裝好 &lt;a href=&quot;https://www.anaconda.com/&quot; title=&quot;anaconda&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;anaconda&lt;/a&gt;，並且使用 &lt;a href=&quot;https://jupyter.org/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;jupyter notebook&lt;/a&gt;。&lt;/p&gt;
    
    </summary>
    
      <category term="python" scheme="http://codefun.tw/categories/python/"/>
    
    
      <category term="jupyter notebook" scheme="http://codefun.tw/tags/jupyter-notebook/"/>
    
  </entry>
  
  <entry>
    <title>分隔 Laravel log file 以解決 Permission Deny 問題</title>
    <link href="http://codefun.tw/2019/2019042401-laravel-isolate-log-file.html"/>
    <id>http://codefun.tw/2019/2019042401-laravel-isolate-log-file.html</id>
    <published>2019-04-24T04:32:48.000Z</published>
    <updated>2019-04-24T04:32:48.000Z</updated>
    
    <content type="html"><![CDATA[<p>Laravel 理當會將發生的例外錯誤（Exception）寫到 <code>storage/logs/laravel-yyyy-mm-dd.log</code>，但查詢該檔案，卻看不到應有的錯誤內容！</p><a id="more"></a><h2 id="環境"><a href="#環境" class="headerlink" title="環境"></a>環境</h2><p>Docker 安裝的內容，</p><ol><li>Ubuntu 18.04</li><li>Nginx 1.14</li><li>php7.3-fpm</li></ol><h2 id="權限問題-Permission-Deny"><a href="#權限問題-Permission-Deny" class="headerlink" title="權限問題 Permission Deny"></a>權限問題 Permission Deny</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ ll storage/logs/</span><br><span class="line"></span><br><span class="line">-rw-r--r--. 1 www-data www-data  30283 Apr 16 23:55 laravel-2019-04-16.log</span><br><span class="line">-rw-r--r--. 1 www-data www-data  30079 Apr 17 23:55 laravel-2019-04-17.log</span><br><span class="line">-rw-r--r--. 1 root     root      30283 Apr 18 23:55 laravel-2019-04-18.log</span><br><span class="line">-rw-r--r--. 1 root     root      38283 Apr 19 23:55 laravel-2019-04-19.log</span><br></pre></td></tr></table></figure><p>系統有 crontab 定時處理事務，在處理的同時會以 <code>Log::info()</code> 輸出，所以產生的 log 檔案，其 owner 會是 root。<br>網站程式運行的 user 是 <code>www-data</code>，所以若發生程式的 Exception 就會因為 Permission Deny 而無法寫入，</p><h2 id="解決方式"><a href="#解決方式" class="headerlink" title="解決方式"></a>解決方式</h2><h3 id="成功的解法-Success"><a href="#成功的解法-Success" class="headerlink" title="成功的解法  Success"></a>成功的解法  Success</h3><p>在 <code>bootstrap/app.php</code> 檔案內加入以下程式碼，<br><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// isolate artisan console log and laravel service log</span></span><br><span class="line"><span class="comment">// https://stackoverflow.com/questions/27674597/laravel-daily-log-created-with-wrong-permissions</span></span><br><span class="line">$app-&gt;configureMonologUsing(<span class="function"><span class="keyword">function</span> <span class="params">(Monolog\Logger $monolog)</span> </span>&#123;</span><br><span class="line">    $filename = storage_path(<span class="string">'logs/'</span> . php_sapi_name() . <span class="string">'-'</span> . posix_getpwuid(posix_geteuid())[<span class="string">'name'</span>] . <span class="string">'.log'</span>);</span><br><span class="line">    $monolog-&gt;pushHandler($handler = <span class="keyword">new</span> Monolog\Handler\RotatingFileHandler($filename, <span class="number">60</span>));</span><br><span class="line">    $handler-&gt;setFilenameFormat(<span class="string">'laravel-&#123;date&#125;-&#123;filename&#125;'</span>, <span class="string">'Y-m-d'</span>);</span><br><span class="line">    $formatter = <span class="keyword">new</span> LineFormatter(<span class="keyword">null</span>, <span class="keyword">null</span>, <span class="keyword">true</span>, <span class="keyword">true</span>);</span><br><span class="line">    $formatter-&gt;includeStacktraces();</span><br><span class="line">    $handler-&gt;setFormatter($formatter);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p>以 <code>php artisan command</code> 執行或是 crontab 所產生的 log file，其 owner 都會是 <code>root</code>，<br>如果是網站運行時的 Exception 所建立的 log file，則 owner 會是 <code>www-data</code>，符合要的結果。 😄<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ ll storage/logs/</span><br><span class="line"></span><br><span class="line">-rw-r--r--. 1 root     root     2652 Apr 24 06:30 laravel-2019-04-24-cli-root.log</span><br><span class="line">-rw-r--r--. 1 www-data www-data  78B Apr 24 04:24 laravel-2019-04-24-fpm-fcgi-www-data.log</span><br></pre></td></tr></table></figure></p><h3 id="無法得到預期效果的處理方式-failed"><a href="#無法得到預期效果的處理方式-failed" class="headerlink" title="無法得到預期效果的處理方式  failed"></a>無法得到預期效果的處理方式  failed</h3><h4 id="用-www-data-執行"><a href="#用-www-data-執行" class="headerlink" title="用 www-data 執行"></a>用 www-data 執行</h4><p>以 <code>www-data</code> user 運行 <code>php artisan command</code>？</p><p>切換執行的 user 身份<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ su www-data</span><br><span class="line"></span><br><span class="line">This account is currently not available.</span><br></pre></td></tr></table></figure></p><p>查看 <code>www-data</code> user<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ cat /etc/passwd | grep www</span><br><span class="line"></span><br><span class="line">www-data:x:33:33:www-data:/var/www:/usr/sbin/nologin</span><br></pre></td></tr></table></figure></p><p>因 <code>/usr/sbin/nologin</code> 的關係，所以無法切換 user，<br>修改成<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ vim /etc/passwd</span><br><span class="line"></span><br><span class="line">www-data:x:33:33:www-data:/var/www:/bin/bash</span><br></pre></td></tr></table></figure></p><p>然後以 <code>www-data</code> 身份執行 php artisan 以產生 log file，會得到 owner 為 <code>www-data</code> 的 log file，<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ su www-data</span><br><span class="line">$ php artisan <span class="built_in">command</span>:xxxx</span><br><span class="line">$ ll storage/logs/</span><br></pre></td></tr></table></figure></p><p><strong>BUT</strong> crontab 執行產生的 log file 仍然 root，Orz</p><h4 id="修改-crontab"><a href="#修改-crontab" class="headerlink" title="修改 crontab"></a>修改 crontab</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">$ crontab -e</span><br><span class="line"></span><br><span class="line">* * * * * /usr/bin/php /home/www/code/artisan schedule:run &gt;&gt; /dev/null 2&gt;&amp;1</span><br></pre></td></tr></table></figure><p>修改成</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* * * * * www-data /usr/bin/php /home/www/code/artisan schedule:run &gt;&gt; /dev/null 2&gt;&amp;1</span><br></pre></td></tr></table></figure><p>然後執行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo service cron reload</span><br></pre></td></tr></table></figure><p>結果 cron 無法運作，😳</p><h5 id="可能需要這樣做（未驗證）"><a href="#可能需要這樣做（未驗證）" class="headerlink" title="可能需要這樣做（未驗證）"></a>可能需要這樣做（未驗證）</h5><p>為 <code>www-data</code> 建立自己的 crontab 排程，可參考 <a href="https://learnku.com/articles/6775/about-laravel-log-permissions" title="关于 Laravel 日志权限" target="_blank" rel="noopener">关于 Laravel 日志权限</a> 下方留言<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ su www-data</span><br><span class="line">$ crontab -u www-data -e</span><br></pre></td></tr></table></figure></p><h4 id="放棄測試"><a href="#放棄測試" class="headerlink" title="放棄測試"></a>放棄測試</h4><p>因環境是在 Docker 內，上述的步驟已經無法輕易以撰寫 shell script 達成要的結果，若需要人工介入修改，則不符合使用 Docker 無痛開發原則 XD。</p><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul><li><a href="https://stackoverflow.com/questions/27674597/laravel-daily-log-created-with-wrong-permissions" target="_blank" rel="noopener">Laravel daily log created with wrong permissions</a></li><li><a href="https://laravel.com/docs/5.5/errors#configuration" target="_blank" rel="noopener">Laravel 5.5 - Errors &amp; Logging - Configuration</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Laravel 理當會將發生的例外錯誤（Exception）寫到 &lt;code&gt;storage/logs/laravel-yyyy-mm-dd.log&lt;/code&gt;，但查詢該檔案，卻看不到應有的錯誤內容！&lt;/p&gt;
    
    </summary>
    
      <category term="development" scheme="http://codefun.tw/categories/development/"/>
    
    
      <category term="laravel" scheme="http://codefun.tw/tags/laravel/"/>
    
  </entry>
  
  <entry>
    <title>如何在 workspace 快速開啟 VS Code 進行編輯</title>
    <link href="http://codefun.tw/2019/2019042301-open-vs-code-from-command-line.html"/>
    <id>http://codefun.tw/2019/2019042301-open-vs-code-from-command-line.html</id>
    <published>2019-04-23T04:19:59.000Z</published>
    <updated>2019-04-23T04:19:59.000Z</updated>
    
    <content type="html"><![CDATA[<p>一定要會的技巧 - 從 command line 直接開啟 VS Code!</p><a id="more"></a><h2 id="操作環境"><a href="#操作環境" class="headerlink" title="操作環境"></a>操作環境</h2><ol><li>macOS: 10.13.6 High Sierra</li><li>iTerm2</li></ol><h2 id="只要四個步驟"><a href="#只要四個步驟" class="headerlink" title="只要四個步驟"></a>只要四個步驟</h2><ol><li>開啟 VS Code，按下快速鍵 <code>command + shift + p</code></li><li>在跳出的對話框命令列後輸入或找到 <code>&gt;Shell Command: Install &#39;code&#39; command in PATH</code></li><li>等待安裝完成後，開啟 iTerm2</li><li>進入 workspace，然後在 command line 輸入 <code>code .</code> 就可以開始使用 VS Code 編輯整個工作目錄了 :)</li></ol><h2 id="參考資料-References"><a href="#參考資料-References" class="headerlink" title="參考資料  References"></a>參考資料  References</h2><ul><li><a href="https://code.visualstudio.com/docs/setup/mac" target="_blank" rel="noopener">Visual Studio Code on macOS</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;一定要會的技巧 - 從 command line 直接開啟 VS Code!&lt;/p&gt;
    
    </summary>
    
      <category term="editor" scheme="http://codefun.tw/categories/editor/"/>
    
    
      <category term="vscode" scheme="http://codefun.tw/tags/vscode/"/>
    
  </entry>
  
  <entry>
    <title>使用 Telnet 測試 TCP Port</title>
    <link href="http://codefun.tw/2019/2019041002-use-telnet-to-test-tcp-port.html"/>
    <id>http://codefun.tw/2019/2019041002-use-telnet-to-test-tcp-port.html</id>
    <published>2019-04-10T11:11:56.000Z</published>
    <updated>2019-04-10T11:11:56.000Z</updated>
    
    <content type="html"><![CDATA[<p>想知道遠端 port 是否由開通，使用 telnet 測試就對了！</p><a id="more"></a><h2 id="安裝-Telnet"><a href="#安裝-Telnet" class="headerlink" title="安裝 Telnet"></a>安裝 Telnet</h2><p>在 Mac 下使用 <code>Homebrew</code> 安裝</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ brew install telnet</span><br></pre></td></tr></table></figure><h2 id="測試遠端-port"><a href="#測試遠端-port" class="headerlink" title="測試遠端 port"></a>測試遠端 port</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ telnet 172.28.7.100 80</span><br><span class="line"></span><br><span class="line">Trying 172.28.7.100...</span><br><span class="line">Connected to 172.28.7.100.</span><br><span class="line">Escape character is <span class="string">'^]'</span>.</span><br></pre></td></tr></table></figure><p>遠端連線成功，表示 80 port 已開啟。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ telnet 172.28.7.100 25</span><br><span class="line"></span><br><span class="line">Trying 172.28.7.100...</span><br><span class="line">telnet: connect to address 172.28.7.100: Connection refused</span><br><span class="line">telnet: Unable to connect to remote host</span><br></pre></td></tr></table></figure><p>遠端拒絕連線，表示 25 port 未開啟。</p><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul><li><a href="https://blog.gtwang.org/linux/troubleshooting-telnet/" target="_blank" rel="noopener">使用 Telnet 診斷各種伺服器與網路連線問題</a></li><li><a href="https://netbeez.net/blog/telnet-to-test-connectivity-to-tcp/" target="_blank" rel="noopener">How to use telnet to test connectivity to TCP ports</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;想知道遠端 port 是否由開通，使用 telnet 測試就對了！&lt;/p&gt;
    
    </summary>
    
      <category term="development" scheme="http://codefun.tw/categories/development/"/>
    
    
      <category term="telnet" scheme="http://codefun.tw/tags/telnet/"/>
    
  </entry>
  
  <entry>
    <title>HAProxy 負載模式設定</title>
    <link href="http://codefun.tw/2019/2019041001-haproxy-configuration-balance.html"/>
    <id>http://codefun.tw/2019/2019041001-haproxy-configuration-balance.html</id>
    <published>2019-04-10T07:47:29.000Z</published>
    <updated>2019-04-10T07:47:29.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="情境"><a href="#情境" class="headerlink" title="情境"></a>情境</h2><p>某天收到客戶端提出帳號登入後，只要登出後，就無法再登入了。這情況在專案驗收後一段時間都未發生，而是在客戶的網管單位進行了重設網路存取設定後才發生。</p> <a id="more"></a><h2 id="部署架構及驗證"><a href="#部署架構及驗證" class="headerlink" title="部署架構及驗證"></a>部署架構及驗證</h2><p>部署架構，</p><ol><li>Web server * 2</li><li>HAProxy * 2</li><li>DB server * 3 （以 db cluster 方式部署）</li><li>登入採用 JWT 方式</li></ol><p>同樣的設定及部署方式，包含程式設計、Web 及 DB 的部署，在其他二個地方都沒有發生（攤手<br>但基於某些因素，無法直接請客戶的網管單位協助（Orz</p><h2 id="只是一個設定值，結果大不同"><a href="#只是一個設定值，結果大不同" class="headerlink" title="只是一個設定值，結果大不同"></a>只是一個設定值，結果大不同</h2><p>由原建置 HAProxy 的同事提出，更改 balance 參數值，讓同一來源的 client 可以持續訪問同一 web server，或許可以解決（吧？</p><h3 id="修改-config-file"><a href="#修改-config-file" class="headerlink" title="修改 config file"></a>修改 config file</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ vim /etc/haproxy/haproxy.cnf</span><br></pre></td></tr></table></figure><p>找到 web server 相關的設定</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">listen webserver</span><br><span class="line">    <span class="built_in">bind</span> 172.28.7.100:80 transparent</span><br><span class="line">    balance roundrobin</span><br><span class="line">    mode http</span><br><span class="line">    server web1 192.168.99.244:8080 check fall 5 inter 2000 rise 2</span><br><span class="line">    server web2 192.168.99.245:8080 check fall 5 inter 2000 rise 2</span><br></pre></td></tr></table></figure><blockquote><p>balance source<br>Of these options only the “balance source” requires any real discusion. This method will ensure that a request from the IP address 1.2.3.4 will always go to the same backend, assuming it remains alive. This allows you to sidestep any issues with cookie persistence if sessions are stored locally.</p></blockquote><p>將 <code>balance roundrobin</code> 修改成 <code>balance source</code>，再重啓 HAProxy</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo systemctl restart haproxy</span><br></pre></td></tr></table></figure><p>檢查 HAProxy 是否正常運作</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo systemctl status haproxy</span><br></pre></td></tr></table></figure><p>二個 HAProxy 服務都進行了以上修改，就解決了！！</p><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul><li><a href="https://cbonte.github.io/haproxy-dconv/2.0/configuration.html#balance" target="_blank" rel="noopener">HAProxy Documentation - Configuration Manual - balance</a></li><li><a href="https://ssorc.tw/5937" target="_blank" rel="noopener">HAProxy 實現 load balance 負載平衡</a></li><li><a href="http://network.51cto.com/art/201108/286178.htm" target="_blank" rel="noopener">HAProxy负载均衡器的配置与算法</a></li><li><a href="http://benjr.tw/95644" target="_blank" rel="noopener">HAProxy 負載模式</a></li><li><a href="https://blog.51cto.com/jinyudong/1910320" target="_blank" rel="noopener">Haproxy的三种保持客户端会话保持方式</a></li><li><a href="https://segmentfault.com/a/1190000012745434" target="_blank" rel="noopener">基于Cookie的Haproxy防止过速请求的方法</a></li><li><a href="https://www.suse.com/zh-tw/documentation/sle-ha-12/book_sleha/data/sec_ha_lb_haproxy.html" target="_blank" rel="noopener">使用 HAProxy 設定負載平衡</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;情境&quot;&gt;&lt;a href=&quot;#情境&quot; class=&quot;headerlink&quot; title=&quot;情境&quot;&gt;&lt;/a&gt;情境&lt;/h2&gt;&lt;p&gt;某天收到客戶端提出帳號登入後，只要登出後，就無法再登入了。這情況在專案驗收後一段時間都未發生，而是在客戶的網管單位進行了重設網路存取設定後才發生。&lt;/p&gt;
    
    </summary>
    
      <category term="architecture" scheme="http://codefun.tw/categories/architecture/"/>
    
    
      <category term="haproxy" scheme="http://codefun.tw/tags/haproxy/"/>
    
  </entry>
  
  <entry>
    <title>iTerm2 + oh-my-zsh = 好用的終端機</title>
    <link href="http://codefun.tw/2019/2019011001-osx-iterm-2-oh-my-zsh.html"/>
    <id>http://codefun.tw/2019/2019011001-osx-iterm-2-oh-my-zsh.html</id>
    <published>2019-01-10T04:58:42.000Z</published>
    <updated>2019-01-10T04:58:42.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p><a href="https://www.iterm2.com/" target="_blank" rel="noopener">iTerm2</a> 是 macOS 下好用的 terminal 軟體，在 iTerm2 下安裝 <a href="https://github.com/robbyrussell/oh-my-zsh" target="_blank" rel="noopener">oh-my-zsh</a> 以打造個人專屬酷炫好用的 zsh command line 環境 :)</p> <a id="more"></a><h2 id="安裝-iTerm2"><a href="#安裝-iTerm2" class="headerlink" title="安裝 iTerm2"></a>安裝 iTerm2</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> brew tap caskroom/cask</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> brew cask instal iterm2</span></span><br><span class="line">==&gt; Satisfying dependencies</span><br><span class="line">==&gt; Downloading https://iterm2.com/downloads/stable/iTerm2-3_2_0.zip</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">####################################################################### 100.0%</span></span></span><br><span class="line">==&gt; Verifying SHA-256 checksum for Cask 'iterm2'.</span><br><span class="line">==&gt; Installing Cask iterm2</span><br><span class="line">==&gt; Moving App 'iTerm.app' to '/Applications/iTerm.app'.</span><br><span class="line">🍺  iterm2 was successfully installed!</span><br></pre></td></tr></table></figure><h2 id="設定-iTerm2"><a href="#設定-iTerm2" class="headerlink" title="設定 iTerm2"></a>設定 iTerm2</h2><h3 id="設定-Terminal-顏色"><a href="#設定-Terminal-顏色" class="headerlink" title="設定 Terminal 顏色"></a>設定 Terminal 顏色</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Preferences &gt; Profiles &gt; Terminal &gt; Report Terminal Type</span><br></pre></td></tr></table></figure><p>設定成  <code>xterm-256color</code>。</p><h3 id="修改-color-scheme"><a href="#修改-color-scheme" class="headerlink" title="修改 color scheme"></a>修改 color scheme</h3><p>從 <a href="https://github.com/mbadolato/iTerm2-Color-Schemes" target="_blank" rel="noopener">mbadolato/iTerm2-Color-Schemes</a> 下載 <code>Solarized Dark - Patched.itermcolors</code>，然後再從</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Preferences &gt; Profiles &gt; Colors &gt; Color Presets...</span><br></pre></td></tr></table></figure><p>按 <code>import…</code> 將它載入，再從 <code>Color Presets…</code> 選定 <code>Solarized Dark - Patched.itermcolors</code> 作為 iTerm2 的 theme。</p><h2 id="字型管理"><a href="#字型管理" class="headerlink" title="字型管理"></a>字型管理</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> brew tap caskroom/fonts</span></span><br><span class="line"></span><br><span class="line">Updating Homebrew...</span><br><span class="line">==&gt; Auto-updated Homebrew!</span><br><span class="line">Updated 1 tap (homebrew/core).</span><br><span class="line">==&gt; Updated Formulae</span><br><span class="line">pulumi</span><br><span class="line"></span><br><span class="line">==&gt; Tapping homebrew/cask-fonts</span><br><span class="line">Cloning into '/usr/local/Homebrew/Library/Taps/homebrew/homebrew-cask-fonts'...</span><br><span class="line">remote: Counting objects: 1198, done.</span><br><span class="line">remote: Compressing objects: 100% (729/729), done.</span><br><span class="line">remote: Total 1198 (delta 762), reused 571 (delta 466), pack-reused 0</span><br><span class="line">Receiving objects: 100% (1198/1198), 228.83 KiB | 134.00 KiB/s, done.</span><br><span class="line">Resolving deltas: 100% (762/762), done.</span><br><span class="line">Tapped 1175 casks (1,215 files, 1MB).</span><br></pre></td></tr></table></figure><h3 id="安裝-powerline-font-字型"><a href="#安裝-powerline-font-字型" class="headerlink" title="安裝 powerline font 字型"></a>安裝 powerline font 字型</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> brew cask install font-sourcecodepro-nerd-font</span></span><br><span class="line">Updating Homebrew...</span><br><span class="line">==&gt; Tapping homebrew/cask</span><br><span class="line">Cloning into '/usr/local/Homebrew/Library/Taps/homebrew/homebrew-cask'...</span><br><span class="line">remote: Counting objects: 4139, done.</span><br><span class="line">remote: Compressing objects: 100% (4126/4126), done.</span><br><span class="line">remote: Total 4139 (delta 25), reused 624 (delta 10), pack-reused 0</span><br><span class="line">Receiving objects: 100% (4139/4139), 1.30 MiB | 1.36 MiB/s, done.</span><br><span class="line">Resolving deltas: 100% (25/25), done.</span><br><span class="line">Tapped 1 command and 4041 casks (4,148 files, 4.1MB).</span><br><span class="line">==&gt; Satisfying dependencies</span><br><span class="line">==&gt; Downloading https://github.com/ryanoasis/nerd-fonts/releases/download/v2.0.0</span><br><span class="line">==&gt; Downloading from https://github-production-release-asset-2e65be.s3.amazonaws</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">####################################################################### 100.0%</span></span></span><br><span class="line">==&gt; Verifying SHA-256 checksum for Cask 'font-sourcecodepro-nerd-font'.</span><br><span class="line">==&gt; Installing Cask font-sourcecodepro-nerd-font</span><br><span class="line">==&gt; Moving Font 'Sauce Code Pro Light Italic Nerd Font Complete.ttf' to '/Users/</span><br><span class="line">==&gt; Moving Font 'Sauce Code Pro Bold Italic Nerd Font Complete.ttf' to '/Users/j</span><br><span class="line">==&gt; Moving Font 'Sauce Code Pro Medium Nerd Font Complete.ttf' to '/Users/jerry/</span><br><span class="line">==&gt; Moving Font 'Sauce Code Pro Medium Italic Nerd Font Complete.ttf' to '/Users</span><br><span class="line">==&gt; Moving Font 'Sauce Code Pro ExtraLight Nerd Font Complete.ttf' to '/Users/je</span><br><span class="line">==&gt; Moving Font 'Sauce Code Pro ExtraLight Italic Nerd Font Complete.ttf' to '/U</span><br><span class="line">==&gt; Moving Font 'Sauce Code Pro Black Nerd Font Complete.ttf' to '/Users/jerry/L</span><br><span class="line">==&gt; Moving Font 'Sauce Code Pro Black Italic Nerd Font Complete.ttf' to '/Users/</span><br><span class="line">==&gt; Moving Font 'Sauce Code Pro Nerd Font Complete.ttf' to '/Users/jerry/Library</span><br><span class="line">==&gt; Moving Font 'Sauce Code Pro Semibold Nerd Font Complete.ttf' to '/Users/jerr</span><br><span class="line">==&gt; Moving Font 'Sauce Code Pro Semibold Italic Nerd Font Complete.ttf' to '/Use</span><br><span class="line">==&gt; Moving Font 'Sauce Code Pro Light Nerd Font Complete.ttf' to '/Users/jerry/L</span><br><span class="line">==&gt; Moving Font 'Sauce Code Pro Bold Nerd Font Complete.ttf' to '/Users/jerry/Li</span><br><span class="line">🍺  font-sourcecodepro-nerd-font was successfully installed!</span><br></pre></td></tr></table></figure><h3 id="iTerm2-設定"><a href="#iTerm2-設定" class="headerlink" title="iTerm2 設定"></a>iTerm2 設定</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Preferences &gt; Profiles &gt; Text &gt; Change Font</span><br></pre></td></tr></table></figure><p>選擇 <code>SauceCodePro Nerd Font</code>。</p><p>查詢其他 nerd 字型，</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> brew cask search nerd</span></span><br></pre></td></tr></table></figure><h2 id="安裝-zsh"><a href="#安裝-zsh" class="headerlink" title="安裝 zsh"></a>安裝 zsh</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> brew install zsh</span></span><br><span class="line"></span><br><span class="line">==&gt; Downloading https://homebrew.bintray.com/bottles/zsh-5.6.2.high_sierra.bottl</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">####################################################################### 100.0%</span></span></span><br><span class="line">==&gt; Pouring zsh-5.6.2.high_sierra.bottle.tar.gz</span><br><span class="line">🍺  /usr/local/Cellar/zsh/5.6.2: 1,478 files, 12.8MB</span><br></pre></td></tr></table></figure><h3 id="設為預設的-shell"><a href="#設為預設的-shell" class="headerlink" title="設為預設的 shell"></a>設為預設的 shell</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sudo sh -c <span class="string">"echo <span class="variable">$(which zsh)</span> &gt;&gt; /etc/shells"</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> chsh -s $(<span class="built_in">which</span> zsh)</span></span><br></pre></td></tr></table></figure><h3 id="安裝-oh-my-zsh"><a href="#安裝-oh-my-zsh" class="headerlink" title="安裝 oh-my-zsh"></a>安裝 oh-my-zsh</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sh -c <span class="string">"<span class="variable">$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)</span>"</span></span></span><br><span class="line"></span><br><span class="line">Cloning Oh My Zsh...</span><br><span class="line">Cloning into '/Users/jerry/.oh-my-zsh'...</span><br><span class="line">remote: Counting objects: 898, done.</span><br><span class="line">remote: Compressing objects: 100% (754/754), done.</span><br><span class="line">remote: Total 898 (delta 25), reused 732 (delta 17), pack-reused 0</span><br><span class="line">Receiving objects: 100% (898/898), 595.72 KiB | 755.00 KiB/s, done.</span><br><span class="line">Resolving deltas: 100% (25/25), done.</span><br><span class="line">Looking for an existing zsh config...</span><br><span class="line">Found ~/.zshrc. Backing up to ~/.zshrc.pre-oh-my-zsh</span><br><span class="line">Using the Oh My Zsh template file and adding it to ~/.zshrc</span><br><span class="line">         __                                     __</span><br><span class="line">  ____  / /_     ____ ___  __  __   ____  _____/ /_</span><br><span class="line"> / __ \/ __ \   / __ `__ \/ / / /  /_  / / ___/ __ \</span><br><span class="line">/ /_/ / / / /  / / / / / / /_/ /    / /_(__  ) / / /</span><br><span class="line">\____/_/ /_/  /_/ /_/ /_/\__, /    /___/____/_/ /_/</span><br><span class="line">                        /____/                       ....is now installed!</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Please look over the ~/.zshrc file to select plugins, themes, and options.</span><br><span class="line"></span><br><span class="line">p.s. Follow us at https://twitter.com/ohmyzsh.</span><br><span class="line"></span><br><span class="line">p.p.s. Get stickers and t-shirts at https://shop.planetargon.com.</span><br></pre></td></tr></table></figure><p>安裝完成後會建立資料夾 <code>~/.oh-my-zsh</code></p><h3 id="套用主題"><a href="#套用主題" class="headerlink" title="套用主題"></a>套用主題</h3><p><strong>1. 開啟 <code>.zshrc</code></strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> vim ~/.zshrc</span></span><br></pre></td></tr></table></figure><p><strong>2. 套用主題</strong></p><p>預設風格為 <code>ZSH_THEME=&quot;robbyrussell&quot;</code>，修改如下，</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 使用agnoster主題預設為robbyrussell</span></span></span><br><span class="line">ZSH_THEME="agnoster"</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># 隱藏用戶名稱(user@hostname)</span></span></span><br><span class="line">DEFAULT_USER=`id -un`</span><br></pre></td></tr></table></figure><p><strong>3. 立即套用</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">exec</span> <span class="variable">$SHELL</span></span></span><br></pre></td></tr></table></figure><h2 id="安裝-powerlevel9k-主題"><a href="#安裝-powerlevel9k-主題" class="headerlink" title="安裝 powerlevel9k 主題"></a>安裝 powerlevel9k 主題</h2><p><strong>1. 下載 powerlevel9k</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">clone</span> https://github.com/bhilburn/powerlevel9k.git ~/.oh-my-zsh/custom/themes/powerlevel9k</span></span><br><span class="line"></span><br><span class="line">Cloning into '/Users/jerry/.oh-my-zsh/custom/themes/powerlevel9k'...</span><br><span class="line">remote: Enumerating objects: 29, done.</span><br><span class="line">remote: Counting objects: 100% (29/29), done.</span><br><span class="line">remote: Compressing objects: 100% (23/23), done.</span><br><span class="line">remote: Total 6963 (delta 7), reused 16 (delta 6), pack-reused 6934</span><br><span class="line">Receiving objects: 100% (6963/6963), 1.96 MiB | 881.00 KiB/s, done.</span><br><span class="line">Resolving deltas: 100% (4447/4447), done.</span><br></pre></td></tr></table></figure><p><strong>2. 套用</strong></p><p>修改 <code>~/.zshrc</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 使用powerlevel9k主題亦可選擇使用agnoster或預設robbyrussell</span></span><br><span class="line">ZSH_THEME="powerlevel9k/powerlevel9k"</span><br><span class="line"><span class="meta">#</span><span class="bash"> 隱藏用戶名稱(user@hostname)</span></span><br><span class="line">DEFAULT_USER=`id -un`</span><br><span class="line"><span class="meta">#</span><span class="bash"> 含有icon的字型</span></span><br><span class="line">POWERLEVEL9K_MODE='nerdfont-complete'</span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">command</span> line 左邊想顯示的內容(資料夾路徑、資料夾讀寫狀態、版本控制資訊)</span></span><br><span class="line">POWERLEVEL9K_LEFT_PROMPT_ELEMENTS=(context dir dir_writable vcs) # &lt;= left prompt 設了 "dir"</span><br><span class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">command</span> line 右邊想顯示的內容(狀態、RAM、CPU、時間)</span></span><br><span class="line">POWERLEVEL9K_RIGHT_PROMPT_ELEMENTS=(status ram load time)</span><br><span class="line">POWERLEVEL9K_PROMPT_ON_NEWLINE=true</span><br></pre></td></tr></table></figure><p>其他顯示指令可參考 <a href="https://github.com/bhilburn/powerlevel9k#available-prompt-segments" target="_blank" rel="noopener">Available Prompt Segments</a></p><h2 id="Plugins"><a href="#Plugins" class="headerlink" title="Plugins"></a>Plugins</h2><h3 id="安裝-zsh-completions"><a href="#安裝-zsh-completions" class="headerlink" title="安裝 zsh-completions"></a>安裝 zsh-completions</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> brew install zsh-completions</span></span><br><span class="line"></span><br><span class="line">Updating Homebrew...</span><br><span class="line">==&gt; Auto-updated Homebrew!</span><br><span class="line">Updated 2 taps (homebrew/core, homebrew/cask).</span><br><span class="line">==&gt; Updated Formulae</span><br><span class="line">ark               bullet            hapi-fhir-cli     nano              prettier          rustup-init       vips</span><br><span class="line">bind              convox            libphonenumber    ntopng            qt                skaffold          xcodegen</span><br><span class="line"></span><br><span class="line">==&gt; Downloading https://github.com/zsh-users/zsh-completions/archive/0.28.0.tar.gz</span><br><span class="line">==&gt; Downloading from https://codeload.github.com/zsh-users/zsh-completions/tar.gz/0.28.0</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">####################################################################### 100.0%</span></span></span><br><span class="line">==&gt; Caveats</span><br><span class="line">To activate these completions, add the following to your .zshrc:</span><br><span class="line"></span><br><span class="line">  fpath=(/usr/local/share/zsh-completions $fpath)</span><br><span class="line"></span><br><span class="line">You may also need to force rebuild `zcompdump`:</span><br><span class="line"></span><br><span class="line">  rm -f ~/.zcompdump; compinit</span><br><span class="line"></span><br><span class="line">Additionally, if you receive "zsh compinit: insecure directories" warnings when attempting</span><br><span class="line">to load these completions, you may need to run this:</span><br><span class="line"></span><br><span class="line">  chmod go-w '/usr/local/share'</span><br><span class="line">==&gt; Summary</span><br><span class="line">🍺  /usr/local/Cellar/zsh-completions/0.28.0: 145 files, 1MB, built in 9 seconds</span><br></pre></td></tr></table></figure><p>修改 <code>~/.zshrc</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">ZSH=$HOME/.oh-my-zsh</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> zsh-completions</span></span><br><span class="line">fpath=(/usr/local/share/zsh-completions $fpath)</span><br></pre></td></tr></table></figure><p>Rebuild <code>.zcompdump</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> rm -f ~/.zcompdump; compinit</span></span><br></pre></td></tr></table></figure><h3 id="安裝-zsh-autosuggestions"><a href="#安裝-zsh-autosuggestions" class="headerlink" title="安裝 zsh-autosuggestions"></a>安裝 zsh-autosuggestions</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">clone</span> https://github.com/zsh-users/zsh-autosuggestions <span class="variable">$&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;</span>/plugins/zsh-autosuggestions</span></span><br><span class="line"></span><br><span class="line">Cloning into '/Users/jerry/.oh-my-zsh/custom/plugins/zsh-autosuggestions'...</span><br><span class="line">remote: Counting objects: 1783, done.</span><br><span class="line">remote: Total 1783 (delta 0), reused 0 (delta 0), pack-reused 1783</span><br><span class="line">Receiving objects: 100% (1783/1783), 394.96 KiB | 267.00 KiB/s, done.</span><br><span class="line">Resolving deltas: 100% (1126/1126), done.</span><br></pre></td></tr></table></figure><p><a href="https://github.com/zsh-users/zsh-autosuggestions" target="_blank" rel="noopener">zsh-users/zsh-autosuggestions</a> - Fish-like autosuggestions for zsh</p><h3 id="安裝-autojump"><a href="#安裝-autojump" class="headerlink" title="安裝 autojump"></a>安裝 autojump</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> brew install autojump</span></span><br><span class="line"></span><br><span class="line">Updating Homebrew...</span><br><span class="line">==&gt; Auto-updated Homebrew!</span><br><span class="line">Updated 2 taps (homebrew/core, homebrew/cask).</span><br><span class="line">==&gt; Updated Formulae</span><br><span class="line">git-archive-all</span><br><span class="line"></span><br><span class="line">==&gt; Downloading https://homebrew.bintray.com/bottles/autojump-22.5.1.high_sierra.bottle.tar.gz</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">####################################################################### 100.0%</span></span></span><br><span class="line">==&gt; Pouring autojump-22.5.1.high_sierra.bottle.tar.gz</span><br><span class="line">==&gt; Caveats</span><br><span class="line">Add the following line to your ~/.bash_profile or ~/.zshrc file (and remember</span><br><span class="line">to source the file to update your current session):</span><br><span class="line">  [ -f /usr/local/etc/profile.d/autojump.sh ] &amp;&amp; . /usr/local/etc/profile.d/autojump.sh</span><br><span class="line"></span><br><span class="line">If you use the Fish shell then add the following line to your ~/.config/fish/config.fish:</span><br><span class="line">  [ -f /usr/local/share/autojump/autojump.fish ]; and source /usr/local/share/autojump/autojump.fish</span><br><span class="line"></span><br><span class="line">zsh completions have been installed to:</span><br><span class="line">  /usr/local/share/zsh/site-functions</span><br><span class="line">==&gt; Summary</span><br><span class="line">🍺  /usr/local/Cellar/autojump/22.5.1: 20 files, 168.2KB</span><br></pre></td></tr></table></figure><p><a href="https://github.com/wting" target="_blank" rel="noopener">wting/autojump</a> - A cd command that learns - easily navigate directories from the command line</p><h3 id="啟用-plugin"><a href="#啟用-plugin" class="headerlink" title="啟用 plugin"></a>啟用 plugin</h3><p>oh-my-zsh 內建的 plugin 都放在 <code>~/.oh-my-zsh/plugins</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ls ~/.oh-my-zsh/plugins</span></span><br></pre></td></tr></table></figure><p>修改 <code>.zshrc</code> </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plugins=(git autojump zsh-autosuggestions)</span><br></pre></td></tr></table></figure><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul><li><a href="https://medium.com/statementdog-engineering/prettify-your-zsh-command-line-prompt-3ca2acc967f" target="_blank" rel="noopener">超簡單！十分鐘打造漂亮又好用的 zsh command line 環境</a></li><li><a href="https://andy6804tw.github.io/2018/01/01/iterm2-zsh-intro/#%E5%A5%97%E7%94%A8%E4%B8%BB%E9%A1%8C" target="_blank" rel="noopener">macOS好用的終端機(iterm2+zsh+oh-my-zsh)</a></li><li><a href="http://huli.logdown.com/posts/402147-iterm2-zsh-better-environment" target="_blank" rel="noopener">[心得] iTerm2 + zsh，打造更好的工作環境</a></li><li><a href="https://code.tutsplus.com/tutorials/how-to-customize-your-command-prompt--net-24083" target="_blank" rel="noopener">How to Customize Your Command Prompt</a></li><li>oh-my-zsh 的 <a href="https://github.com/robbyrussell/oh-my-zsh/wiki/themes" target="_blank" rel="noopener">Themes</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://www.iterm2.com/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;iTerm2&lt;/a&gt; 是 macOS 下好用的 terminal 軟體，在 iTerm2 下安裝 &lt;a href=&quot;https://github.com/robbyrussell/oh-my-zsh&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;oh-my-zsh&lt;/a&gt; 以打造個人專屬酷炫好用的 zsh command line 環境 :)&lt;/p&gt;
    
    </summary>
    
      <category term="macos" scheme="http://codefun.tw/categories/macos/"/>
    
    
      <category term="iterm2" scheme="http://codefun.tw/tags/iterm2/"/>
    
      <category term="zsh" scheme="http://codefun.tw/tags/zsh/"/>
    
      <category term="oh-my-zsh" scheme="http://codefun.tw/tags/oh-my-zsh/"/>
    
  </entry>
  
  <entry>
    <title>使用 git mv 解決 macOS 預設對檔案不分大小寫問題</title>
    <link href="http://codefun.tw/2018/2018030201-macos-correct-case-sentitive.html"/>
    <id>http://codefun.tw/2018/2018030201-macos-correct-case-sentitive.html</id>
    <published>2018-03-02T02:14:53.000Z</published>
    <updated>2018-03-02T02:14:53.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>macOS 的 Disk 預設對檔案是不分大小寫的，當程式部署到 linux 下，才會知道有大小寫錯誤問題。</p> <a id="more"></a><h2 id="使用-git-mv-指令進行修正"><a href="#使用-git-mv-指令進行修正" class="headerlink" title="使用 git mv 指令進行修正"></a>使用 <code>git mv</code> 指令進行修正</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># way 1</span><br><span class="line">$ git mv --force filename Filename</span><br><span class="line">$ git commit -m &quot;Set correct case for filename&quot;</span><br><span class="line"></span><br><span class="line"># way 2</span><br><span class="line">$ git mv filename tmp_filename</span><br><span class="line">$ git mv tmp_filename Filename</span><br><span class="line">$ git commit -m &quot;Set correct case for filename&quot;</span><br></pre></td></tr></table></figure><h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul><li><a href="https://coderwall.com/p/mgi8ja/case-sensitive-git-in-mac-os-x-like-a-pro" target="_blank" rel="noopener">Case-sensitive git in Mac OS X like a Pro</a> - 文章有提到，外接一個 disk，並且格式化成 “Mac OS Extended (Case-sensitive, Journaled)”，就不會有這樣的困擾。</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;macOS 的 Disk 預設對檔案是不分大小寫的，當程式部署到 linux 下，才會知道有大小寫錯誤問題。&lt;/p&gt;
    
    </summary>
    
      <category term="macos" scheme="http://codefun.tw/categories/macos/"/>
    
    
      <category term="git" scheme="http://codefun.tw/tags/git/"/>
    
      <category term="macos" scheme="http://codefun.tw/tags/macos/"/>
    
  </entry>
  
  <entry>
    <title>docker-compose 開發環境，如何建立 storage 的 symbolic link？</title>
    <link href="http://codefun.tw/2017/2017110701-create-laravel-storage-symbolic-link-docker.html"/>
    <id>http://codefun.tw/2017/2017110701-create-laravel-storage-symbolic-link-docker.html</id>
    <published>2017-11-07T07:10:08.000Z</published>
    <updated>2017-11-07T07:10:08.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>團隊使用 <code>docker-compose</code> 建立開發環境，方便前端工程師在不安裝 PHP 及 MySQL 的情況下也可以進行基於 Laravel framework 的專案開發。<br>但問題剛好發生在使用 <a href="https://laravel.com/docs/5.5/filesystem" target="_blank" rel="noopener">Laravel File Storage</a> 存放的圖片檔，無法通過 Browser 瀏覽。查到的原因是 <a href="https://laravel.com/docs/5.5/filesystem#configuration" target="_blank" rel="noopener"><code>storage</code></a> 這個 symbolic link 的指向錯誤了。<br>目前找到的解法是手動進入到 docker 的 nginx container 後再建立。而<strong>不是</strong>直接使用 <code>$ php artisan storage:link</code></p> <a id="more"></a><h2 id="操作步驟"><a href="#操作步驟" class="headerlink" title="操作步驟"></a>操作步驟</h2><ol><li><p>移除工作目錄下的 <code>public/storage</code> 這個 symbolic link</p></li><li><p>找到 docker 的 nginx 容器 CONTAINER ID</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ docker ps</span><br><span class="line">CONTAINER ID        IMAGE                           COMMAND                  CREATED             STATUS              PORTS                    NAMES</span><br><span class="line">baba480659ee        nginx:latest                    &quot;nginx -g &apos;daemon ...&quot;   16 minutes ago      Up 16 minutes       0.0.0.0:80-&gt;80/tcp       hpclaravelpaganinipluscom_web_1</span><br></pre></td></tr></table></figure></li><li><p>進入 docker 的 nginx 容器</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo docker exec -ti &#123;CONTAINER ID&#125; bash</span><br></pre></td></tr></table></figure></li><li><p>在 docker 的 nginx 容器執行 symbolic link 的建立</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ln -s /code/storage/app/public /code/public/storage</span><br></pre></td></tr></table></figure></li><li><p>檢查建立的結果是否正確</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ ls -l</span><br><span class="line">drwxr-xr-x 13 root root  442 Nov  7 06:28 assets</span><br><span class="line">drwxr-xr-x 24 root root  816 Oct 26 04:08 css</span><br><span class="line">-rw-r--r--  1 root root 5430 Oct 26 04:08 favicon.ico</span><br><span class="line">drwxr-xr-x 13 root root  442 Nov  7 04:49 images</span><br><span class="line">-rw-r--r--  1 root root 1823 Sep 19 04:07 index.php</span><br><span class="line">drwxr-xr-x  6 root root  204 Oct 26 04:08 js</span><br><span class="line">-rw-r--r--  1 root root   24 Sep 19 04:07 robots.txt</span><br><span class="line">lrwxrwxrwx  1 root root   24 Nov  7 06:31 storage -&gt; /code/storage/app/public</span><br><span class="line">drwxr-xr-x 10 root root  340 Oct 26 04:08 vendor</span><br><span class="line">-rw-r--r--  1 root root  914 Sep 19 04:07 web.config</span><br><span class="line">drwxr-xr-x  5 root root  170 Nov  7 01:32 yaml</span><br></pre></td></tr></table></figure></li><li><p>Browser 開啟圖片網站，例如</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://localhost/storage/4BWGjwW0p6iENjseaHZphhorGBUJTPkd888oiMNh.jpeg</span><br></pre></td></tr></table></figure></li></ol><h2 id="參考資料-References"><a href="#參考資料-References" class="headerlink" title="參考資料  References"></a>參考資料  References</h2><ul><li><a href="https://laravel.com/docs/5.5/filesystem" target="_blank" rel="noopener">Laravel File Storage</a></li><li><a href="https://philipzheng.gitbooks.io/docker_practice/content/container/enter.html" target="_blank" rel="noopener">《Docker —— 從入門到實踐》正體中文版 - 進入容器</a></li><li><a href="https://docs.docker.com/engine/reference/commandline/exec/#run-docker-exec-on-a-running-container" target="_blank" rel="noopener">docker docs - Run docker exec on a running container</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h2&gt;&lt;p&gt;團隊使用 &lt;code&gt;docker-compose&lt;/code&gt; 建立開發環境，方便前端工程師在不安裝 PHP 及 MySQL 的情況下也可以進行基於 Laravel framework 的專案開發。&lt;br&gt;但問題剛好發生在使用 &lt;a href=&quot;https://laravel.com/docs/5.5/filesystem&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Laravel File Storage&lt;/a&gt; 存放的圖片檔，無法通過 Browser 瀏覽。查到的原因是 &lt;a href=&quot;https://laravel.com/docs/5.5/filesystem#configuration&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;&lt;code&gt;storage&lt;/code&gt;&lt;/a&gt; 這個 symbolic link 的指向錯誤了。&lt;br&gt;目前找到的解法是手動進入到 docker 的 nginx container 後再建立。而&lt;strong&gt;不是&lt;/strong&gt;直接使用 &lt;code&gt;$ php artisan storage:link&lt;/code&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="docker" scheme="http://codefun.tw/categories/docker/"/>
    
    
      <category term="docker" scheme="http://codefun.tw/tags/docker/"/>
    
      <category term="laravel" scheme="http://codefun.tw/tags/laravel/"/>
    
  </entry>
  
  <entry>
    <title>在 vs code 使用 php cs fixer 進行 coding style 的格式修正</title>
    <link href="http://codefun.tw/2017/2017102302-vscode-extension-php-cs-fixer.html"/>
    <id>http://codefun.tw/2017/2017102302-vscode-extension-php-cs-fixer.html</id>
    <published>2017-10-23T12:17:00.000Z</published>
    <updated>2019-08-07T01:26:30.000Z</updated>
    
    <content type="html"><![CDATA[<p>在 vs code 中，使用 PSR1、PSR2 及 Symfony 的 Coding Style 進行格式修正。</p><h2 id="安裝"><a href="#安裝" class="headerlink" title="安裝"></a>安裝</h2><ol><li><p>在 command line 使用 homebrew 安裝 php cs fixer</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ brew install php-cs-fixer</span><br></pre></td></tr></table></figure><a id="more"></a></li><li><p>在 vs code 安裝 extension - 由 junstyle 開發的 php cs fixer，extension_id <code>junstyle.php-cs-fixer</code></p></li><li>其他安裝方式可參考 <a href="https://github.com/FriendsOfPHP/PHP-CS-Fixer#installation" target="_blank" rel="noopener">Install guide</a></li></ol><h2 id="設定"><a href="#設定" class="headerlink" title="設定"></a>設定</h2><ol><li><p>快速鍵 <code>cmd + shift + p</code> 後輸入 <code>workspace settings</code> 貼上</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"php.suggest.basic"</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="attr">"php.validate.executablePath"</span>: <span class="string">"php"</span>,</span><br><span class="line">  <span class="attr">"php-cs-fixer.executablePath"</span>: <span class="string">"php-cs-fixer"</span>,</span><br><span class="line">  "php-cs-fixer.executablePathWindows": "",   //eg: php-cs-fixer.bat</span><br><span class="line">  "php-cs-fixer.onsave": false,</span><br><span class="line">  "php-cs-fixer.rules": "",</span><br><span class="line">  "php-cs-fixer.config": ".php_cs",</span><br><span class="line">  "php-cs-fixer.allowRisky": false,</span><br><span class="line">  "php-cs-fixer.pathMode": "override",</span><br><span class="line">  "php-cs-fixer.exclude": [],</span><br><span class="line">  "php-cs-fixer.autoFixByBracket": true,</span><br><span class="line">  "php-cs-fixer.autoFixBySemicolon": false,</span><br><span class="line">  "php-cs-fixer.formatHtml": false,</span><br><span class="line">  "php-cs-fixer.documentFormattingProvider": true,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> 說明：</p><ul><li><code>&quot;php-cs-fixer.onsave&quot;: true,</code>: true 為存檔時即執行。我個人習慣是設定成 false，在確定程式沒問題後才執行檢查，因此必須按右鍵，再從選單中點擊「Format Document」進行檢查。</li><li><code>&quot;php-cs-fixer.rules&quot;: &quot;&quot;,</code>: 留空字串</li><li><code>&quot;php-cs-fixer.config&quot;: &quot;.php_cs&quot;,</code>: 使用 project root path 下的 config file 最為 formating 基準</li></ul></li><li><p>在 project root 新增檔案 <code>.php_cs</code>，內容如下</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line">$header = <span class="string">&lt;&lt;&lt;'EOF'</span></span><br><span class="line"><span class="string">This file is part of PHP CS Fixer.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">(c) Fabien Potencier &lt;fabien@symfony.com&gt;</span></span><br><span class="line"><span class="string">    Dariusz Rumiński &lt;dariusz.ruminski@gmail.com&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">This source file is subject to the MIT license that is bundled</span></span><br><span class="line"><span class="string">with this source code in the file LICENSE.</span></span><br><span class="line"><span class="string">EOF;</span></span><br><span class="line"></span><br><span class="line">$finder = PhpCsFixer\Finder::create()</span><br><span class="line">    -&gt;exclude(<span class="string">'tests/Fixtures'</span>)</span><br><span class="line">    -&gt;in(<span class="keyword">__DIR__</span>)</span><br><span class="line">;</span><br><span class="line"></span><br><span class="line">$config = PhpCsFixer\Config::create()</span><br><span class="line">    -&gt;setRiskyAllowed(<span class="keyword">true</span>)</span><br><span class="line">    -&gt;setRules([</span><br><span class="line">        <span class="string">'@PHP56Migration'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'@PHPUnit60Migration:risky'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'@PSR1'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'@PSR2'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'@Symfony'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'@Symfony:risky'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'align_multiline_comment'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'array_indentation'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'array_syntax'</span> =&gt; [<span class="string">'syntax'</span> =&gt; <span class="string">'short'</span>],</span><br><span class="line">        <span class="string">'blank_line_before_statement'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'binary_operator_spaces'</span> =&gt; [</span><br><span class="line">            <span class="string">'align_double_arrow'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">            <span class="string">'align_equals'</span> =&gt; <span class="keyword">false</span>,</span><br><span class="line">        ],</span><br><span class="line">        <span class="string">'combine_consecutive_issets'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'combine_consecutive_unsets'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'comment_to_phpdoc'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'compact_nullable_typehint'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'concat_space'</span> =&gt; [<span class="string">'spacing'</span> =&gt; <span class="string">'one'</span>],</span><br><span class="line">        <span class="string">'escape_implicit_backslashes'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'explicit_indirect_variable'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'explicit_string_variable'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'final_internal_class'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'fully_qualified_strict_types'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'function_to_constant'</span> =&gt; [<span class="string">'functions'</span> =&gt; [<span class="string">'get_class'</span>, <span class="string">'get_called_class'</span>, <span class="string">'php_sapi_name'</span>, <span class="string">'phpversion'</span>, <span class="string">'pi'</span>]],</span><br><span class="line">        <span class="comment">//'header_comment' =&gt; ['header' =&gt; $header],</span></span><br><span class="line">        <span class="string">'heredoc_to_nowdoc'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'increment_style'</span> =&gt; <span class="keyword">false</span>,</span><br><span class="line">        <span class="string">'list_syntax'</span> =&gt; [<span class="string">'syntax'</span> =&gt; <span class="string">'short'</span>],</span><br><span class="line">        <span class="string">'logical_operators'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'method_argument_space'</span> =&gt; [<span class="string">'on_multiline'</span> =&gt; <span class="string">'ensure_fully_multiline'</span>],</span><br><span class="line">        <span class="string">'method_chaining_indentation'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'multiline_comment_opening_closing'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'no_alternative_syntax'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'no_binary_string'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'no_extra_blank_lines'</span> =&gt; [<span class="string">'tokens'</span> =&gt; [<span class="string">'break'</span>, <span class="string">'continue'</span>, <span class="string">'extra'</span>, <span class="string">'return'</span>, <span class="string">'throw'</span>, <span class="string">'use'</span>, <span class="string">'parenthesis_brace_block'</span>, <span class="string">'square_brace_block'</span>, <span class="string">'curly_brace_block'</span>]],</span><br><span class="line">        <span class="string">'no_null_property_initialization'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'no_short_echo_tag'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'no_superfluous_elseif'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'no_unneeded_curly_braces'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'no_unneeded_final_method'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'no_unreachable_default_argument_value'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'no_unset_on_property'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'no_useless_else'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'no_useless_return'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'ordered_class_elements'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'ordered_imports'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'php_unit_internal_class'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'php_unit_ordered_covers'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'php_unit_set_up_tear_down_visibility'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'php_unit_strict'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'php_unit_test_annotation'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'php_unit_test_case_static_method_calls'</span> =&gt; [<span class="string">'call_type'</span> =&gt; <span class="string">'this'</span>],</span><br><span class="line">        <span class="string">'php_unit_test_class_requires_covers'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'phpdoc_add_missing_param_annotation'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'phpdoc_order'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'phpdoc_trim_consecutive_blank_line_separation'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'phpdoc_types_order'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'return_assignment'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'semicolon_after_instruction'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'single_line_comment_style'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'strict_comparison'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'strict_param'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'string_line_ending'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'ternary_operator_spaces'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'trim_array_spaces'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'unary_operator_spaces'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'yoda_style'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">        <span class="string">'whitespace_after_comma_in_array'</span> =&gt; <span class="keyword">true</span>,</span><br><span class="line">    ])</span><br><span class="line">    -&gt;setFinder($finder)</span><br><span class="line">;</span><br><span class="line"></span><br><span class="line"><span class="comment">// special handling of fabbot.io service if it's using too old PHP CS Fixer version</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">false</span> !== getenv(<span class="string">'FABBOT_IO'</span>)) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        PhpCsFixer\FixerFactory::create()</span><br><span class="line">            -&gt;registerBuiltInFixers()</span><br><span class="line">            -&gt;registerCustomFixers($config-&gt;getCustomFixers())</span><br><span class="line">            -&gt;useRuleSet(<span class="keyword">new</span> PhpCsFixer\RuleSet($config-&gt;getRules()));</span><br><span class="line">    &#125; <span class="keyword">catch</span> (PhpCsFixer\ConfigurationException\InvalidConfigurationException $e) &#123;</span><br><span class="line">        $config-&gt;setRules([]);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (UnexpectedValueException $e) &#123;</span><br><span class="line">        $config-&gt;setRules([]);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (InvalidArgumentException $e) &#123;</span><br><span class="line">        $config-&gt;setRules([]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> $config;</span><br></pre></td></tr></table></figure><p> 說明：</p><ul><li>加入 <code>&#39;@PSR1&#39; =&gt; true,</code> 及 <code>&#39;@Symfony&#39; =&gt; true,</code></li></ul></li><li><p>重新啟動 vs code（建議使用 <code>cmd + Q</code>，再重新啟動）</p></li><li>編輯檔案後存檔，即自動執行 php-cs-fixer 進行 coding style 修正</li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;在 vs code 中，使用 PSR1、PSR2 及 Symfony 的 Coding Style 進行格式修正。&lt;/p&gt;
&lt;h2 id=&quot;安裝&quot;&gt;&lt;a href=&quot;#安裝&quot; class=&quot;headerlink&quot; title=&quot;安裝&quot;&gt;&lt;/a&gt;安裝&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;在 command line 使用 homebrew 安裝 php cs fixer&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ brew install php-cs-fixer&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="editor" scheme="http://codefun.tw/categories/editor/"/>
    
    
      <category term="vscode" scheme="http://codefun.tw/tags/vscode/"/>
    
      <category term="extensions" scheme="http://codefun.tw/tags/extensions/"/>
    
      <category term="php cs fixer" scheme="http://codefun.tw/tags/php-cs-fixer/"/>
    
      <category term="coding style" scheme="http://codefun.tw/tags/coding-style/"/>
    
  </entry>
  
  <entry>
    <title>管理或分享 vs code 的 workspace extensions</title>
    <link href="http://codefun.tw/2017/2017102301-vscode-workspace-recommended-extensions.html"/>
    <id>http://codefun.tw/2017/2017102301-vscode-workspace-recommended-extensions.html</id>
    <published>2017-10-23T10:24:24.000Z</published>
    <updated>2020-06-24T01:00:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>多人開發使用 vs code 當成預設的 editor 時，透過分享 <code>Workspace Recommended Extensions</code> 的方式讓大家都使用同樣的 extension 達成開發或檢查的一致性。</p> <a id="more"></a><h2 id="列出已經安裝的-extensions"><a href="#列出已經安裝的-extensions" class="headerlink" title="列出已經安裝的 extensions"></a>列出已經安裝的 extensions</h2><p>Command line 執行<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ code --list-extensions</span><br></pre></td></tr></table></figure></p><p>結果</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">2gua.rainbow-brackets</span><br><span class="line">alefragnani.project-manager</span><br><span class="line">alexdima.copy-relative-path</span><br><span class="line">apility.beautify-blade</span><br><span class="line">batisteo.vscode-django</span><br><span class="line">bmewburn.vscode-intelephense-client</span><br><span class="line">christian-kohler.npm-intellisense</span><br><span class="line">christian-kohler.path-intellisense</span><br><span class="line">cmstead.jsrefactor</span><br><span class="line">codezombiech.gitignore</span><br><span class="line">DavidAnson.vscode-markdownlint</span><br><span class="line">dbaeumer.vscode-eslint</span><br><span class="line">donjayamanne.githistory</span><br><span class="line">dracula-theme.theme-dracula</span><br><span class="line">eamodio.gitlens</span><br><span class="line">EditorConfig.EditorConfig</span><br><span class="line">eg2.vscode-npm-script</span><br><span class="line">felipecaputo.git-project-manager</span><br><span class="line">felixfbecker.php-debug</span><br><span class="line">formulahendry.auto-close-tag</span><br><span class="line">formulahendry.auto-rename-tag</span><br><span class="line">golang.Go</span><br><span class="line">henriiik.docker-linter</span><br><span class="line">HookyQR.beautify</span><br><span class="line">humao.rest-client</span><br><span class="line">janisdd.vscode-edit-csv</span><br><span class="line">JerryHong.autofilename</span><br><span class="line">joelday.docthis</span><br><span class="line">junstyle.php-cs-fixer</span><br><span class="line">magicstack.MagicPython</span><br><span class="line">marclipovsky.string-manipulation</span><br><span class="line">mikestead.dotenv</span><br><span class="line">ms-azuretools.vscode-docker</span><br><span class="line">ms-python.python</span><br><span class="line">neilbrayfield.php-docblocker</span><br><span class="line">nhoizey.gremlins</span><br><span class="line">octref.vetur</span><br><span class="line">oderwat.indent-rainbow</span><br><span class="line">odubuc.mysql-inline-decorator</span><br><span class="line">onecentlin.laravel-blade</span><br><span class="line">onecentlin.laravel5-snippets</span><br><span class="line">PKief.material-icon-theme</span><br><span class="line">quicktype.quicktype</span><br><span class="line">redhat.vscode-yaml</span><br><span class="line">richie5um2.vscode-sort-json</span><br><span class="line">robinbentley.sass-indented</span><br><span class="line">shardulm94.trailing-spaces</span><br><span class="line">shd101wyy.markdown-preview-enhanced</span><br><span class="line">SirTori.indenticator</span><br><span class="line">streetsidesoftware.code-spell-checker</span><br><span class="line">Tyriar.sort-lines</span><br><span class="line">VisualStudioExptTeam.vscodeintellicode</span><br><span class="line">vscode-icons-team.vscode-icons</span><br><span class="line">wholroyd.jinja</span><br><span class="line">wix.vscode-import-cost</span><br><span class="line">wmaurer.change-case</span><br><span class="line">wwm.better-align</span><br><span class="line">xabikos.JavaScriptSnippets</span><br><span class="line">yomed.theme-dracula-soft</span><br><span class="line">yzhang.markdown-all-in-one</span><br></pre></td></tr></table></figure><p>將列出的 extensions 全部複製起來，後續會用到。</p><h2 id="在-workspace-匯入及安裝-extensions"><a href="#在-workspace-匯入及安裝-extensions" class="headerlink" title="在 workspace 匯入及安裝 extensions"></a>在 workspace 匯入及安裝 extensions</h2><ol><li>打開 vs code 按下快速鍵 <code>command + shift + p</code></li><li>在跳出的對話框命令列後輸入或找到 <code>&gt;Extensions: Configure Recommended Extensions (Workspace Folder)</code></li><li>接著修改開啟的 <code>.vscode/extensions.json</code> 檔案，以 JOSN 格式編輯貼上剛才複製的 extensions<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  // See http://go.microsoft.com/fwlink/?LinkId=827846 to learn about workspace recommendations.</span><br><span class="line">  // Extension identifier format: $&#123;publisher&#125;.$&#123;name&#125;. Example: vscode.csharp</span><br><span class="line">  // List of extensions which should be recommended for users of this workspace.</span><br><span class="line">  &quot;recommendations&quot;: [</span><br><span class="line">    &quot;2gua.rainbow-brackets&quot;,</span><br><span class="line">    &quot;alefragnani.project-manager&quot;,</span><br><span class="line">    &quot;alexdima.copy-relative-path&quot;,</span><br><span class="line">    &quot;apility.beautify-blade&quot;,</span><br><span class="line">    &quot;batisteo.vscode-django&quot;,</span><br><span class="line">    &quot;bmewburn.vscode-intelephense-client&quot;,</span><br><span class="line">    &quot;christian-kohler.npm-intellisense&quot;,</span><br><span class="line">    &quot;christian-kohler.path-intellisense&quot;,</span><br><span class="line">    &quot;cmstead.jsrefactor&quot;,</span><br><span class="line">    &quot;codezombiech.gitignore&quot;,</span><br><span class="line">    &quot;DavidAnson.vscode-markdownlint&quot;,</span><br><span class="line">    &quot;dbaeumer.vscode-eslint&quot;,</span><br><span class="line">    &quot;donjayamanne.githistory&quot;,</span><br><span class="line">    &quot;dracula-theme.theme-dracula&quot;,</span><br><span class="line">    &quot;eamodio.gitlens&quot;,</span><br><span class="line">    &quot;EditorConfig.EditorConfig&quot;,</span><br><span class="line">    &quot;eg2.vscode-npm-script&quot;,</span><br><span class="line">    &quot;felipecaputo.git-project-manager&quot;,</span><br><span class="line">    &quot;felixfbecker.php-debug&quot;,</span><br><span class="line">    &quot;formulahendry.auto-close-tag&quot;,</span><br><span class="line">    &quot;formulahendry.auto-rename-tag&quot;,</span><br><span class="line">    &quot;golang.Go&quot;,</span><br><span class="line">    &quot;henriiik.docker-linter&quot;,</span><br><span class="line">    &quot;HookyQR.beautify&quot;,</span><br><span class="line">    &quot;humao.rest-client&quot;,</span><br><span class="line">    &quot;janisdd.vscode-edit-csv&quot;,</span><br><span class="line">    &quot;JerryHong.autofilename&quot;,</span><br><span class="line">    &quot;joelday.docthis&quot;,</span><br><span class="line">    &quot;junstyle.php-cs-fixer&quot;,</span><br><span class="line">    &quot;magicstack.MagicPython&quot;,</span><br><span class="line">    &quot;marclipovsky.string-manipulation&quot;,</span><br><span class="line">    &quot;mikestead.dotenv&quot;,</span><br><span class="line">    &quot;ms-azuretools.vscode-docker&quot;,</span><br><span class="line">    &quot;ms-python.python&quot;,</span><br><span class="line">    &quot;neilbrayfield.php-docblocker&quot;,</span><br><span class="line">    &quot;nhoizey.gremlins&quot;,</span><br><span class="line">    &quot;octref.vetur&quot;,</span><br><span class="line">    &quot;oderwat.indent-rainbow&quot;,</span><br><span class="line">    &quot;odubuc.mysql-inline-decorator&quot;,</span><br><span class="line">    &quot;onecentlin.laravel-blade&quot;,</span><br><span class="line">    &quot;onecentlin.laravel5-snippets&quot;,</span><br><span class="line">    &quot;PKief.material-icon-theme&quot;,</span><br><span class="line">    &quot;quicktype.quicktype&quot;,</span><br><span class="line">    &quot;redhat.vscode-yaml&quot;,</span><br><span class="line">    &quot;richie5um2.vscode-sort-json&quot;,</span><br><span class="line">    &quot;robinbentley.sass-indented&quot;,</span><br><span class="line">    &quot;shardulm94.trailing-spaces&quot;,</span><br><span class="line">    &quot;shd101wyy.markdown-preview-enhanced&quot;,</span><br><span class="line">    &quot;SirTori.indenticator&quot;,</span><br><span class="line">    &quot;streetsidesoftware.code-spell-checker&quot;,</span><br><span class="line">    &quot;Tyriar.sort-lines&quot;,</span><br><span class="line">    &quot;VisualStudioExptTeam.vscodeintellicode&quot;,</span><br><span class="line">    &quot;vscode-icons-team.vscode-icons&quot;,</span><br><span class="line">    &quot;wholroyd.jinja&quot;,</span><br><span class="line">    &quot;wix.vscode-import-cost&quot;,</span><br><span class="line">    &quot;wmaurer.change-case&quot;,</span><br><span class="line">    &quot;wwm.better-align&quot;,</span><br><span class="line">    &quot;xabikos.JavaScriptSnippets&quot;,</span><br><span class="line">    &quot;yomed.theme-dracula-soft&quot;,</span><br><span class="line">    &quot;yzhang.markdown-all-in-one&quot;</span><br><span class="line">  ],</span><br><span class="line">  // List of extensions recommended by VS Code that should not be recommended for users of this workspace.</span><br><span class="line">  &quot;unwantedRecommendations&quot;: [</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h3 id="安裝-Recommended-Extensions"><a href="#安裝-Recommended-Extensions" class="headerlink" title="安裝 Recommended Extensions"></a>安裝 Recommended Extensions</h3><p>點擊左側 <code>EXPLOER</code> 選單 ICON 的 <code>Extensions</code>（或快速鍵 <code>shift + command + x</code>），在展開的清單視窗右上角點擊 <code>...</code> 圖示，選取 <code>Show Recommended Extensions</code>，然後挑選想要的 extension 進行安裝。也可以全部安裝後，再把不想使用的 extension disable :)</p><h3 id="設定-Workspace-Settings"><a href="#設定-Workspace-Settings" class="headerlink" title="設定 Workspace Settings"></a>設定 Workspace Settings</h3><ol><li>打開 vs code 按下快速鍵 <code>command + shift + p</code></li><li>在跳出的對話框命令列後輸入或找到 <code>&gt;Preferences: Open User Settings</code></li><li>點擊搜尋列下方的 <code>...</code> 圖示，並選取 「Open settings.json」，即可進行編輯</li></ol><h3 id="Extensions-的安裝路徑"><a href="#Extensions-的安裝路徑" class="headerlink" title="Extensions 的安裝路徑"></a>Extensions 的安裝路徑</h3><ul><li><strong>Windows</strong> <code>%USERPROFILE%\.vscode\extensions</code></li><li><strong>Mac</strong> <code>~/.vscode/extensions</code></li><li><strong>Linux</strong> <code>~/.vscode/extensions</code></li></ul><h2 id="設定-User-Settings"><a href="#設定-User-Settings" class="headerlink" title="設定 User Settings"></a>設定 User Settings</h2><ol><li>打開 vs code 按下快速鍵 <code>command + shift + p</code></li><li>在跳出的對話框命令列後輸入或找到 <code>&gt;Preferences: Open User Settings</code></li><li>點擊搜尋列下方的 <code>...</code> 圖示，並選取 「Open settings.json」，貼上下列內容<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;auto-rename-tag.activationOnLanguage&quot;: [</span><br><span class="line">        &quot;html&quot;,</span><br><span class="line">        &quot;xml&quot;,</span><br><span class="line">        &quot;php&quot;,</span><br><span class="line">        &quot;javascript&quot;,</span><br><span class="line">        &quot;vue&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;editor.formatOnSave&quot;: false,</span><br><span class="line">    &quot;editor.minimap.enabled&quot;: false,</span><br><span class="line">    &quot;editor.minimap.renderCharacters&quot;: false,</span><br><span class="line">    &quot;editor.rulers&quot;: [</span><br><span class="line">        80,</span><br><span class="line">        120</span><br><span class="line">    ],</span><br><span class="line">    &quot;gitlens.advanced.messages&quot;: &#123;</span><br><span class="line">        &quot;suppressShowKeyBindingsNotice&quot;: true</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;prettier.singleQuote&quot;: true,</span><br><span class="line">    &quot;todo-tree.customHighlight&quot;: &#123;</span><br><span class="line">        &quot;FIXME&quot;: &#123;&#125;,</span><br><span class="line">        &quot;TODO&quot;: &#123;&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;todo-tree.defaultHighlight&quot;: &#123;</span><br><span class="line">        &quot;foreground&quot;: &quot;green&quot;,</span><br><span class="line">        &quot;type&quot;: &quot;none&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;todohighlight.include&quot;: [</span><br><span class="line">        &quot;**/*.js&quot;,</span><br><span class="line">        &quot;**/*.jsx&quot;,</span><br><span class="line">        &quot;**/*.ts&quot;,</span><br><span class="line">        &quot;**/*.tsx&quot;,</span><br><span class="line">        &quot;**/*.html&quot;,</span><br><span class="line">        &quot;**/*.php&quot;,</span><br><span class="line">        &quot;**/*.css&quot;,</span><br><span class="line">        &quot;**/*.scss&quot;,</span><br><span class="line">        &quot;**/*.cs&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;workbench.colorTheme&quot;: &quot;Dracula Soft&quot;,</span><br><span class="line">    &quot;workbench.iconTheme&quot;: &quot;vscode-icons&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h2 id="參考資料-References"><a href="#參考資料-References" class="headerlink" title="參考資料  References"></a>參考資料  References</h2><ul><li><a href="https://code.visualstudio.com/docs/editor/extension-gallery#_command-line-extension-management" target="_blank" rel="noopener">Command line extension management</a></li><li><a href="https://code.visualstudio.com/docs/editor/extension-gallery#_workspace-recommended-extensions" target="_blank" rel="noopener">Workspace Recommended Extensions</a></li><li><a href="http://www.css88.com/archives/9507" target="_blank" rel="noopener">使用顶级 VSCode 扩展来加快开发 JavaScript</a></li><li><a href="https://gist.github.com/doggy8088/6539a140f28924d3a1f053a8d3a9f49e" target="_blank" rel="noopener">Will 保哥的 VSCode 使用者設定檔</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;多人開發使用 vs code 當成預設的 editor 時，透過分享 &lt;code&gt;Workspace Recommended Extensions&lt;/code&gt; 的方式讓大家都使用同樣的 extension 達成開發或檢查的一致性。&lt;/p&gt;
    
    </summary>
    
      <category term="editor" scheme="http://codefun.tw/categories/editor/"/>
    
    
      <category term="vscode" scheme="http://codefun.tw/tags/vscode/"/>
    
      <category term="extensions" scheme="http://codefun.tw/tags/extensions/"/>
    
  </entry>
  
  <entry>
    <title>使用 EditorConfig 統一專案的 Coding Style</title>
    <link href="http://codefun.tw/2017/2017082901-editorconfig-settings.html"/>
    <id>http://codefun.tw/2017/2017082901-editorconfig-settings.html</id>
    <published>2017-08-29T01:29:00.000Z</published>
    <updated>2019-04-10T02:58:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>使用 <a href="http://editorconfig.org/" target="_blank" rel="noopener">EditorConfig</a> 統一專案的 Coding Style。大部分的編輯器本身或外掛都有支援 EditorConfig。</p><a id="more"></a><p>在專案根目錄下建立 <code>.editorconfig</code> 內容如下</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">root = true</span><br><span class="line"></span><br><span class="line">[*]</span><br><span class="line">charset = utf-8</span><br><span class="line">end_of_line = lf</span><br><span class="line">indent_size = 2</span><br><span class="line">indent_style = space</span><br><span class="line">insert_final_newline = true</span><br><span class="line">trim_trailing_whitespace = true</span><br><span class="line"></span><br><span class="line">[*.&#123;js,json,vue&#125;]</span><br><span class="line">indent_size = 2</span><br><span class="line">indent_style = space</span><br><span class="line"></span><br><span class="line">[*.php]</span><br><span class="line">indent_size = 4</span><br><span class="line">indent_style = space</span><br><span class="line"></span><br><span class="line">[Makefile]</span><br><span class="line">indent_size = 2</span><br><span class="line">indent_style = tab</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;使用 &lt;a href=&quot;http://editorconfig.org/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;EditorConfig&lt;/a&gt; 統一專案的 Coding Style。大部分的編輯器本身或外掛都有支援 EditorConfig。&lt;/p&gt;
    
    </summary>
    
      <category term="development" scheme="http://codefun.tw/categories/development/"/>
    
    
      <category term="coding style" scheme="http://codefun.tw/tags/coding-style/"/>
    
      <category term="editorconfig" scheme="http://codefun.tw/tags/editorconfig/"/>
    
  </entry>
  
  <entry>
    <title>Homebrew 安裝 Nginx、PHP71 筆記</title>
    <link href="http://codefun.tw/2017/2017082701-brew-install-nginx-php71-fpm.html"/>
    <id>http://codefun.tw/2017/2017082701-brew-install-nginx-php71-fpm.html</id>
    <published>2017-08-27T10:08:52.000Z</published>
    <updated>2017-08-27T10:08:52.000Z</updated>
    
    <content type="html"><![CDATA[<p>在 macOX Sierra 透過 <code>brew</code> 指令安裝 <code>php71</code>（帶有 <code>php-fpm</code>）及 <code>nginx</code>。<br>Install NGINX with PHP71 on Mac OS Sierra with Homebrew.</p><a id="more"></a><h2 id="前言-Prologue"><a href="#前言-Prologue" class="headerlink" title="前言  Prologue"></a>前言  Prologue</h2><p>臨時有需要讓 localhost 透過使用 <a href="https://ngrok.com/" target="_blank" rel="noopener">ngrok</a> 的對外服務，以測試 webhook 功能，BUT nginx 就在這個時候出問題了。<br>本來以為是用了 <a href="https://laravel.com/docs/master/valet" target="_blank" rel="noopener">Laravel Valet</a> 的關係，但即使是停用 Valet，修改 hosts 或重建 nginx.conf 都於事無補，只好從安裝 PHP 到 Nginx 重新做起。</p><h2 id="環境-Environment"><a href="#環境-Environment" class="headerlink" title="環境  Environment"></a>環境  Environment</h2><ul><li>macOS Sierra： 10.12.5</li><li>homebrew： 1.3.1</li></ul><h2 id="Install-Commandline-Tools"><a href="#Install-Commandline-Tools" class="headerlink" title="Install Commandline Tools"></a>Install Commandline Tools</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ xcode-select —install</span><br></pre></td></tr></table></figure><h2 id="Install-Homebrew"><a href="#Install-Homebrew" class="headerlink" title="Install Homebrew"></a>Install Homebrew</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;</span><br></pre></td></tr></table></figure><h3 id="Check-Installation"><a href="#Check-Installation" class="headerlink" title="Check Installation"></a>Check Installation</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ brew doctor</span><br></pre></td></tr></table></figure><h3 id="Update-Brew-and-Packages"><a href="#Update-Brew-and-Packages" class="headerlink" title="Update Brew and Packages"></a>Update Brew and Packages</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ brew update &amp;&amp; brew upgrade</span><br></pre></td></tr></table></figure><h3 id="Install-brew-services"><a href="#Install-brew-services" class="headerlink" title="Install brew services"></a>Install brew services</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ brew tap homebrew/services</span><br></pre></td></tr></table></figure><h2 id="安裝-DNSMasq"><a href="#安裝-DNSMasq" class="headerlink" title="安裝 DNSMasq"></a>安裝 DNSMasq</h2><p>DNSMasq is used to resolve all domains that end with .dev to 127.0.0.1.<br>DNSMasq 將 .env 結尾的網址對應到 127.0.0.1，就不需要再修改 <code>/etc/hosts</code> 檔案</p><h3 id="安裝-Install"><a href="#安裝-Install" class="headerlink" title="安裝  Install"></a>安裝  Install</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ brew install dnsmasq</span><br></pre></td></tr></table></figure><h3 id="配置-Configure"><a href="#配置-Configure" class="headerlink" title="配置  Configure"></a>配置  Configure</h3><p>檔案 <code>/usr/local/etc/dnsmasq.conf</code> 內容<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">address=/.dev/127.0.0.1</span><br><span class="line">listen-address=127.0.0.1</span><br></pre></td></tr></table></figure></p><p>檔案 <code>/etc/resolver/dev</code> 內容<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nameserver 127.0.0.1</span><br></pre></td></tr></table></figure></p><h3 id="start、stop、restart-DNSMasq"><a href="#start、stop、restart-DNSMasq" class="headerlink" title="start、stop、restart DNSMasq"></a><code>start</code>、<code>stop</code>、<code>restart</code> DNSMasq</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sudo brew services start dnsmasq</span><br><span class="line">$ sudo brew services stop dnsmasq</span><br><span class="line">$ sudo brew services restart dnsmasq</span><br></pre></td></tr></table></figure><h3 id="測試-Testing"><a href="#測試-Testing" class="headerlink" title="測試  Testing"></a>測試  Testing</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">$ dig testing.dev @127.0.0.1</span><br><span class="line">dig testing.dev @127.0.0.1</span><br><span class="line"></span><br><span class="line">; &lt;&lt;&gt;&gt; DiG 9.8.3-P1 &lt;&lt;&gt;&gt; testing.dev @127.0.0.1</span><br><span class="line">;; global options: +cmd</span><br><span class="line">;; Got answer:</span><br><span class="line">;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 21966</span><br><span class="line">;; flags: qr aa rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 0</span><br><span class="line"></span><br><span class="line">;; QUESTION SECTION:</span><br><span class="line">;testing.dev.           IN  A</span><br><span class="line"></span><br><span class="line">;; ANSWER SECTION:</span><br><span class="line">testing.dev.        0   IN  A   127.0.0.1</span><br><span class="line"></span><br><span class="line">;; Query time: 1 msec</span><br><span class="line">;; SERVER: 127.0.0.1#53(127.0.0.1)</span><br><span class="line">;; WHEN: Sun Aug 27 22:39:50 2017</span><br><span class="line">;; MSG SIZE  rcvd: 45</span><br></pre></td></tr></table></figure><h2 id="安裝-PHP-FPM"><a href="#安裝-PHP-FPM" class="headerlink" title="安裝 PHP-FPM"></a>安裝 PHP-FPM</h2><h3 id="Install-php71"><a href="#Install-php71" class="headerlink" title="Install php71"></a>Install php71</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">$ brew tap homebrew/dupes &amp;&amp; \</span><br><span class="line">$ brew tap homebrew/php</span><br><span class="line"></span><br><span class="line">$ brew install php71</span><br><span class="line">==&gt; Installing php71 from homebrew/php</span><br><span class="line">==&gt; Downloading https://homebrew.bintray.com/bottles-php/php71-7.1.1_12.sierra.bottle.tar.gz</span><br><span class="line">######################################################################## 100.0%</span><br><span class="line">==&gt; Pouring php71-7.1.1_12.sierra.bottle.tar.gz</span><br><span class="line">==&gt; Caveats</span><br><span class="line">The php.ini file can be found in:</span><br><span class="line">    /usr/local/etc/php/7.1/php.ini</span><br><span class="line"></span><br><span class="line">✩✩✩✩ Extensions ✩✩✩✩</span><br><span class="line"></span><br><span class="line">If you are having issues with custom extension compiling, ensure that</span><br><span class="line">you are using the brew version, by placing /usr/local/bin before /usr/sbin in your PATH:</span><br><span class="line"></span><br><span class="line">      PATH=&quot;/usr/local/bin:$PATH&quot;</span><br><span class="line"></span><br><span class="line">PHP71 Extensions will always be compiled against this PHP. Please install them</span><br><span class="line">using --without-homebrew-php to enable compiling against system PHP.</span><br><span class="line"></span><br><span class="line">✩✩✩✩ PHP CLI ✩✩✩✩</span><br><span class="line"></span><br><span class="line">If you wish to swap the PHP you use on the command line, you should add the following to ~/.bashrc,</span><br><span class="line">~/.zshrc, ~/.profile or your shell&apos;s equivalent configuration file:</span><br><span class="line"></span><br><span class="line">      export PATH=&quot;$(brew --prefix homebrew/php/php71)/bin:$PATH&quot;</span><br><span class="line"></span><br><span class="line">✩✩✩✩ FPM ✩✩✩✩</span><br><span class="line"></span><br><span class="line">To launch php-fpm on startup:</span><br><span class="line">    mkdir -p ~/Library/LaunchAgents</span><br><span class="line">    cp /usr/local/opt/php71/homebrew.mxcl.php71.plist ~/Library/LaunchAgents/</span><br><span class="line">    launchctl load -w ~/Library/LaunchAgents/homebrew.mxcl.php71.plist</span><br><span class="line"></span><br><span class="line">The control script is located at /usr/local/opt/php71/sbin/php71-fpm</span><br><span class="line"></span><br><span class="line">OS X 10.8 and newer come with php-fpm pre-installed, to ensure you are using the brew version you need to make sure /usr/local/sbin is before /usr/sbin in your PATH:</span><br><span class="line"></span><br><span class="line">  PATH=&quot;/usr/local/sbin:$PATH&quot;</span><br><span class="line"></span><br><span class="line">You may also need to edit the plist to use the correct &quot;UserName&quot;.</span><br><span class="line"></span><br><span class="line">Please note that the plist was called &apos;homebrew-php.josegonzalez.php71.plist&apos; in old versions</span><br><span class="line">of this formula.</span><br><span class="line"></span><br><span class="line">With the release of macOS Sierra the Apache module is now not built by default. If you want to build it on your system</span><br><span class="line">you have to install php with the --with-httpd24 option. See  brew options php71  for more details.</span><br><span class="line"></span><br><span class="line">To have launchd start homebrew/php/php71 now and restart at login:</span><br><span class="line">  brew services start homebrew/php/php71</span><br><span class="line">==&gt; Summary</span><br><span class="line">🍺  /usr/local/Cellar/php71/7.1.1_12: 344 files, 39.7M</span><br></pre></td></tr></table></figure><h3 id="配置-Configure-1"><a href="#配置-Configure-1" class="headerlink" title="配置  Configure"></a>配置  Configure</h3><p>編輯檔案 <code>/usr/local/etc/php/7.1/php-fpm.d/www.conf</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">user = YOUR_USERNAME</span><br><span class="line">group = staff</span><br></pre></td></tr></table></figure></p><h3 id="測試-Testing-1"><a href="#測試-Testing-1" class="headerlink" title="測試  Testing"></a>測試  Testing</h3><p>啟動 php-fpm<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo brew services start php71</span><br></pre></td></tr></table></figure></p><p>Show running processes<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lsof -Pni4 | grep LISTEN | grep php</span><br></pre></td></tr></table></figure></p><h2 id="安裝-NGINX"><a href="#安裝-NGINX" class="headerlink" title="安裝 NGINX"></a>安裝 NGINX</h2><h3 id="Install-NGINX"><a href="#Install-NGINX" class="headerlink" title="Install NGINX"></a>Install NGINX</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$ brew tap homebrew/nginx</span><br><span class="line"></span><br><span class="line">$ brew install nginx</span><br><span class="line">==&gt; Downloading https://homebrew.bintray.com/bottles/nginx-1.12.1.sierra.bottle.tar.gz</span><br><span class="line">######################################################################## 100.0%</span><br><span class="line">==&gt; Pouring nginx-1.12.1.sierra.bottle.tar.gz</span><br><span class="line">==&gt; Caveats</span><br><span class="line">Docroot is: /usr/local/var/www</span><br><span class="line"></span><br><span class="line">The default port has been set in /usr/local/etc/nginx/nginx.conf to 8080 so that</span><br><span class="line">nginx can run without sudo.</span><br><span class="line"></span><br><span class="line">nginx will load all files in /usr/local/etc/nginx/servers/.</span><br><span class="line"></span><br><span class="line">To have launchd start nginx now and restart at login:</span><br><span class="line">  brew services start nginx</span><br><span class="line">Or, if you don&apos;t want/need a background service you can just run:</span><br><span class="line">  nginx</span><br><span class="line">==&gt; Summary</span><br><span class="line">🍺  /usr/local/Cellar/nginx/1.12.1: 23 files, 1MB</span><br></pre></td></tr></table></figure><h3 id="安裝測試-Testing"><a href="#安裝測試-Testing" class="headerlink" title="安裝測試  Testing"></a>安裝測試  Testing</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">## Start Nginx</span><br><span class="line">$ sudo brew services start nginx</span><br><span class="line"></span><br><span class="line">## Check if Nginx is running on default port</span><br><span class="line">$ curl -IL http://127.0.0.1:8080</span><br><span class="line">curl -IL http://127.0.0.1:8080</span><br><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Server: nginx/1.12.1</span><br><span class="line">Date: Sun, 27 Aug 2017 14:59:30 GMT</span><br><span class="line">Content-Type: text/html</span><br><span class="line">Content-Length: 274</span><br><span class="line">Last-Modified: Sat, 26 Aug 2017 14:05:36 GMT</span><br><span class="line">Connection: keep-alive</span><br><span class="line">ETag: &quot;59a18030-112&quot;</span><br><span class="line">Accept-Ranges: bytes</span><br></pre></td></tr></table></figure><h3 id="Stop-Nginx"><a href="#Stop-Nginx" class="headerlink" title="Stop Nginx"></a>Stop Nginx</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo brew services stop nginx</span><br></pre></td></tr></table></figure><h3 id="配置-Configure-2"><a href="#配置-Configure-2" class="headerlink" title="配置  Configure"></a>配置  Configure</h3><h4 id="建立目錄-Create-directories"><a href="#建立目錄-Create-directories" class="headerlink" title="建立目錄  Create directories"></a>建立目錄  Create directories</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir -p /usr/local/etc/nginx/sites-available &amp;&amp; \</span><br><span class="line">$ mkdir -p /usr/local/etc/nginx/sites-enabled &amp;&amp; \</span><br><span class="line">$ mkdir -p /usr/local/etc/nginx/conf.d &amp;&amp; \</span><br><span class="line">$ mkdir -p /usr/local/etc/nginx/ssl</span><br></pre></td></tr></table></figure><h4 id="配置檔案-nginx-conf"><a href="#配置檔案-nginx-conf" class="headerlink" title="配置檔案 nginx.conf"></a>配置檔案 nginx.conf</h4><p>刪除預設檔案<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ rm /usr/local/etc/nginx/nginx.conf</span><br></pre></td></tr></table></figure></p><p>建立新檔 <code>$ vim /usr/local/etc/nginx/nginx.conf</code> 內容<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">worker_processes  1;</span><br><span class="line"></span><br><span class="line">error_log  /var/log/nginx/error.log;</span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections  1024;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    include             mime.types;</span><br><span class="line">    default_type        application/octet-stream;</span><br><span class="line"></span><br><span class="line">    log_format  main  &apos;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &apos;</span><br><span class="line">                      &apos;$status $body_bytes_sent &quot;$http_referer&quot; &apos;</span><br><span class="line">                      &apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&apos;;</span><br><span class="line"></span><br><span class="line">    access_log  /var/log/nginx/access.log  main;</span><br><span class="line"></span><br><span class="line">    #sendfile            on;</span><br><span class="line">    sendfile            off;</span><br><span class="line"></span><br><span class="line">    #keepalive_timeout   65;</span><br><span class="line">    keepalive_timeout   1;</span><br><span class="line"></span><br><span class="line">    index index.html index.php;</span><br><span class="line"></span><br><span class="line">    include /usr/local/etc/nginx/sites-enabled/*;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="啟動並測試-Nginx-Start-and-Test-Nginx"><a href="#啟動並測試-Nginx-Start-and-Test-Nginx" class="headerlink" title="啟動並測試 Nginx  Start and Test Nginx"></a>啟動並測試 Nginx  Start and Test Nginx</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">## Start Nginx</span><br><span class="line">$ sudo brew services start nginx</span><br><span class="line"></span><br><span class="line">## Check if Nginx is running on default port</span><br><span class="line">$ curl -IL http://localhost</span><br><span class="line">curl -IL http://localhost</span><br><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Server: nginx/1.12.1</span><br><span class="line">Date: Sun, 27 Aug 2017 15:12:35 GMT</span><br><span class="line">Content-Type: text/html</span><br><span class="line">Content-Length: 274</span><br><span class="line">Last-Modified: Sat, 26 Aug 2017 14:05:36 GMT</span><br><span class="line">Connection: keep-alive</span><br><span class="line">ETag: &quot;59a18030-112&quot;</span><br><span class="line">Accept-Ranges: bytes</span><br></pre></td></tr></table></figure><h2 id="設定-SSL-Setup-SSL"><a href="#設定-SSL-Setup-SSL" class="headerlink" title="設定 SSL  Setup SSL"></a>設定 SSL  Setup SSL</h2><p>Generate 4096 bit RSA keys and the self-sign the certificates<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ openssl req -new -newkey rsa:4096 -days 365 -nodes -x509 -subj &quot;/C=US/ST=State/L=Town/O=Office/CN=localhost&quot; -keyout /usr/local/etc/nginx/ssl/localhost.key -out /usr/local/etc/nginx/ssl/localhost.crt</span><br></pre></td></tr></table></figure></p><p>RSA keys 存放在資料夾 <code>/usr/local/etc/nginx/ssl</code></p><h2 id="建立-Virtual-Hosts-網站檔案"><a href="#建立-Virtual-Hosts-網站檔案" class="headerlink" title="建立 Virtual Hosts 網站檔案"></a>建立 Virtual Hosts 網站檔案</h2><p>檔案 <code>/usr/local/etc/nginx/sites-available/default</code> 內容<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       80;</span><br><span class="line">    server_name  localhost;</span><br><span class="line">    root       /YOUR/DOCUMENT/ROOT;</span><br><span class="line"></span><br><span class="line">    access_log  /var/log/default.access.log  main;</span><br><span class="line">    error_log  /var/log/nginx/default.error.log  debug;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        include   /usr/local/etc/nginx/conf.d/php-fpm;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location = /info &#123;</span><br><span class="line">        allow   127.0.0.1;</span><br><span class="line">        deny    all;</span><br><span class="line">        rewrite (.*) /.info.php;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    error_page  404     /404.html;</span><br><span class="line">    error_page  403     /403.html;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>檔案 <code>/usr/local/etc/nginx/sites-available/default-ssl</code> 內容<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       443;</span><br><span class="line">    server_name  localhost;</span><br><span class="line">    root       /YOUR/DOCUMENT/ROOT;</span><br><span class="line"></span><br><span class="line">    access_log  /var/log/nginx/default-ssl.access.log  main;</span><br><span class="line">    error_log  /var/log/nginx/default-ssl.error.log  debug;</span><br><span class="line"></span><br><span class="line">    ssl                  on;</span><br><span class="line">    ssl_certificate      ssl/localhost.crt;</span><br><span class="line">    ssl_certificate_key  ssl/localhost.key;</span><br><span class="line"></span><br><span class="line">    ssl_session_timeout  5m;</span><br><span class="line"></span><br><span class="line">    ssl_protocols  SSLv2 SSLv3 TLSv1;</span><br><span class="line">    ssl_ciphers  HIGH:!aNULL:!MD5;</span><br><span class="line">    ssl_prefer_server_ciphers   on;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        include   /usr/local/etc/nginx/conf.d/php-fpm;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location = /info &#123;</span><br><span class="line">        allow   127.0.0.1;</span><br><span class="line">        deny    all;</span><br><span class="line">        rewrite (.*) /.info.php;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    error_page  404     /404.html;</span><br><span class="line">    error_page  403     /403.html;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>檔案 <code>/usr/local/etc/nginx/conf.d/php-fpm</code> 內容<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">location ~ \.php$ &#123;</span><br><span class="line">    try_files      $uri = 404;</span><br><span class="line">    fastcgi_pass   127.0.0.1:9000;</span><br><span class="line">    fastcgi_index  index.php;</span><br><span class="line">    fastcgi_param  SCRIPT_FILENAME $document_root$fastcgi_script_name;</span><br><span class="line">    include        fastcgi_params;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="Activate-Virtual-Hosts"><a href="#Activate-Virtual-Hosts" class="headerlink" title="Activate Virtual Hosts"></a>Activate Virtual Hosts</h3><p>在 <code>sites-enabled</code> 目錄下建立 Symbolic link。將要 enable 的 virtal host 指向 <code>sites-available</code> 目錄內的 virtal host config file。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ln -sfv /usr/local/etc/nginx/sites-available/default /usr/local/etc/nginx/sites-enabled/default</span><br><span class="line">$ ln -sfv /usr/local/etc/nginx/sites-available/default-ssl /usr/local/etc/nginx/sites-enabled/default-ssl</span><br></pre></td></tr></table></figure></p><h3 id="測試-Testing-2"><a href="#測試-Testing-2" class="headerlink" title="測試 Testing"></a>測試 Testing</h3><p>建立 <code>/YOUR/DOCUMENT/ROOT/info.php</code> 內容<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">phpinfo();</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure></p><p>重新啟動 Nginx 並測試<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ sudo brew services restart nginx</span><br><span class="line"></span><br><span class="line">$ curl -IL http://localhost/info.php</span><br><span class="line">curl -IL http://localhost/info.php</span><br><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Server: nginx/1.12.1</span><br><span class="line">Date: Sun, 27 Aug 2017 15:24:46 GMT</span><br><span class="line">Content-Type: text/html; charset=UTF-8</span><br><span class="line">Connection: keep-alive</span><br><span class="line">X-Powered-By: PHP/7.1.8</span><br></pre></td></tr></table></figure></p><h2 id="安裝其他-Libraries"><a href="#安裝其他-Libraries" class="headerlink" title="安裝其他 Libraries"></a>安裝其他 Libraries</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ brew install php71-mcrypt php71-imagick</span><br></pre></td></tr></table></figure><p><code>brew info</code> 查看 PHP 及其相關 Libraries 的資訊<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line">$ brew info php71</span><br><span class="line">homebrew/php/php71: stable 7.1.8 (bottled), HEAD</span><br><span class="line">PHP Version 7.1</span><br><span class="line">https://php.net</span><br><span class="line">Conflicts with:</span><br><span class="line">  php53 (because different php versions install the same binaries.)</span><br><span class="line">  php54 (because different php versions install the same binaries.)</span><br><span class="line">  php55 (because different php versions install the same binaries.)</span><br><span class="line">  php56 (because different php versions install the same binaries.)</span><br><span class="line">  php70 (because different php versions install the same binaries.)</span><br><span class="line">  php72 (because different php versions install the same binaries.)</span><br><span class="line">/usr/local/Cellar/php71/7.1.8_20 (349 files, 39.5MB) *</span><br><span class="line">  Poured from bottle on 2017-08-26 at 16:34:27</span><br><span class="line">From: https://github.com/Homebrew/homebrew-php/blob/master/Formula/php71.rb</span><br><span class="line">==&gt; Dependencies</span><br><span class="line">Required: freetype ✔, gettext ✔, icu4c ✔, jpeg ✔, libpng ✔, libxml2 ✔, unixodbc ✔, readline ✔, openssl ✔</span><br><span class="line">Optional: enchant ✘, gmp ✘, webp ✘, homebrew/apache/httpd24 ✔, homebrew/apache/httpd22 ✘</span><br><span class="line">==&gt; Requirements</span><br><span class="line">Optional: postgresql ✘</span><br><span class="line">==&gt; Options</span><br><span class="line">--with-cgi</span><br><span class="line">Enable building of the CGI executable (implies --without-fpm)</span><br><span class="line">--with-debug</span><br><span class="line">Compile with debugging symbols</span><br><span class="line">--with-enchant</span><br><span class="line">Build with enchant support</span><br><span class="line">--with-gmp</span><br><span class="line">Build with gmp support</span><br><span class="line">--with-homebrew-curl</span><br><span class="line">Include Curl support via Homebrew</span><br><span class="line">--with-homebrew-libressl</span><br><span class="line">Include LibreSSL instead of OpenSSL via Homebrew</span><br><span class="line">--with-homebrew-libxml2</span><br><span class="line">Include Libxml2 support via Homebrew</span><br><span class="line">--with-homebrew-libxslt</span><br><span class="line">Include LibXSLT support via Homebrew</span><br><span class="line">--with-httpd22</span><br><span class="line">Enable building of shared Apache 2.2 Handler module</span><br><span class="line">--with-httpd24</span><br><span class="line">Enable building of shared Apache 2.4 Handler module</span><br><span class="line">--with-imap</span><br><span class="line">Include IMAP extension</span><br><span class="line">--with-libmysql</span><br><span class="line">Include (old-style) libmysql support instead of mysqlnd</span><br><span class="line">--with-mssql</span><br><span class="line">Include MSSQL-DB support</span><br><span class="line">--with-pdo-oci</span><br><span class="line">Include Oracle databases (requries ORACLE_HOME be set)</span><br><span class="line">--with-pear</span><br><span class="line">Build with PEAR</span><br><span class="line">--with-phpdbg</span><br><span class="line">Enable building of the phpdbg SAPI executable</span><br><span class="line">--with-postgresql</span><br><span class="line">Build with postgresql support</span><br><span class="line">--with-thread-safety</span><br><span class="line">Build with thread safety</span><br><span class="line">--with-webp</span><br><span class="line">Build with webp support</span><br><span class="line">--without-bz2</span><br><span class="line">Build without bz2 support</span><br><span class="line">--without-fpm</span><br><span class="line">Disable building of the fpm SAPI executable</span><br><span class="line">--without-ldap</span><br><span class="line">Build without LDAP support</span><br><span class="line">--without-legacy-mysql</span><br><span class="line">Do not include the deprecated mysql_ functions</span><br><span class="line">--without-mysql</span><br><span class="line">Remove MySQL/MariaDB support</span><br><span class="line">--without-pcntl</span><br><span class="line">Build without Process Control support</span><br><span class="line">--without-unixodbc</span><br><span class="line">Build without unixODBC support</span><br><span class="line">--HEAD</span><br><span class="line">Install HEAD version</span><br><span class="line">==&gt; Caveats</span><br><span class="line">The php.ini file can be found in:</span><br><span class="line">    /usr/local/etc/php/7.1/php.ini</span><br><span class="line"></span><br><span class="line">✩✩✩✩ Extensions ✩✩✩✩</span><br><span class="line"></span><br><span class="line">If you are having issues with custom extension compiling, ensure that you are using the brew version, by placing /usr/local/bin before /usr/sbin in your PATH:</span><br><span class="line"></span><br><span class="line">      PATH=&quot;/usr/local/bin:$PATH&quot;</span><br><span class="line"></span><br><span class="line">PHP71 Extensions will always be compiled against this PHP. Please install them using --without-homebrew-php to enable compiling against system PHP.</span><br><span class="line"></span><br><span class="line">✩✩✩✩ PHP CLI ✩✩✩✩</span><br><span class="line"></span><br><span class="line">If you wish to swap the PHP you use on the command line, you should add the following to ~/.bashrc, ~/.zshrc, ~/.profile or your shell&apos;s equivalent configuration file:</span><br><span class="line">  export PATH=&quot;$(brew --prefix homebrew/php/php71)/bin:$PATH&quot;</span><br><span class="line"></span><br><span class="line">✩✩✩✩ FPM ✩✩✩✩</span><br><span class="line"></span><br><span class="line">To launch php-fpm on startup:</span><br><span class="line">    mkdir -p ~/Library/LaunchAgents</span><br><span class="line">    cp /usr/local/opt/php71/homebrew.mxcl.php71.plist ~/Library/LaunchAgents/</span><br><span class="line">    launchctl load -w ~/Library/LaunchAgents/homebrew.mxcl.php71.plist</span><br><span class="line"></span><br><span class="line">The control script is located at /usr/local/opt/php71/sbin/php71-fpm</span><br><span class="line"></span><br><span class="line">OS X 10.8 and newer come with php-fpm pre-installed, to ensure you are using the brew version you need to make sure /usr/local/sbin is before /usr/sbin in your PATH:</span><br><span class="line"></span><br><span class="line">  PATH=&quot;/usr/local/sbin:$PATH&quot;</span><br><span class="line"></span><br><span class="line">You may also need to edit the plist to use the correct &quot;UserName&quot;.</span><br><span class="line"></span><br><span class="line">Please note that the plist was called &apos;homebrew-php.josegonzalez.php71.plist&apos; in old versions of this formula.</span><br><span class="line"></span><br><span class="line">With the release of macOS Sierra the Apache module is now not built by default. If you want to build it on your system you have to install php with the --with-httpd24 option. See  brew options php71 for more details.</span><br><span class="line"></span><br><span class="line">To have launchd start homebrew/php/php71 now and restart at login:</span><br><span class="line">  brew services start homebrew/php/php71</span><br></pre></td></tr></table></figure></p><hr><h2 id="後記-Epilogue"><a href="#後記-Epilogue" class="headerlink" title="後記 Epilogue"></a>後記 Epilogue</h2><p>如果 <code>$ curl -IL http://127.0.0.1:8080</code> 出現 <code>curl: (7) Failed to connect to 127.0.0.1 port 8080: Connection refused</code>，請記得檢查</p><ol><li>php-fpm 是不是啟動</li><li>nginx 是否有 restart</li><li><code>/usr/loca/etc/php/7.1/php-fpm.d/www.conf</code> 內 <code>user</code> 及 <code>group</code> 是否正確設定</li><li><code>/usr/local/etc/nginx/conf.d/php-fpm</code> 檔案是否建立</li></ol><hr><h2 id="參考資料-References"><a href="#參考資料-References" class="headerlink" title="參考資料  References"></a>參考資料  References</h2><ul><li><a href="https://gist.github.com/dtomasi/ab76d14338db82ec24a1fc137caff75b" target="_blank" rel="noopener">Install NGINX with PHP7-FPM on Mac OS X with Homebrew</a></li><li><a href="https://gist.github.com/pixeline/51c43c787f51b018d484597f30be3d2b" target="_blank" rel="noopener">pixeline/php_upgrade_to_71.sh</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;在 macOX Sierra 透過 &lt;code&gt;brew&lt;/code&gt; 指令安裝 &lt;code&gt;php71&lt;/code&gt;（帶有 &lt;code&gt;php-fpm&lt;/code&gt;）及 &lt;code&gt;nginx&lt;/code&gt;。&lt;br&gt;Install NGINX with PHP71 on Mac OS Sierra with Homebrew.&lt;/p&gt;
    
    </summary>
    
      <category term="lemp" scheme="http://codefun.tw/categories/lemp/"/>
    
    
      <category term="nginx" scheme="http://codefun.tw/tags/nginx/"/>
    
      <category term="php71" scheme="http://codefun.tw/tags/php71/"/>
    
      <category term="php-fpm" scheme="http://codefun.tw/tags/php-fpm/"/>
    
  </entry>
  
  <entry>
    <title>使用 wget 砍站</title>
    <link href="http://codefun.tw/2017/2017081804-wget-download-web-pages.html"/>
    <id>http://codefun.tw/2017/2017081804-wget-download-web-pages.html</id>
    <published>2017-08-18T06:48:57.000Z</published>
    <updated>2017-08-18T06:48:57.000Z</updated>
    
    <content type="html"><![CDATA[<p>wget 是 linux 中除了 curl 外另一個檔案下載的好用工具，也可以使用它來“砍站”。<br>但是無法正確抓去使用 <code>vue-router</code> 等 js 撰寫的動態呈現網頁的內容。</p><a id="more"></a><p>用法</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ wget -m -k -E -p -F --restrict-file-names=windows -nH --header=&quot;Accept: text/html&quot; --user-agent=&quot;Mozilla/5.0 (Macintosh; Intel Mac OS X 10.8; rv:21.0) Gecko/20100101 Firefox/21.0&quot; 127.0.0.1</span><br></pre></td></tr></table></figure><p>指令說明</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">-m,  --mirror                相等於 -N -r -l inf --no-remove-listing 選項</span><br><span class="line">-k,  --convert-links         將原本網站內所有站內的連結全都改為 Local 連結，這樣下載網站後才可以離線使用。</span><br><span class="line">-E,  --adjust-extension      save HTML/CSS documents with proper extensions.</span><br><span class="line">-p,  --page-requisites       下載所有顯示網頁所需的檔案，例如圖片等</span><br><span class="line">-F,  --force-html            以 HTML 方式處理輸入檔</span><br><span class="line">-N,  --timestamping          除非遠端檔案比較新，否則不下載遠端檔案</span><br><span class="line">-r,  --recursive             遞迴下載</span><br><span class="line">-l,  --level=數字             最大搜尋深度 (inf 或 0 表示無限)</span><br><span class="line">--no-remove-listing          不刪除 ‘.listing’ 檔案</span><br><span class="line">--restrict-file-names=OS     只使用作業系統能夠接受的字元作為檔案字元</span><br><span class="line">-nH, --no-host-directories   不建立含有遠端主機名稱的目錄</span><br><span class="line">--header=字串                 在連線資料標頭中加入指定字串</span><br><span class="line">-U,  --user-agent=AGENT      宣稱為 AGENT 而不是 Wget/VERSION</span><br></pre></td></tr></table></figure><hr><h2 id="參考資料"><a href="#參考資料" class="headerlink" title="參考資料"></a>參考資料</h2><ul><li><a href="https://www.gnu.org/software/wget/manual/wget.html" target="_blank" rel="noopener">GNU Wget 1.18 Manual</a></li><li><a href="https://john24318.wordpress.com/2013/08/18/wget-%E6%8C%87%E4%BB%A4%E7%94%A8%E6%B3%95%E8%88%87%E6%95%99%E5%AD%B8/" target="_blank" rel="noopener">wget 指令用法與教學</a></li><li><a href="https://www.lifewire.com/uses-of-command-wget-2201085" target="_blank" rel="noopener">How to Use the wget Linux Command to Download Web Pages and Files</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;wget 是 linux 中除了 curl 外另一個檔案下載的好用工具，也可以使用它來“砍站”。&lt;br&gt;但是無法正確抓去使用 &lt;code&gt;vue-router&lt;/code&gt; 等 js 撰寫的動態呈現網頁的內容。&lt;/p&gt;
    
    </summary>
    
      <category term="linux" scheme="http://codefun.tw/categories/linux/"/>
    
    
      <category term="wget" scheme="http://codefun.tw/tags/wget/"/>
    
  </entry>
  
  <entry>
    <title>開發廣告系統（DSP）不能不知道的關鍵字！</title>
    <link href="http://codefun.tw/2017/2017081803-cpc-cpa-ad-keywords.html"/>
    <id>http://codefun.tw/2017/2017081803-cpc-cpa-ad-keywords.html</id>
    <published>2017-08-18T04:20:55.000Z</published>
    <updated>2017-08-18T04:20:55.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="關鍵字"><a href="#關鍵字" class="headerlink" title="關鍵字"></a>關鍵字</h2><ul><li>DSP: Demand Side Platform 網路廣告中的需求方平台，可以讓廣告主進行跨媒體的自動化廣告投放。J: 買廣告版位</li><li>SSP: Supply Side Platform 是網路媒體中的供應方平台。SSP 平台幫助網路媒體託管其廣告位和廣告交易，與網路交易平台對接，從而將他們的流量變現。J: 賣廣告版位</li><li>DMP: Data-Management Platform 是專門為廣告主、媒體等開發的廣告數據管理平台，主要分析、儲存用戶行為數據，並管理相關資料，為廣告主提供精準的用戶行為分析。</li></ul><a id="more"></a><ul><li>RTB: Real Time Billing</li><li>CPC: Cost Per Click 每次點擊計價</li><li>CPM: Cost Per Mille，或者Cost Per Thousand;Cost Per Impressions，每千次展示計價</li><li>CPA: Cost Per Action 以實際行動效果來計算成本</li><li>CPS: Cost Per Sales 每次有效銷售定價</li><li>CPV: Cost Per View 每次觀看成本</li><li>AD Exchange: 網路廣告交易平台，功能就是聯繫廣告的賣方（媒體、網站主）和買方（廣告主）。Ad Exchange 平台交易的公司包括有 Yahoo、Google、The Rubicon Project、OpenX、AppNexus 等</li><li>AD Network: 聯播網</li><li>ROI: Return On Investment 每投資一塊錢所得到回饋的百分比</li><li>ROAS: Return On AD Spending 廣告沒投入一塊錢可獲得的營收</li></ul><hr><h2 id="DSP-優點"><a href="#DSP-優點" class="headerlink" title="DSP 優點"></a>DSP 優點</h2><ul><li>精確的受眾定向</li><li>簡單好用的使用者界面</li><li>強大的 RTB 技術</li><li>購買流程更快更簡單</li><li>整合多種服務，持續精進一站化</li><li>實現跨平台統一管理</li></ul><hr><h2 id="參考文章"><a href="#參考文章" class="headerlink" title="參考文章"></a>參考文章</h2><ul><li><a href="https://goo.gl/BFs31A" target="_blank" rel="noopener">關於RTB, DSP, DMP的一些小事及簡單認知</a></li><li><a href="https://www.bnext.com.tw/ext_rss/view/id/651447" target="_blank" rel="noopener">行銷人必知！ DSP廣告平台迷思求解7大守則</a></li><li><a href="https://www.inside.com.tw/2016/07/01/what-is-dsp-ssp-dmp" target="_blank" rel="noopener">【硬塞科技字典】什麼是 DSP 需求方平台/ SSP 供應方平台/ DMP 數據管理平台？</a></li><li><a href="https://www.inside.com.tw/2016/07/01/what-is-ad-exchange" target="_blank" rel="noopener">【硬塞科技字典】什麼是 Ad Exchange？</a></li><li><a href="https://www.inside.com.tw/2014/05/30/every-local-advertiser-needs-rtb" target="_blank" rel="noopener">什麼是 RTB 實時競價廣告？他將是未來趨勢！</a></li><li><a href="https://goo.gl/eG52L7" target="_blank" rel="noopener">常見的網路廣告平台運作原理淺析</a></li><li><a href="https://goo.gl/FwuOx8" target="_blank" rel="noopener">APP廣告、網路媒體常說到所謂的CPM、CPC、CPA、CPI到底是甚麼意思?</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;關鍵字&quot;&gt;&lt;a href=&quot;#關鍵字&quot; class=&quot;headerlink&quot; title=&quot;關鍵字&quot;&gt;&lt;/a&gt;關鍵字&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;DSP: Demand Side Platform 網路廣告中的需求方平台，可以讓廣告主進行跨媒體的自動化廣告投放。J: 買廣告版位&lt;/li&gt;
&lt;li&gt;SSP: Supply Side Platform 是網路媒體中的供應方平台。SSP 平台幫助網路媒體託管其廣告位和廣告交易，與網路交易平台對接，從而將他們的流量變現。J: 賣廣告版位&lt;/li&gt;
&lt;li&gt;DMP: Data-Management Platform 是專門為廣告主、媒體等開發的廣告數據管理平台，主要分析、儲存用戶行為數據，並管理相關資料，為廣告主提供精準的用戶行為分析。&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="marketing" scheme="http://codefun.tw/categories/marketing/"/>
    
    
      <category term="marketing" scheme="http://codefun.tw/tags/marketing/"/>
    
      <category term="ad keyword" scheme="http://codefun.tw/tags/ad-keyword/"/>
    
  </entry>
  
  <entry>
    <title>如何使用 Google Hangouts 進行遠端多人會議</title>
    <link href="http://codefun.tw/2017/2017081802-google-hangouts-multi-person-meeting.html"/>
    <id>http://codefun.tw/2017/2017081802-google-hangouts-multi-person-meeting.html</id>
    <published>2017-08-18T03:11:20.000Z</published>
    <updated>2019-04-10T03:01:00.000Z</updated>
    
    <content type="html"><![CDATA[<ol><li><p>開啟 Google Chrome 瀏覽器並且登入 Google 帳號，然後在網址列搜尋 <code>Google Hangouts</code> 或直接開啟連結 <a href="https://hangouts.google.com/?hl=zh-TW" target="_blank" rel="noopener">https://hangouts.google.com/?hl=zh-TW</a> 。</p><a id="more"></a></li><li><p>進入 <a href="https://hangouts.google.com/?hl=zh-TW" target="_blank" rel="noopener">https://hangouts.google.com/?hl=zh-TW</a> 頁面後點擊 <code>視訊通話</code>。<br><img src="https://lh3.googleusercontent.com/AlFUgzsOF6r7JUqpzjdfq5D1af5WpFffSDOuWE94uCZQjUDvay_gIb7Ab_01fsDXcuyLeiT7IT-Iohm0bFuN5rilRxYpbxvzKEm9jCXHsb9g8Qldxfc022gsid-IXbTBpyb-Fg285g=w1015-h598-no" alt="開啟視訊通話"></p></li><li><p>同意 Google Hangouts 取用攝影機及麥克風的權限，即可正式開啟會議。<br><img src="https://lh3.googleusercontent.com/komj3VnPhw7yi-KjjhBGMzh_FWEjp_rHLrB-fuF1cD2thBBGST1xnm0K_HwKmLAzsIqCS66qkK9D6oiM-QpggSjEmR0IppLB6NqsjcnpDXMK61iOx7OQ-6ob0Cev-AFrCX-Icc-b4A=w1026-h717-no" alt="同意取用攝影機及麥克風"></p></li><li><p>邀請進入會議的方式有二，一是透過 email 邀請，二是分享連結。<br><img src="https://lh3.googleusercontent.com/7funsf3-O_S6Pn7PDDOy8ufZfE4yLcnFdYshes6aVDhyyTzwMdA-F6JHoG4agLqYxWIwVVMx_IrhZXerDaFkWGac-sPETDDnxktLK8zuRZKziQfLJLtzvlIPlejRiaehZNs2zmt--w=w1097-h802-no" alt="邀請進入會議的方式"></p></li><li><p>要分享報告的內容給其他人時，可以點擊右上角。<br><img src="https://lh3.googleusercontent.com/2dApM7z6B2B4J5OUJmLsqeV0aDH4DgVAAleQJHWxga_6LaF_Cd_gK5o_TR3cgQfPwSK0Va6eS_AS_G88Pi7AW5_9eMiGBBAhniwnv3KG8KqANnZoXa_BaxnJ_Kz0Mx1WsmRB4AMbQA=w933-h705-no" alt="開啟螢幕分享"></p></li><li><p>然後點擊 <code>分享螢幕畫面</code><br><img src="https://lh3.googleusercontent.com/aj9yUUt70f5zdQ5X-InP-J_CJTD2SDb8EkTYU9B-6jf-Io7rsxAyZp1BzmPDvMO3VIykYCJ-rUxZQ7LLltmNkVtcXDJYy-84wgdFusiNJsvNt60fVrV_zJ4INBpZseRjxRtudYPvTQ=w1097-h802-no" alt="分享螢幕畫面"></p></li><li><p>再選擇要分享螢幕（Your Entire Screen）還是應用程式（Application Window）。<br><img src="https://lh3.googleusercontent.com/4l7x9qHKu-th4PQqFmaxzIB2Ri5tqYaIJNB0s_Ku3FgrhQcC43ch7E7JlMhT2AihQ3GY4bfYmem1zi3sqZeK1n0zFtxqZjvEsRN2cIN0MRQtM1xGQbQ0z4l6npF64mfzrIm4Dos12A=w617-h523-no" alt="分享整個螢幕畫面"><br><img src="https://lh3.googleusercontent.com/9EmKhj4VscJAmj9nL3GUGgOiYqoPs8iKlpEkzCH5gPECBEuvz9TSrvUlTamRs3u5Z4zza9UqLJMT0D6mgQxwcToRTdfin2pL6d2zdxnPKonmVIBQg_pNnaiHEvzWcoC7UJEDk51-XQ=w619-h523-no" alt="分享應用程式"></p></li><li><p>再點擊 <code>Share</code>，此時你的 Google Hangouts 畫面就會是要分享的內容。</p></li><li>要看其他人分享的螢幕，點擊主視窗下方的其他人的小視窗就可以進行切換。<br><img src="https://lh3.googleusercontent.com/sedtAm7wrJNBXCEaVVhg5PBIinaNEtYXNzzZL4rYf39v2-p6d3hDeYFzoXZk6s5ZOpGs_5I0R9LVDkQrBkXp_e59ZF6D6cWxqQuF-Bpp9xFV7r-AJPGdhKp73NeNy58SlMdXHy52ag=w1182-h673-no" alt="切換到他人分享的螢幕"></li></ol><p>以上截圖內容是在 MAC OS 下操作的畫面，其他 OS 可能會有出入。</p>]]></content>
    
    <summary type="html">
    
      &lt;ol&gt;
&lt;li&gt;&lt;p&gt;開啟 Google Chrome 瀏覽器並且登入 Google 帳號，然後在網址列搜尋 &lt;code&gt;Google Hangouts&lt;/code&gt; 或直接開啟連結 &lt;a href=&quot;https://hangouts.google.com/?hl=zh-TW&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://hangouts.google.com/?hl=zh-TW&lt;/a&gt; 。&lt;/p&gt;
    
    </summary>
    
      <category term="notes" scheme="http://codefun.tw/categories/notes/"/>
    
    
      <category term="IM" scheme="http://codefun.tw/tags/IM/"/>
    
      <category term="Google Hangouts" scheme="http://codefun.tw/tags/Google-Hangouts/"/>
    
  </entry>
  
  <entry>
    <title>Hexo 安裝筆記</title>
    <link href="http://codefun.tw/2017/2017081801-hexo-install-notes.html"/>
    <id>http://codefun.tw/2017/2017081801-hexo-install-notes.html</id>
    <published>2017-08-18T02:51:11.000Z</published>
    <updated>2017-08-18T02:51:11.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Install-Hexo"><a href="#Install-Hexo" class="headerlink" title="Install Hexo"></a>Install Hexo</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g hexo-cli</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="Repository"><a href="#Repository" class="headerlink" title="Repository"></a>Repository</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/GITPAGEUSERNAME/GITPAGEUSERNAME.github.io.git .deploy/GITPAGEUSERNAME.github.io</span><br></pre></td></tr></table></figure><h2 id="Shell-Script"><a href="#Shell-Script" class="headerlink" title="Shell Script"></a>Shell Script</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">hexo generate</span><br><span class="line">cp -R public/* .deploy/codefuntw.github.io</span><br><span class="line">cd .deploy/codefuntw.github.io</span><br><span class="line">git add .</span><br><span class="line">git commit -m “update”</span><br><span class="line">git push origin master</span><br></pre></td></tr></table></figure><h2 id="Custom-Domain-Setting-Reference"><a href="#Custom-Domain-Setting-Reference" class="headerlink" title="Custom Domain Setting Reference"></a>Custom Domain Setting Reference</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">https://help.github.com/articles/setting-up-an-apex-domain/</span><br><span class="line">https://help.github.com/articles/setting-up-an-apex-domain/#configuring-a-records-with-your-dns-provider</span><br><span class="line">https://help.github.com/articles/adding-or-removing-a-custom-domain-for-your-github-pages-site/</span><br></pre></td></tr></table></figure><h3 id="Custom-Domain-對應到-GitHub-page"><a href="#Custom-Domain-對應到-GitHub-page" class="headerlink" title="Custom Domain 對應到 GitHub page"></a>Custom Domain 對應到 GitHub page</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ dig blog.codefun.tw +nostats +nocomments +nocmd</span><br><span class="line"></span><br><span class="line">; &lt;&lt;&gt;&gt; DiG 9.8.3-P1 &lt;&lt;&gt;&gt; blog.codefun.tw +nostats +nocomments +nocmd</span><br><span class="line">;; global options: +cmd</span><br><span class="line">;blog.codefun.tw.       IN  A</span><br><span class="line">blog.codefun.tw.    3599    IN  CNAME   GITPAGEUSERNAME.github.io.</span><br><span class="line">GITPAGEUSERNAME.github.io.  3599    IN  CNAME   github.map.fastly.net.</span><br><span class="line">github.map.fastly.net.  2865    IN  CNAME   prod.github.map.fastlylb.net.</span><br><span class="line">prod.github.map.fastlylb.net. 13 IN A   151.101.100.133</span><br></pre></td></tr></table></figure><h2 id="Command"><a href="#Command" class="headerlink" title="Command"></a>Command</h2><h3 id="常用基本指令"><a href="#常用基本指令" class="headerlink" title="常用基本指令"></a>常用基本指令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ hexo g  # 或者 hexo generate</span><br><span class="line">$ hexo s  # 或者 hexo server，可以在 http://localhost:4000/ 查看</span><br><span class="line">$ hexo deploy (hexo d)  # 部署到遠端</span><br><span class="line">$ hexo new &quot;postName&quot;  # 新建文章</span><br><span class="line">$ hexo new page &quot;pageName&quot;  # 新建頁面</span><br></pre></td></tr></table></figure><h3 id="常用簡寫"><a href="#常用簡寫" class="headerlink" title="常用簡寫"></a>常用簡寫</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ hexo n == hexo new</span><br><span class="line">$ hexo g == hexo generate</span><br><span class="line">$ hexo s == hexo server</span><br><span class="line">$ hexo d == hexo deploy</span><br></pre></td></tr></table></figure><h3 id="常用組合"><a href="#常用組合" class="headerlink" title="常用組合"></a>常用組合</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ hexo d -g  # 生成部署</span><br><span class="line">$ hexo s -g  # 生成預覽</span><br></pre></td></tr></table></figure><hr><h2 id="Plugins"><a href="#Plugins" class="headerlink" title="Plugins"></a>Plugins</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ npm install hexo-generator-feed</span><br><span class="line">$ npm install hexo-generator-sitemap</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Install-Hexo&quot;&gt;&lt;a href=&quot;#Install-Hexo&quot; class=&quot;headerlink&quot; title=&quot;Install Hexo&quot;&gt;&lt;/a&gt;Install Hexo&lt;/h2&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ npm install -g hexo-cli&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="blog" scheme="http://codefun.tw/categories/blog/"/>
    
    
      <category term="blog" scheme="http://codefun.tw/tags/blog/"/>
    
      <category term="hexo" scheme="http://codefun.tw/tags/hexo/"/>
    
  </entry>
  
</feed>
